{"version":3,"sources":["views/Login/store/actionCreators.tsx","network/user/index.ts","network/login/index.tsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","network/message/index.ts","network/video/index.ts","utils/videoUtils.ts","views/manage/innovate/pages/publish/childCpn/video/style.tsx","views/manage/innovate/pages/publish/childCpn/video/index.tsx","network/request.tsx"],"names":["changeUserMsg","res","type","userMsg","changeLoginType","loginType","changeUserDetailAction","dispatch","getUserDetail","then","data","love","follow","window","localStorage","setItem","JSON","stringify","userDetail","loginAction","userName","password","props","a","login","token","updateUserExpire","code","changeShow","auth","vip","history","push","pathname","console","log","message","warning","content","style","fontSize","marginTop","logoutAction","clear","userId","avatarUrl","createTime","updateTime","manage","subscriber","thumb","songId","setUserFavorite","id","request","url","method","headers","authorization","store","getState","getIn","getUserFavorite","offset","limit","params","cancelFavorite","getUserSub","uploadAvatar","formData","getOtherUserDetail","getUserChannel","getUserSubPlaylist","getUserMomentData","getUserAllMoment","getSimpleUserInfo","register","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","publishMessage","uri","getAllMsg","readMessage","ids","getVideoMsg","getCommentMsg","getAlbumMsg","getPlaylistMsg","getChannelMsg","deleteMsg","readSingleMsg","getVideoCate","getCateVideo","cateId","getVideoURL","vid","getVideoDetail","getSimiVideo","updatePlayCount","addVideo","name","desc","uploadVideo","uploadCover","deleteVideo","recommendVideo","getVideoBase64","Promise","resolve","reject","canvas","document","createElement","ctx","getContext","video","setAttribute","src","currentTime","oncanplay","height","videoHeight","width","videoWidth","drawImage","dataUrl","toDataURL","getVideoDuration","file","URL","createObjectURL","oVideo","duration","getAudioDuration","audio","VideoWrapper","styled","div","Video","useState","cateList","setCateList","setCateId","setName","setDesc","cover","setCover","setVideo","dt","setDt","currentIndex","setCurrentIndex","isShow","setIsShow","prevImgURL","setImgURL","prevVioURL","setVioURL","isShowImg","setIsShowImg","isShowVio","setIsShowVio","useDispatch","useEffect","className","onClick","e","rows","cols","onChange","currentTarget","nameChange","descChange","title","files","imgPrev","alt","vioPrev","length","map","item","index","liClick","trim","undefined","FormData","append","coverFormData","memo","config","instance","axios","create","baseURL","HOST_NAME","timeout","interceptors","use","err","response","status","createBrowserHistory"],"mappings":"mUAQO,SAASA,EAAcC,GAC5B,MAAO,CACLC,KAAM,gBACNC,QAASF,GAGb,SAASG,EAAgBH,GACvB,MAAO,CACLC,KAAM,kBACNG,UAAWJ,GAuBR,SAASK,IACd,OAAO,SAACC,GACNC,cAAgBC,MAAK,SAACC,GAAe,IAC3BC,EAAiBD,EAAjBC,KAAMC,EAAWF,EAAXE,OACTD,IACHD,EAAKC,KAAO,IAETC,IACHF,EAAKE,OAAS,IAEhBC,OAAOC,aAAaC,QAAQ,aAAcC,KAAKC,UAAUP,IACzDH,EA9BG,CACLL,KAAM,mBACNgB,WA4B4BR,QAKzB,SAASS,EAAYC,EAAkBC,EAAkBC,GAC9D,8CAAO,WAAOf,GAAP,iBAAAgB,EAAA,+EAEqBC,YAAMJ,EAAUC,GAFrC,YAEGX,EAFH,gCAIOe,EAAUf,EAAVe,MAJP,SAKsBC,YAAiBD,GALvC,cAMc,EANd,OAMOE,OAAa,MACnBpB,EAASqB,YAAW,iFAAsB,OAC1ClB,EAAKmB,KAAO,SACLnB,EAAKoB,KATb,UAWKvB,EAASP,EAAcU,IAX5B,yBAYKH,EAASH,EAAgB,IAZ9B,eAaDS,OAAOC,aAAaC,QAAQ,UAAWC,KAAKC,UAAUP,IACtDG,OAAOC,aAAaC,QAAQ,YAAa,KAdxC,UAeKR,EAASD,KAfd,QAgBDgB,EAAMS,QAAQC,KAAK,CACjBC,SAAU,UAjBX,0DAqBHC,QAAQC,IAAR,MACAC,IAAQC,QAAQ,CACdC,QAAS,yDACTC,MAAO,CACLC,SAAU,OACVC,UAAW,SA1BZ,0DAAP,sDAiCK,SAASC,IACd,OAAO,SAACnC,GACNM,OAAOC,aAAa6B,QACpBpC,EAASH,EAAgB,IACzBG,EACEP,EAAc,CACZyB,MAAO,GACPL,SAAU,GACVwB,OAAQ,GACRC,UAAW,GACXC,WAAY,GACZC,WAAY,GACZC,QAAS,EACTnB,MAAO,KAGXtB,EA/EK,CACLL,KAAM,mBACNgB,WAAY,CACV0B,OAAQ,GACRxB,SAAU,GACVyB,UAAW,GACXI,WAAY,GACZC,MAAO,GACPtC,OAAQ,CAAC,CAAEgC,OAAQ,KACnBjC,KAAM,CAAC,CAAEwC,OAAQ,W,iCCpCvB,8cAGO,SAASC,EAAgBC,GAC9B,OAAOC,YAAQ,CACbC,IAAK,iBACLC,OAAQ,OACR9C,KAAM,CACJ2C,MAEFI,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,SAK3E,SAASqC,EAAgBC,EAAgBC,GAC9C,OAAOV,YAAQ,CACbC,IAAK,iBACLU,OAAQ,CACNF,SACAC,SAEFP,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,SAK3E,SAASyC,EAAef,GAC7B,OAAOG,YAAQ,CACbC,IAAK,wBACLC,OAAQ,OACR9C,KAAM,CACJyC,OAAQA,GAEVM,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,SAK3E,SAAS0C,EAAWZ,EAAaQ,EAAgBC,GACtD,OAAOV,YAAQ,CACbC,IAAI,aAAD,OAAeA,GAClBU,OAAQ,CACNF,SACAC,SAEFP,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,SAK3E,SAASjB,IACd,OAAO8C,YAAQ,CACbC,IAAK,eACLE,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,SAK3E,SAAS2C,EAAaC,GAC3B,OAAOf,YAAQ,CACbC,IAAK,sBACLC,OAAQ,OACRC,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,MAC5E,eAAgB,uBAElBf,KAAM2D,IAIH,SAASC,EAAsB1B,GACpC,OAAOU,YAAW,CAChBC,IAAK,qBACLC,OAAQ,OACR9C,KAAM,CACJkC,UAEFa,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,SAM3E,SAAS8C,EAAe3B,EAAgBmB,EAAgBC,GAC7D,OAAOV,YAAQ,CACbC,IAAK,gBACLC,OAAQ,OACR9C,KAAM,CACJkC,SACAmB,SACAC,SAEFP,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,SAM3E,SAAS+C,EAAsB5B,EAAgBmB,EAAgBC,GACpE,OAAOV,YAAW,CAChBC,IAAK,qBACLC,OAAQ,OACRS,OAAQ,CACNF,SACAC,SAEFtD,KAAM,CACJkC,YAKC,SAASlB,EAAiBD,GAC/B,OAAO6B,YAAQ,CACbC,IAAK,eACLC,OAAQ,OACRC,QAAS,CAEPC,cAAejC,KAKd,SAASgD,IACd,OAAOnB,YAAQ,CACbC,IAAK,oBACLC,OAAQ,OACRC,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,SAK3E,SAASiD,EAAiBX,EAAgBC,GAC/C,OAAOV,YAAQ,CACbC,IAAK,eACLC,OAAQ,OACR9C,KAAM,CACJqD,SACAC,SAEFP,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,SAK3E,SAASkD,EAAqB/B,GACnC,OAAOU,YAAW,CAChBC,IAAK,eACLU,OAAQ,CACNrB,UAEFa,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,W,iCC7KlF,gFAEO,SAASD,EAAMJ,EAAkBC,GACtC,OAAOiC,YAAQ,CACbC,IAAK,SACLC,OAAQ,OACR9C,KAAM,CACJU,WACAC,cAKC,SAASuD,EAASxD,EAAkBC,GACzC,OAAOiC,YAAQ,CACbC,IAAK,YACLC,OAAQ,OACR9C,KAAM,CACJU,WACAC,gB,iCCnBS,SAASwD,EAAgBC,EAAKC,EAAKC,GAYhD,OAXID,KAAOD,EACTG,OAAOC,eAAeJ,EAAKC,EAAK,CAC9BC,MAAOA,EACPG,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZP,EAAIC,GAAOC,EAGNF,EAZT,mC,kZCGO,SAASQ,EAAeC,EAAajD,EAAiByC,EAAa1B,GACxE,OAAOC,YAAQ,CACbC,IAAI,YAAD,OAAcgC,GACjB/B,OAAQ,OACR9C,KAAK,aACH4B,WACCyC,EAAM1B,GAETI,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,SAqB3E,SAAS+D,IACd,OAAOlC,YAAQ,CACbC,IAAK,WACLE,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,SAK3E,SAASgE,EAAYC,GAC1B,OAAOpC,YAAQ,CACbC,IAAK,gBACLC,OAAQ,OACR9C,KAAM,CACJ2C,GAAIqC,GAENjC,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,SAK3E,SAASkE,EAAY5B,EAAgBC,GAC1C,OAAOV,YAAQ,CACbC,IAAK,wBACLC,OAAQ,OACR9C,KAAM,CACJqD,SACAC,SAEFP,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,SAK3E,SAASmE,EAAc7B,EAAgBC,GAC5C,OAAOV,YAAQ,CACbC,IAAK,0BACLC,OAAQ,OACR9C,KAAM,CACJqD,SACAC,SAEFP,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,SAK3E,SAASoE,EAAe9B,EAAgBC,GAC7C,OAAOV,YAAW,CAChBC,IAAK,wBACLC,OAAQ,OACR9C,KAAM,CACJqD,SACAC,SAEFP,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,SAK3E,SAASqE,EAAe/B,EAAgBC,GAC7C,OAAOV,YAAQ,CACbC,IAAK,2BACLC,OAAQ,OACR9C,KAAM,CACJqD,SACAC,SAEFP,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,SAK3E,SAASsE,EAAchC,EAAgBC,GAC5C,OAAOV,YAAQ,CACbC,IAAK,0BACLC,OAAQ,OACR9C,KAAM,CACJqD,SACAC,SAEFP,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,SAK3E,SAASuE,EAAU3C,GACxB,OAAOC,YAAQ,CACbC,IAAK,kBACLC,OAAQ,OACR9C,KAAM,CACJ2C,MAEFI,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,SAK3E,SAASwE,EAAc5C,GAC5B,OAAOC,YAAQ,CACbC,IAAK,uBACLC,OAAQ,OACR9C,KAAM,CACJ2C,MAEFI,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,W,iCC5JlF,0YAGO,SAASyE,EAAgBhG,GAC9B,OAAOoD,YAAW,CAChBC,IAAK,kBACLU,OAAQ,CACN/D,UAKC,SAASiG,EAAgBC,EAAgBlG,EAAc6D,EAAgBC,GAC5E,OAAOV,YAAW,CAChBC,IAAK,qBACLU,OAAQ,CACNmC,SACAlG,OACA6D,SACAC,WAKC,SAASqC,EAAYhD,GAC1B,OAAOC,YAAQ,CACbC,IAAK,aACLU,OAAQ,CACNqC,IAAKjD,KAKJ,SAASkD,EAAkBlD,GAChC,OAAOC,YAAW,CAChBC,IAAK,gBACLU,OAAQ,CACNZ,QAKC,SAASmD,EAAanD,GAC3B,OAAOC,YAAQ,CACbC,IAAK,iBACLU,OAAQ,CACNZ,QAKC,SAASoD,EAAgBpD,GAC9B,OAAOC,YAAQ,CACbC,IAAK,mBACLC,OAAQ,OACR9C,KAAM,CACJ2C,MAEFI,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,SAK3E,SAASiF,EAASC,EAAcC,EAAc1G,EAAckG,EAAgBjD,GACjF,OAAOG,YAAQ,CACbC,IAAK,SACLC,OAAQ,OACR9C,KAAM,CACJiG,OACAC,OACA1G,OACAkG,SACAjD,UAEFM,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,SAK3E,SAASoF,EAAYxC,EAAoBiC,GAC9C,OAAOhD,YAAQ,CACbC,IAAK,gBACLC,OAAQ,OACR9C,KAAM2D,EACNJ,OAAQ,CACNqC,OAEF7C,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,MAC5E,eAAgB,yBAKf,SAASqF,EAAYzC,EAAoBiC,GAC9C,OAAOhD,YAAQ,CACbC,IAAK,sBACLC,OAAQ,OACR9C,KAAM2D,EACNJ,OAAQ,CACNZ,GAAIiD,GAEN7C,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,MAC5E,eAAgB,yBAKf,SAASsF,EAAY1D,GAC1B,OAAOC,YAAQ,CACbC,IAAK,gBACLC,OAAQ,OACR9C,KAAM,CACJ2C,MAEFI,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,SAK3E,SAASuF,IACd,OAAO1D,YAAW,CAChBC,IAAK,mBACLE,QAAS,CAEPC,cAAeC,IAAMC,WAAWC,MAAM,CAAC,eAAgB,QAAS,YAAYpC,W,iCCtI3E,SAASwF,EAAe1D,GAC7B,OAAO,IAAI2D,SAAQ,SAACC,EAASC,GAC3B,IAAMC,EAA4BC,SAASC,cAAc,UACnDC,EAAgCH,EAAOI,WAAW,MAClDC,EAA0BJ,SAASC,cAAc,SACvDG,EAAMC,aAAa,WAAY,YAC/BD,EAAME,IAAMrE,EACZmE,EAAMG,YAAc,EACpBH,EAAMI,UAAY,WAEhBT,EAAOU,OAASL,EAAMM,YACtBX,EAAOY,MAAQP,EAAMQ,WACrBV,EAAIW,UAAUT,EAAO,EAAG,EAAGA,EAAMQ,WAAYR,EAAMM,aACnD,IAAII,EAAkBf,EAAOgB,UAAU,aACvClB,EAAQiB,OAKP,SAASE,EAAiBC,GAC/B,IAAIhF,EAAciF,IAAIC,gBAAgBF,GAClCG,EAA2BpB,SAASC,cAAc,SAEtD,OADAmB,EAAOf,aAAa,MAAOpE,GACpB,IAAI2D,SAAQ,SAACC,EAASC,GAC3BsB,EAAOZ,UAAY,WACjBX,EAA0B,IAAlBuB,EAAOC,cAId,SAASC,EAAiBL,GAC/B,IAAIhF,EAAciF,IAAIC,gBAAgBF,GAClCM,EAA0BvB,SAASC,cAAc,SAErD,OADAsB,EAAMlB,aAAa,MAAOpE,GACnB,IAAI2D,SAAQ,SAACC,EAASC,GAC3ByB,EAAMf,UAAY,WAChBX,EAAyB,IAAjB0B,EAAMF,cAnCpB,uG,qECCaG,E,MAAeC,EAAOC,IAAV,0gF,kDCOnBC,EAAY,WAAqB,IAAD,EACJC,mBAAsB,IADlB,mBAC7BC,EAD6B,KACnBC,EADmB,OAGRF,mBAAiB,IAHT,mBAG7B9C,EAH6B,KAGrBiD,EAHqB,OAIZH,mBAAiB,IAJL,mBAI7BvC,EAJ6B,KAIvB2C,EAJuB,OAKZJ,mBAAiB,IALL,mBAK7BtC,EAL6B,KAKvB2C,EALuB,OAMVL,qBANU,mBAM7BM,EAN6B,KAMtBC,EANsB,OAOVP,qBAPU,mBAO7BxB,EAP6B,KAOtBgC,EAPsB,OAQhBR,mBAAiB,IARD,mBAQ7BS,EAR6B,KAQzBC,EARyB,OAUIV,mBAAiB,GAVrB,mBAU7BW,EAV6B,KAUfC,EAVe,OAYRZ,oBAAkB,GAZV,mBAY7Ba,EAZ6B,KAYrBC,EAZqB,OAcJd,mBAAiB,IAdb,mBAc7Be,EAd6B,KAcjBC,EAdiB,OAeJhB,mBAAiB,IAfb,mBAe7BiB,EAf6B,KAejBC,EAfiB,OAiBFlB,oBAAkB,GAjBhB,oBAiB7BmB,GAjB6B,MAiBlBC,GAjBkB,SAkBFpB,oBAAkB,GAlBhB,qBAkB7BqB,GAlB6B,MAkBlBC,GAlBkB,MAoB9BjK,GAAWkK,cAEjBC,qBAAU,WACRxE,YAAa,GAAGzF,MAAK,SAACC,GACpB0I,EAAY1I,GACZ2I,EAAU3I,EAAK,GAAG2C,SAEnB,IAkFH,OACE,eAACyF,EAAD,WACE,sBAAK6B,UAAU,eAAf,UACE,mBAAGA,UAAU,uBAAb,eACA,qBAAKA,UAAU,MAAf,uFACA,sBAAMA,UAAU,aAAaC,QAAS,SAACC,GAxD3Cb,GAAU,IAwDN,yCAIDD,GACC,sBAAKY,UAAU,SAAf,UACE,sBAAKA,UAAU,OAAf,UACE,iDACA,0BAAUG,KAAM,EAAGC,KAAM,GAAIC,SAAU,SAACH,GAAD,OA7D9B,SAACA,GAClBvB,EAAQuB,EAAEI,cAAcjG,OA4D8BkG,CAAWL,IAAI7F,MAAO2B,EAApE,SACG,SAGL,sBAAKgE,UAAU,OAAf,UACE,iDACA,0BAAUG,KAAM,EAAGC,KAAM,GAAI/F,MAAO4B,EAAMoE,SAAU,SAACH,GAAD,OAhE3C,SAACA,GAClBtB,EAAQsB,EAAEI,cAAcjG,OA+D2CmG,CAAWN,IAAtE,SACG,SAGL,sBAAKF,UAAU,UAAf,UACE,sBAAKA,UAAU,cAAf,WACIN,IAAa,uBAAOnK,KAAK,OAAOkL,MAAM,2BAAOJ,SAAU,SAACH,GAAD,OArGrD,SAACA,GACf,GAAIA,EAAEI,cAAcI,MAAO,CACzB,IAAM9C,EAAOsC,EAAEI,cAAcI,MAAM,GACnC5B,EAASlB,GACT,IAAMhF,EAAMiF,IAAIC,gBAAgBF,GAChC2B,EAAU3G,GACV+G,IAAa,IA+F2DgB,CAAQT,OACtER,IAAa,mBAAGM,UAAU,uBAAb,eACdN,IAAa,qBAAKzC,IAAKqC,EAAYsB,IAAI,gCAE1C,sBAAKZ,UAAU,gBAAf,WACIJ,IAAa,uBAAOrK,KAAK,OAAOkL,MAAM,2BAAOJ,SAAU,SAACH,GAAD,OAhGrD,SAACA,GACf,GAAIA,EAAEI,cAAcI,MAAO,CACzB,IAAM9C,EAAOsC,EAAEI,cAAcI,MAAM,GACnC3B,EAASnB,GACT,IAAMhF,EAAMiF,IAAIC,gBAAgBF,GAChCtB,YAAe1D,GAAK9C,MAAK,SAACC,GACxB0J,EAAU1J,GACV8J,IAAa,GACblC,YAAiBC,GAAM9H,MAAK,SAACC,GAC3BkJ,EAAMlJ,UAuF8D8K,CAAQX,OACtEN,IAAa,mBAAGI,UAAU,sBAAb,eACdJ,IAAa,qBAAK3C,IAAKuC,EAAYoB,IAAI,mCAG5C,qBAAKZ,UAAU,aAAf,2BACA,oBAAIA,UAAU,YAAd,SACuB,IAApBxB,EAASsC,QACRtC,EAASuC,KAAI,SAACC,EAAMC,GAClB,OACE,oBAEEjB,UAAWd,IAAiB+B,EAAQ,SAAW,GAC/ChB,QAAS,SAACC,GAAD,OA5HX,SAACc,EAAiBC,GAChC9B,EAAgB8B,GAChBvC,EAAUsC,EAAKtI,IA0HiBwI,CAAQF,EAAMC,IAHhC,SAKGD,EAAKhF,MAJDgF,EAAKtI,SASpB,sBAAKsH,UAAU,cAAf,UACE,wBAAQA,UAAU,SAASC,QAAS,SAACC,GA5FlB,IAAvBlE,EAAKmF,OAAOL,OACdlL,GAASqB,YAAW,uCAAU,OACE,IAAvBgF,EAAKkF,OAAOL,OACrBlL,GAASqB,YAAW,uCAAU,OACpB8F,EAEA8B,EAGV9C,YAASC,EAAMC,EAAM,EAAGR,OAAQ2F,GAAWtL,MAAK,SAACC,GAAe,IACtD2C,EAAO3C,EAAP2C,GACR,GAAIA,EAAI,CACN,IAAIgB,EAAqB,IAAI2H,SAC7B3H,EAAS4H,OAAO,QAASvE,GACzBrD,EAAS4H,OAAO,KAAMtC,GACtB9C,YAAYxC,EAAUhB,GAAI5C,MAAK,SAACC,OAChC,IAAIwL,EAA0B,IAAIF,SAClCE,EAAcD,OAAO,QAASzC,GAC9B1C,YAAYoF,EAAe7I,GAAI5C,MAAK,SAACC,GACnCsJ,GAAU,GACVJ,EAAM,IACNH,OAASsC,GACTzC,EAAQ,IACRC,EAAQ,IACRW,EAAU,IACVE,EAAU,OAEZ9E,YAAe,SAAU,qBAAO,MAAOjC,OApB3C9C,GAASqB,YAAW,iCAAS,OAF7BrB,GAASqB,YAAW,iCAAS,QAuFvB,0BAGA,wBAAQ+I,UAAU,SAASC,QAAS,SAACC,GAAD,OA9D5Cb,GAAU,GACVQ,IAAa,GACbF,IAAa,GACbF,EAAU,IACVF,EAAU,IACVZ,EAAQ,SACRC,EAAQ,KAwDA,oCASG4C,yBAAKlD,I,gCCpLpB,sDA0De3F,IA/Cf,SAAoB8I,GAClB,IAAMC,EAA0BC,IAAMC,OAAO,CAC3CC,QAASC,IACTC,QAAS,OA0CX,OAxCAL,EAASM,aAAarJ,QAAQsJ,KAC5B,SAACR,GACC,OAAOA,KAET,SAACS,GAEC,OADA3K,QAAQC,IAAI0K,GACLA,KAGXR,EAASM,aAAaG,SAASF,KAC7B,SAAC3M,GACC,OAAOA,EAAIS,QAEb,SAACmM,GACC,GAAIA,EAAIC,SAAU,CAAC,IAAD,EACSD,EAAIC,SAArBC,EADQ,EACRA,OAAQrM,EADA,EACAA,KAChB,GAAa,EAATqM,IAAe,KAAwB,uBAAjBrM,EAAK0B,QAmB7B,MAAMyK,EAjBNlJ,IAAMpD,SAASmC,eACfiB,IAAMpD,SACJP,YAAc,CACZyB,MAAO,GACPL,SAAU,GACVwB,OAAQ,GACRC,UAAW,GACXC,WAAY,GACZC,WAAY,GACZC,QAAS,EACTnB,MAAO,KAGXmL,cAAuBhL,KAAK,CAC1BC,SAAU,eAQboK,EAAS/I,QAAgB8I","file":"static/js/44.02b5e308.chunk.js","sourcesContent":["import { message } from 'antd';\nimport { login } from '../../../network/login';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { getUserDetail, updateUserExpire } from '../../../network/user';\nimport { changeShow } from '../../../components/common/toast/store/actionCreators';\nimport { ILoginUserAction } from './type';\nimport { IUserDetail, IUserMsg } from '../../../constant/store/login';\n\nexport function changeUserMsg(res: IUserMsg): ILoginUserAction {\n  return {\n    type: 'changeUserMsg',\n    userMsg: res\n  };\n}\nfunction changeLoginType(res: number): ILoginUserAction {\n  return {\n    type: 'changeLoginType',\n    loginType: res\n  };\n}\nfunction changeUserDetail(res: IUserDetail): ILoginUserAction {\n  return {\n    type: 'changeUserDetail',\n    userDetail: res\n  };\n}\nfunction deleteUserDetail(): ILoginUserAction {\n  return {\n    type: 'changeUserDetail',\n    userDetail: {\n      userId: '',\n      userName: '',\n      avatarUrl: '',\n      subscriber: [],\n      thumb: [],\n      follow: [{ userId: '' }],\n      love: [{ songId: '' }]\n    }\n  };\n}\nexport function changeUserDetailAction() {\n  return (dispatch: any) => {\n    getUserDetail().then((data: any) => {\n      const { love, follow } = data;\n      if (!love) {\n        data.love = [];\n      }\n      if (!follow) {\n        data.follow = [];\n      }\n      window.localStorage.setItem('userDetail', JSON.stringify(data));\n      dispatch(changeUserDetail(data));\n    });\n  };\n}\n\nexport function loginAction(userName: string, password: string, props: RouteComponentProps) {\n  return async (dispatch: any) => {\n    try {\n      const data: any = await login(userName, password);\n      if (data) {\n        const { token } = data;\n        const res: any = await updateUserExpire(token);\n        if (res.code * 1 === 200) {\n          dispatch(changeShow('您的VIP已经过期，开通VIP后畅想', 3500));\n          data.auth = 0;\n          delete data.vip;\n        }\n        await dispatch(changeUserMsg(data));\n        await dispatch(changeLoginType(1));\n        window.localStorage.setItem('userMsg', JSON.stringify(data));\n        window.localStorage.setItem('loginType', '1');\n        await dispatch(changeUserDetailAction());\n        props.history.push({\n          pathname: '/Home'\n        });\n      }\n    } catch (e) {\n      console.log(e);\n      message.warning({\n        content: '用户名或者密码错误',\n        style: {\n          fontSize: '20px',\n          marginTop: '5vh'\n        }\n      });\n    }\n  };\n}\n//退出登录\nexport function logoutAction() {\n  return (dispatch: any) => {\n    window.localStorage.clear();\n    dispatch(changeLoginType(0));\n    dispatch(\n      changeUserMsg({\n        token: '',\n        userName: '',\n        userId: '',\n        avatarUrl: '',\n        createTime: '',\n        updateTime: '',\n        manage: -1,\n        auth: -1\n      })\n    );\n    dispatch(deleteUserDetail());\n  };\n}\n","import request from '../request';\nimport store from '../../store/index';\n//用户喜欢歌曲\nexport function setUserFavorite(id: string) {\n  return request({\n    url: '/user/favorite',\n    method: 'post',\n    data: {\n      id\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n//获取用户喜欢歌曲\nexport function getUserFavorite(offset: number, limit: number) {\n  return request({\n    url: '/user/favorite',\n    params: {\n      offset,\n      limit\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n//取消用户喜欢\nexport function cancelFavorite(songId: string) {\n  return request({\n    url: '/user/favorite/cancel',\n    method: 'post',\n    data: {\n      songId: songId\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n//获取用户收藏\nexport function getUserSub(url: string, offset: number, limit: number) {\n  return request({\n    url: `/sub/user/${url}`,\n    params: {\n      offset,\n      limit\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n//获取当前登录用户详情\nexport function getUserDetail() {\n  return request({\n    url: '/user/detail',\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n//上传用户头像\nexport function uploadAvatar(formData: FormData) {\n  return request({\n    url: '/user/upload/avatar',\n    method: 'post',\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token,\n      'Content-Type': 'multipart/form-data'\n    },\n    data: formData\n  });\n}\n//获取其它用户详情\nexport function getOtherUserDetail<T>(userId: string) {\n  return request<T>({\n    url: '/user/other/detail',\n    method: 'post',\n    data: {\n      userId\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n\n//获取用户创建的电台\nexport function getUserChannel(userId: string, offset: number, limit: number) {\n  return request({\n    url: '/user/channel',\n    method: 'post',\n    data: {\n      userId,\n      offset,\n      limit\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n\n//获取用户收藏的歌单\nexport function getUserSubPlaylist<T>(userId: string, offset: number, limit: number) {\n  return request<T>({\n    url: '/sub/user/playlist',\n    method: 'post',\n    params: {\n      offset,\n      limit\n    },\n    data: {\n      userId\n    }\n  });\n}\n//用户VIP是否·过期\nexport function updateUserExpire(token: string) {\n  return request({\n    url: '/user/expire',\n    method: 'post',\n    headers: {\n      // @ts-ignore\n      authorization: token\n    }\n  });\n}\n//获取用户动态数据\nexport function getUserMomentData() {\n  return request({\n    url: '/user/data/moment',\n    method: 'post',\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n//获取用户全部动态\nexport function getUserAllMoment(offset: string, limit: string) {\n  return request({\n    url: '/user/moment',\n    method: 'post',\n    data: {\n      offset,\n      limit\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n//获取用户简略信息\nexport function getSimpleUserInfo<T>(userId: string) {\n  return request<T>({\n    url: '/user/simple',\n    params: {\n      userId\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n","import request from '../request';\n//登录\nexport function login(userName: string, password: string) {\n  return request({\n    url: '/login',\n    method: 'post',\n    data: {\n      userName,\n      password\n    }\n  });\n}\n//注册\nexport function register(userName: string, password: string) {\n  return request({\n    url: '/register',\n    method: 'post',\n    data: {\n      userName,\n      password\n    }\n  });\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import request from '../request';\nimport store from '../../store';\n//创建消息\nexport function publishMessage(uri: string, content: string, key: string, id: string) {\n  return request({\n    url: `/message/${uri}`,\n    method: 'post',\n    data: {\n      content,\n      [key]: id\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n//歌手发布专辑\nexport function publishAlbum(arId: string, content: string, alId: string) {\n  return request({\n    url: '/message/album',\n    method: 'post',\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    },\n    data: {\n      arId,\n      content,\n      alId\n    }\n  });\n}\n//获取所有通知\nexport function getAllMsg() {\n  return request({\n    url: '/message',\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n//一键已读\nexport function readMessage(ids: string[]) {\n  return request({\n    url: '/message/read',\n    method: 'post',\n    data: {\n      id: ids\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n//获取所有视频通知\nexport function getVideoMsg(offset: string, limit: string) {\n  return request({\n    url: '/message/detail/video',\n    method: 'post',\n    data: {\n      offset,\n      limit\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n//获取所有评论通知\nexport function getCommentMsg(offset: string, limit: string) {\n  return request({\n    url: '/message/detail/comment',\n    method: 'post',\n    data: {\n      offset,\n      limit\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n//获取所有发布专辑通知\nexport function getAlbumMsg<T>(offset: string, limit: string) {\n  return request<T>({\n    url: '/message/detail/album',\n    method: 'post',\n    data: {\n      offset,\n      limit\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n//获取所有创建通知\nexport function getPlaylistMsg(offset: string, limit: string) {\n  return request({\n    url: '/message/detail/playlist',\n    method: 'post',\n    data: {\n      offset,\n      limit\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n//获取所有声音\nexport function getChannelMsg(offset: string, limit: string) {\n  return request({\n    url: '/message/detail/channel',\n    method: 'post',\n    data: {\n      offset,\n      limit\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n//删除消息通知\nexport function deleteMsg(id: string) {\n  return request({\n    url: '/message/delete',\n    method: 'post',\n    data: {\n      id\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n//已读消息\nexport function readSingleMsg(id: string) {\n  return request({\n    url: '/message/read/single',\n    method: 'post',\n    data: {\n      id\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n","import request from '../request';\nimport store from '../../store';\n//获取视频分类\nexport function getVideoCate<T>(type: number) {\n  return request<T>({\n    url: '/video/cate/all',\n    params: {\n      type\n    }\n  });\n}\n//获取分类下视频\nexport function getCateVideo<T>(cateId: string, type: number, offset: string, limit: string) {\n  return request<T>({\n    url: '/video/cate/detail',\n    params: {\n      cateId,\n      type,\n      offset,\n      limit\n    }\n  });\n}\n//获取视频播放地址\nexport function getVideoURL(id: string) {\n  return request({\n    url: '/video/url',\n    params: {\n      vid: id\n    }\n  });\n}\n//获取视频详情\nexport function getVideoDetail<T>(id: string) {\n  return request<T>({\n    url: '/video/detail',\n    params: {\n      id\n    }\n  });\n}\n//获取相似视频\nexport function getSimiVideo(id: string) {\n  return request({\n    url: '/video/similar',\n    params: {\n      id\n    }\n  });\n}\n//添加视频播放量\nexport function updatePlayCount(id: string) {\n  return request({\n    url: '/video/playCount',\n    method: 'post',\n    data: {\n      id\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n//添加视频\nexport function addVideo(name: string, desc: string, type: number, cateId: string, songId: string | undefined) {\n  return request({\n    url: '/video',\n    method: 'post',\n    data: {\n      name,\n      desc,\n      type,\n      cateId,\n      songId\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n//上传视频\nexport function uploadVideo(formData: FormData, vid: string) {\n  return request({\n    url: '/video/upload',\n    method: 'post',\n    data: formData,\n    params: {\n      vid\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token,\n      'Content-type': 'multipart/form-data'\n    }\n  });\n}\n//上传视频封面\nexport function uploadCover(formData: FormData, vid: string) {\n  return request({\n    url: '/video/cover/upload',\n    method: 'post',\n    data: formData,\n    params: {\n      id: vid\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token,\n      'Content-type': 'multipart/form-data'\n    }\n  });\n}\n//删除视频\nexport function deleteVideo(id: string) {\n  return request({\n    url: '/video/delete',\n    method: 'post',\n    data: {\n      id\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n//推荐视频\nexport function recommendVideo<T>() {\n  return request<T>({\n    url: '/video/recommend',\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n","export function getVideoBase64(url: string) {\n  return new Promise((resolve, reject) => {\n    const canvas: HTMLCanvasElement = document.createElement('canvas');\n    const ctx: CanvasRenderingContext2D = canvas.getContext('2d')!;\n    const video: HTMLVideoElement = document.createElement('video');\n    video.setAttribute('controls', 'controls');\n    video.src = url;\n    video.currentTime = 1;\n    video.oncanplay = function () {\n      //console.log(video.videoHeight,video.videoWidth)\n      canvas.height = video.videoHeight;\n      canvas.width = video.videoWidth;\n      ctx.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);\n      let dataUrl: string = canvas.toDataURL('image/png');\n      resolve(dataUrl);\n    };\n  });\n}\n\nexport function getVideoDuration(file: File) {\n  let url: string = URL.createObjectURL(file);\n  let oVideo: HTMLVideoElement = document.createElement('video');\n  oVideo.setAttribute('src', url);\n  return new Promise((resolve, reject) => {\n    oVideo.oncanplay = () => {\n      resolve(oVideo.duration * 1000);\n    };\n  });\n}\nexport function getAudioDuration(file: File) {\n  let url: string = URL.createObjectURL(file);\n  let audio: HTMLAudioElement = document.createElement('audio');\n  audio.setAttribute('src', url);\n  return new Promise((resolve, reject) => {\n    audio.oncanplay = () => {\n      resolve(audio.duration * 1000);\n    };\n  });\n}\n","import styled from 'styled-components';\nexport const VideoWrapper = styled.div`\n  position: relative;\n  textarea {\n    resize: none;\n  }\n  .upload-outer {\n    width: 500px;\n    height: 300px;\n    border: 1px dotted #cccccc;\n    margin: 30px auto;\n    border-radius: 8px;\n    text-align: center;\n    padding-top: 20px;\n    i.iconfont {\n      font-size: 50px;\n      color: #ff3a3a;\n    }\n    .upload-btn {\n      border-bottom: 1px solid #ff3a3a;\n      display: inline-block;\n      margin: 30px 0 0 0;\n      color: #5091cb;\n      cursor: pointer;\n      position: relative;\n      overflow: hidden;\n    }\n  }\n  .upload {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);\n    background-color: #fff;\n    padding: 30px 50px;\n    border-radius: 8px;\n    .name,\n    .desc {\n      margin: 0 0 20px 0;\n      display: flex;\n      span {\n        margin: 0 5px 0 0;\n      }\n    }\n    textarea {\n      border: 1px solid #cbc9c0;\n    }\n    .preview {\n      display: flex;\n      height: 100px;\n      .img-preview,\n      .video-preview {\n        flex: 1;\n        background-color: #f2f2f2;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        position: relative;\n        overflow: hidden;\n        i.iconfont {\n          font-size: 32px;\n          color: #ff3a3a;\n        }\n        input {\n          position: absolute;\n          height: 100%;\n          opacity: 0;\n          cursor: pointer;\n        }\n        img {\n          height: 100%;\n        }\n      }\n      .img-preview {\n        border-right: 1px dotted #cbc9c0;\n      }\n    }\n    .cate-list {\n      display: flex;\n      width: 400px;\n      flex-wrap: wrap;\n      margin: 10px 0 0 0;\n      & > li {\n        background-color: #f7b3b3;\n        color: #fff;\n        margin: 0 15px 15px 0;\n        font-size: 13px;\n        padding: 4px 10px;\n        border-radius: 4px;\n        cursor: pointer;\n        &:hover {\n          background-color: #f27a7a;\n        }\n        &.active {\n          background-color: #f27a7a;\n        }\n      }\n    }\n    .control-btn {\n      display: flex;\n      justify-content: flex-end;\n      button {\n        font-size: 13px;\n        padding: 4px 15px;\n        margin: 0 0 0 25px;\n        cursor: pointer;\n        &:nth-child(1) {\n          background-color: #f27a7a;\n          color: #fff;\n        }\n        &:nth-child(2) {\n          background-color: #efefef;\n          color: #656565;\n        }\n      }\n    }\n  }\n`;\n","import React, { memo, FC, ReactElement, useEffect, useState, ChangeEvent } from 'react';\nimport { VideoWrapper } from './style';\nimport { addVideo, getVideoCate, uploadCover, uploadVideo } from '../../../../../../../network/video';\nimport { ICategory } from '../../../../../../../constant/category';\nimport { getVideoBase64, getVideoDuration } from '../../../../../../../utils/videoUtils';\nimport { useDispatch } from 'react-redux';\nimport { changeShow } from '../../../../../../../components/common/toast/store/actionCreators';\nimport { publishMessage } from '../../../../../../../network/message';\nconst Video: FC = (): ReactElement => {\n  const [cateList, setCateList] = useState<ICategory[]>([]);\n\n  const [cateId, setCateId] = useState<string>('');\n  const [name, setName] = useState<string>('');\n  const [desc, setDesc] = useState<string>('');\n  const [cover, setCover] = useState<File>();\n  const [video, setVideo] = useState<File>();\n  const [dt, setDt] = useState<string>('');\n\n  const [currentIndex, setCurrentIndex] = useState<number>(0);\n\n  const [isShow, setIsShow] = useState<boolean>(false);\n\n  const [prevImgURL, setImgURL] = useState<string>('');\n  const [prevVioURL, setVioURL] = useState<string>('');\n\n  const [isShowImg, setIsShowImg] = useState<boolean>(false);\n  const [isShowVio, setIsShowVio] = useState<boolean>(false);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    getVideoCate(0).then((data: any) => {\n      setCateList(data);\n      setCateId(data[0].id);\n    });\n  }, []);\n  const liClick = (item: ICategory, index: number) => {\n    setCurrentIndex(index);\n    setCateId(item.id);\n  };\n  //封面预览\n  const imgPrev = (e: ChangeEvent<HTMLInputElement>) => {\n    if (e.currentTarget.files) {\n      const file = e.currentTarget.files[0];\n      setCover(file);\n      const url = URL.createObjectURL(file);\n      setImgURL(url);\n      setIsShowImg(true);\n    }\n  };\n  //视频预览\n  const vioPrev = (e: ChangeEvent<HTMLInputElement>) => {\n    if (e.currentTarget.files) {\n      const file = e.currentTarget.files[0];\n      setVideo(file);\n      const url = URL.createObjectURL(file);\n      getVideoBase64(url).then((data: any) => {\n        setVioURL(data);\n        setIsShowVio(true);\n        getVideoDuration(file).then((data: any) => {\n          setDt(data);\n        });\n      });\n    }\n  };\n  const upload = () => {\n    setIsShow(true);\n  };\n\n  const nameChange = (e: ChangeEvent<HTMLTextAreaElement>) => {\n    setName(e.currentTarget.value);\n  };\n  const descChange = (e: ChangeEvent<HTMLTextAreaElement>) => {\n    setDesc(e.currentTarget.value);\n  };\n  const define = () => {\n    if (name.trim().length === 0) {\n      dispatch(changeShow('名称不能为空', 1500));\n    } else if (desc.trim().length === 0) {\n      dispatch(changeShow('简介不能为空', 1500));\n    } else if (!video) {\n      dispatch(changeShow('请选择视频', 1500));\n    } else if (!cover) {\n      dispatch(changeShow('请选择封面', 1500));\n    } else {\n      addVideo(name, desc, 0, cateId, undefined).then((data: any) => {\n        const { id } = data;\n        if (id) {\n          let formData: FormData = new FormData();\n          formData.append('video', video);\n          formData.append('dt', dt);\n          uploadVideo(formData, id).then((data: any) => {});\n          let coverFormData: FormData = new FormData();\n          coverFormData.append('cover', cover);\n          uploadCover(coverFormData, id).then((data: any) => {\n            setIsShow(false);\n            setDt('');\n            setCover(undefined);\n            setName('');\n            setDesc('');\n            setImgURL('');\n            setVioURL('');\n          });\n          publishMessage('/video', '发布了', 'vId', id);\n        }\n      });\n    }\n  };\n  const cancel = () => {\n    setIsShow(false);\n    setIsShowVio(false);\n    setIsShowImg(false);\n    setVioURL('');\n    setImgURL('');\n    setName('');\n    setDesc('');\n  };\n  return (\n    <VideoWrapper>\n      <div className=\"upload-outer\">\n        <i className=\"iconfont icon-upload\"> </i>\n        <div className=\"tip\">丰富的音乐灵感/创作碎片等</div>\n        <span className=\"upload-btn\" onClick={(e) => upload()}>\n          点击上传\n        </span>\n      </div>\n      {isShow && (\n        <div className=\"upload\">\n          <div className=\"name\">\n            <span>名称:</span>\n            <textarea rows={2} cols={50} onChange={(e) => nameChange(e)} value={name}>\n              {' '}\n            </textarea>\n          </div>\n          <div className=\"desc\">\n            <span>简介:</span>\n            <textarea rows={7} cols={50} value={desc} onChange={(e) => descChange(e)}>\n              {' '}\n            </textarea>\n          </div>\n          <div className=\"preview\">\n            <div className=\"img-preview\">\n              {!isShowImg && <input type=\"file\" title=\"选择封面\" onChange={(e) => imgPrev(e)} />}\n              {!isShowImg && <i className=\"iconfont icon-tupian\"> </i>}\n              {isShowImg && <img src={prevImgURL} alt=\"封面预览\" />}\n            </div>\n            <div className=\"video-preview\">\n              {!isShowVio && <input type=\"file\" title=\"选择视频\" onChange={(e) => vioPrev(e)} />}\n              {!isShowVio && <i className=\"iconfont icon-video\"> </i>}\n              {isShowVio && <img src={prevVioURL} alt=\"视频预览\" />}\n            </div>\n          </div>\n          <div className=\"cate-title\">分类:</div>\n          <ul className=\"cate-list\">\n            {cateList.length !== 0 &&\n              cateList.map((item, index) => {\n                return (\n                  <li\n                    key={item.id}\n                    className={currentIndex === index ? 'active' : ''}\n                    onClick={(e) => liClick(item, index)}\n                  >\n                    {item.name}\n                  </li>\n                );\n              })}\n          </ul>\n          <div className=\"control-btn\">\n            <button className=\"define\" onClick={(e) => define()}>\n              确定\n            </button>\n            <button className=\"cancel\" onClick={(e) => cancel()}>\n              取消\n            </button>\n          </div>\n        </div>\n      )}\n    </VideoWrapper>\n  );\n};\nexport default memo(Video);\n","/*\n@Name guobin\n@Description gb-music\n@author guobin\n@date 2021/9/21\n*/\nimport axios, { AxiosInstance, AxiosRequestConfig } from 'axios';\nimport { HOST_NAME } from '../config';\nimport store from '../store';\nimport { changeUserMsg, logoutAction } from '../views/Login/store/actionCreators';\nimport { createBrowserHistory } from 'history';\nfunction request<T>(config: AxiosRequestConfig) {\n  const instance: AxiosInstance = axios.create({\n    baseURL: HOST_NAME,\n    timeout: 15000\n  });\n  instance.interceptors.request.use(\n    (config) => {\n      return config;\n    },\n    (err) => {\n      console.log(err);\n      return err;\n    }\n  );\n  instance.interceptors.response.use(\n    (res) => {\n      return res.data;\n    },\n    (err) => {\n      if (err.response) {\n        const { status, data } = err.response;\n        if (status * 1 === 403 && data.message === '请登录') {\n          // @ts-ignore\n          store.dispatch(logoutAction());\n          store.dispatch(\n            changeUserMsg({\n              token: '',\n              userName: '',\n              userId: '',\n              avatarUrl: '',\n              createTime: '',\n              updateTime: '',\n              manage: -1,\n              auth: -1\n            })\n          );\n          createBrowserHistory().push({\n            pathname: '/Login'\n          });\n        } else {\n          throw err;\n        }\n      }\n    }\n  );\n  return instance.request<any, T>(config);\n}\nexport default request;\n"],"sourceRoot":""}