(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08416013"],{"007e":function(t,e,n){"use strict";n("3767")},1138:function(t,e,n){"use strict";n("2a84")},"118e":function(t,e,n){"use strict";n("ef1e")},1667:function(t,e,n){},"1a1d":function(t,e,n){"use strict";n.d(e,"g",(function(){return s})),n.d(e,"a",(function(){return o})),n.d(e,"m",(function(){return r})),n.d(e,"l",(function(){return c})),n.d(e,"e",(function(){return u})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return d})),n.d(e,"k",(function(){return h})),n.d(e,"h",(function(){return f})),n.d(e,"f",(function(){return m})),n.d(e,"i",(function(){return p})),n.d(e,"j",(function(){return v})),n.d(e,"d",(function(){return g}));var i=n("1bab"),a=n("4360");function s(t){return Object(i["a"])({url:"/video/cate/all",params:{type:t}})}function o(t,e,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0;return Object(i["a"])({url:"/video",method:"post",data:{name:t,desc:e,type:n,cateId:s,songId:o},headers:{authorization:a["a"].state.userMsg.token}})}function r(t,e){return Object(i["a"])({url:"/video/upload",method:"post",data:t,params:{vid:e},headers:{authorization:a["a"].state.userMsg.token,"Content-type":"multipart/form-data"}})}function c(t,e){return Object(i["a"])({url:"/video/cover/upload",method:"post",data:t,params:{id:e},headers:{authorization:a["a"].state.userMsg.token,"Content-type":"multipart/form-data"}})}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;return Object(i["a"])({url:"/video/cate/detail",params:{cateId:t,type:e,offset:a,limit:s,keyword:n}})}function l(t){return Object(i["a"])({url:"/video/delete",method:"post",data:{id:t},headers:{authorization:a["a"].state.userMsg.token}})}function d(t,e){return Object(i["a"])({url:"/video/cate",method:"post",data:{type:t,name:e},headers:{authorization:a["a"].state.userMsg.token}})}function h(t,e,n,s){return Object(i["a"])({url:"/video/update",method:"post",data:{id:t,name:e,desc:n,cate:s},headers:{authorization:a["a"].state.userMsg.token}})}function f(){return Object(i["a"])({url:"/video/data",headers:{authorization:a["a"].state.userMsg.token}})}function m(){return Object(i["a"])({url:"/video/mv/data",headers:{authorization:a["a"].state.userMsg.token}})}function p(t){return Object(i["a"])({url:"/video/detail",method:"get",params:{id:t},headers:{authorization:a["a"].state.userMsg.token}})}function v(t){return Object(i["a"])({url:"/video/url",params:{vid:t}})}function g(t){return Object(i["a"])({url:"/video/cate/delete",method:"post",data:{id:t},headers:{authorization:a["a"].state.userMsg.token}})}},"20ca":function(t,e,n){"use strict";function i(t,e,n){var i=null,a=function(){var a=this,s=arguments;if(i&&clearTimeout(i),n){var o=!i;i=setTimeout((function(){i=null}),e),o&&t.apply(a,s)}else i=setTimeout((function(){t.apply(a,s)}),e)};return a.remove=function(){clearTimeout(i),i=null},a}n.d(e,"a",(function(){return i}))},2532:function(t,e,n){"use strict";var i=n("23e7"),a=n("5a34"),s=n("1d80"),o=n("ab13");i({target:"String",proto:!0,forced:!o("includes")},{includes:function(t){return!!~String(s(this)).indexOf(a(t),arguments.length>1?arguments[1]:void 0)}})},"2a84":function(t,e,n){},"2b3e":function(t,e,n){"use strict";n("fc7d")},"2b57":function(t,e,n){"use strict";n("1667")},3767:function(t,e,n){},4739:function(t,e,n){"use strict";n("dd9a")},"4de4":function(t,e,n){"use strict";var i=n("23e7"),a=n("b727").filter,s=n("1dde"),o=s("filter");i({target:"Array",proto:!0,forced:!o},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},"5a34":function(t,e,n){var i=n("44e7");t.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}},"5d06":function(t,e,n){},"7e8b":function(t,e,n){"use strict";n.d(e,"i",(function(){return s})),n.d(e,"a",(function(){return o})),n.d(e,"r",(function(){return r})),n.d(e,"g",(function(){return c})),n.d(e,"n",(function(){return u})),n.d(e,"d",(function(){return l})),n.d(e,"m",(function(){return d})),n.d(e,"p",(function(){return h})),n.d(e,"o",(function(){return f})),n.d(e,"k",(function(){return m})),n.d(e,"h",(function(){return p})),n.d(e,"l",(function(){return v})),n.d(e,"b",(function(){return g})),n.d(e,"c",(function(){return b})),n.d(e,"q",(function(){return w})),n.d(e,"j",(function(){return y})),n.d(e,"e",(function(){return k})),n.d(e,"f",(function(){return C}));var i=n("1bab"),a=n("4360");function s(){return Object(i["a"])({url:"/artist/cate"})}function o(t,e,n){return Object(i["a"])({url:"/artist",method:"post",data:{name:t,desc:e,area:n},headers:{authorization:a["a"].state.userMsg.token}})}function r(t,e){return Object(i["a"])({url:"/artist/upload/avatar",params:{arId:t},method:"post",data:e,headers:{"Content-type":"multipart/form-data",authorization:a["a"].state.userMsg.token}})}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return Object(i["a"])({url:"/artist",params:{offset:t,limit:e}})}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"全部",n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:8;return Object(i["a"])({url:"/artist/cate/detail",params:{area:t,keyword:n,letter:e,offset:a,limit:s}})}function l(t){return Object(i["a"])({url:"/artist/delete",method:"post",data:{id:t},headers:{authorization:a["a"].state.userMsg.token}})}function d(){return Object(i["a"])({url:"/artist/type"})}function h(t,e){return Object(i["a"])({url:"/artist/type/set",method:"post",data:{arId:t,type:e}})}function f(t,e){return Object(i["a"])({url:"/artist/cate/set",method:"post",data:{arId:t,cateId:e},headers:{authorization:a["a"].state.userMsg.token}})}function m(t){return Object(i["a"])({url:"/artist/detail",params:{id:t}})}function p(t,e,n){return Object(i["a"])({url:"/artist/album",params:{arId:t,offset:e,limit:n}})}function v(t,e,n){return Object(i["a"])({url:"/artist/song",params:{id:t,offset:e,limit:n}})}function g(t){return Object(i["a"])({url:"/artist/cate",method:"post",data:{name:t},headers:{authorization:a["a"].state.userMsg.token}})}function b(t){return Object(i["a"])({url:"/artist/type",method:"post",data:{name:t},headers:{authorization:a["a"].state.userMsg.token}})}function w(t,e,n){return Object(i["a"])({url:"/artist/update",method:"post",data:{arId:t,name:e,desc:n},headers:{authorization:a["a"].state.userMsg.token}})}function y(){return Object(i["a"])({url:"/artist/data",method:"get",headers:{authorization:a["a"].state.userMsg.token}})}function k(t){return Object(i["a"])({url:"/artist/cate/delete",method:"post",data:{cateId:t},headers:{authorization:a["a"].state.userMsg.token}})}function C(t){return Object(i["a"])({url:"/artist/type/delete",method:"post",data:{id:t},headers:{authorization:a["a"].state.userMsg.token}})}},"8b65":function(t,e,n){},"9ab1":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload"},[n("div",{staticClass:"state"},[n("div",{staticClass:"title"},[t._t("title")],2),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{cols:"50",rows:"2"},domProps:{value:t.title},on:{input:[function(e){e.target.composing||(t.title=e.target.value)},t.titleInp]}})]),n("div",{staticClass:"desc"},[n("div",{staticClass:"desc-name"},[t._t("desc-name")],2),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{cols:"50",rows:"7"},domProps:{value:t.content},on:{input:[function(e){e.target.composing||(t.content=e.target.value)},t.contentInp]}})]),n("div",{staticClass:"time"},[t._t("time")],2),n("div",{staticClass:"upload-img"},[n("div",{staticClass:"upload-name"},[t._t("upload-name")],2),n("div",{staticClass:"upload-preview"},[n("div",{staticClass:"img-content"},[n("input",{directives:[{name:"show",rawName:"v-show",value:!t.isShowPreview,expression:"!isShowPreview"}],attrs:{type:"file"},on:{change:t.change}}),n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isShowPreview&&"img"===t.showForm,expression:"!isShowPreview && showForm === 'img'"}],staticClass:"iconfont icon-tupian"}),n("img",{directives:[{name:"show",rawName:"v-show",value:t.isShowPreview&&"img"===t.showForm,expression:"isShowPreview && showForm === 'img'"}],attrs:{src:t.imgUrl,alt:""}})]),t._t("vide-content")],2)]),t.cateList.length?n("div",{staticClass:"cate"},[n("div",{staticClass:"cate-name"},[t._t("cate")],2),n("ul",{staticClass:"cate-outer"},t._l(t.cateList,(function(e,i){return n("li",{key:e.id,class:{active:t.currentIndex===i},on:{click:function(n){return t.liClick(e,i)}}},[t._v(" "+t._s(e.name)+" ")])})),0)]):t._e(),t.artists.length?n("div",{staticClass:"artist-list"},[n("div",{staticClass:"artist-title",on:{click:t.showArtist}},[t._t("artistTitle")],2),n("list",{directives:[{name:"show",rawName:"v-show",value:t.isShowArtist,expression:"isShowArtist"}],attrs:{list:t.artists},on:{defineArtist:t.defineArtist,"select-artist":t.artistClick}})],1):t._e(),t.albums.length?n("div",{staticClass:"album-list"},[n("div",{staticClass:"album-title",on:{click:t.showAlbum}},[t._t("albumTitle")],2),n("list",{directives:[{name:"show",rawName:"v-show",value:t.isShowAlbum,expression:"isShowAlbum"}],attrs:{list:t.albums},on:{defineArtist:t.defineAlbum,"select-artist":t.albumClick}})],1):t._e(),n("div",{staticClass:"control-btn"},[n("button",{on:{click:t.define}},[t._v("确定")]),n("button",{on:{click:t.cancel}},[t._v("取消")])])])},a=[],s=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list-outer"},[n("div",{staticClass:"list"},[n("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":t.querySearch,placeholder:"请输入相关内容","trigger-on-focus":!1},on:{select:t.handleSelect},model:{value:t.id,callback:function(e){t.id=e},expression:"id"}}),n("div",{staticClass:"control-btn"},[n("button",{on:{click:t.defineList}},[t._v("确定")]),n("button",{on:{click:t.defineList}},[t._v("取消")])])],1)])}),o=[],r=(n("d81d"),n("b0c0"),n("4de4"),n("caad"),n("2532"),{name:"List",data:function(){return{id:"",formatList:[]}},props:{list:{type:Array,default:function(){return[]}}},created:function(){this.formatList=this.list.map((function(t,e){return{id:t.id,name:t.name,value:t.name}}))},methods:{querySearch:function(t,e){var n=this.formatList,i=t?n.filter(this.createFilter(t)):n;e(i)},createFilter:function(t){return function(e){return e.value.toLowerCase().includes(t.toLowerCase())}},defineList:function(){this.$emit("defineArtist")},handleSelect:function(t){this.$emit("select-artist",t)}}}),c=r,u=(n("4739"),n("2877")),l=Object(u["a"])(c,s,o,!1,null,"0ab1528a",null),d=l.exports,h={name:"Upload",components:{List:d},data:function(){return{content:"",title:"",image:null,isShowPreview:!1,imgUrl:"",currentIndex:0,currentArtists:0,isShowArtist:!1,isShowAlbum:!1}},props:{cateList:{type:Array,default:function(){return[]}},artists:{type:Array,default:function(){return[]}},albums:{type:Array,default:function(){return[]}},showForm:{type:String,default:"img"}},methods:{titleInp:function(){this.$emit("titleInp",this.title)},contentInp:function(){this.$emit("contentInp",this.content)},change:function(t){this.imgUrl=URL.createObjectURL(t.target.files[0]),this.isShowPreview=!this.isShowPreview,this.$emit("select-file",t.target.files[0])},liClick:function(t,e){this.currentIndex=e,this.$emit("liClick",t,e)},artistClick:function(t,e){this.$emit("select-artist",t)},albumClick:function(t,e){this.$emit("select-album",t)},showArtist:function(){this.isShowArtist=!0},defineArtist:function(){this.isShowArtist=!1},showAlbum:function(){this.isShowAlbum=!0},defineAlbum:function(){this.isShowAlbum=!1},define:function(){this.$emit("define")},cancel:function(){this.$emit("cancel")}}},f=h,m=(n("1138"),Object(u["a"])(f,i,a,!1,null,"46c6e630",null));e["a"]=m.exports},"9d9a":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d");function i(t){var e=URL.createObjectURL(t),n=document.createElement("audio");return n.setAttribute("src",e),new Promise((function(t,e){n.oncanplay=function(){t(1e3*n.duration)}}))}},ab13:function(t,e,n){var i=n("b622"),a=i("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[a]=!1,"/./"[t](e)}catch(i){}}return!1}},b8fd:function(t,e,n){"use strict";n.d(e,"f",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return r})),n.d(e,"l",(function(){return c})),n.d(e,"i",(function(){return u})),n.d(e,"h",(function(){return l})),n.d(e,"j",(function(){return d})),n.d(e,"c",(function(){return h})),n.d(e,"e",(function(){return f})),n.d(e,"g",(function(){return m})),n.d(e,"k",(function(){return p})),n.d(e,"d",(function(){return v}));var i=n("1bab"),a=n("4360");function s(){return Object(i["a"])({url:"/album/cate"})}function o(t){return Object(i["a"])({url:"/album/cate",data:{name:t},method:"post",headers:{authorization:a["a"].state.userMsg.token}})}function r(t,e,n,s,o){return Object(i["a"])({url:"/album",data:{name:t,description:e,publishTime:n,arId:s,cateId:o},method:"post",headers:{authorization:a["a"].state.userMsg.token}})}function c(t,e){return Object(i["a"])({url:"/album/upload/cover",data:t,method:"post",params:{id:e},headers:{"Content-type":"multipart/form-data",authorization:a["a"].state.userMsg.token}})}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return Object(i["a"])({url:"/album/all",params:{offset:t,limit:e}})}function l(t){return Object(i["a"])({url:"/album/detail",params:{albumId:t}})}function d(t,e,n,a){return Object(i["a"])({url:"/album/cate/detail",params:{id:t,offset:n,limit:a,keyword:e}})}function h(t){return Object(i["a"])({url:"/album/delete",data:{id:t},method:"post",headers:{authorization:a["a"].state.userMsg.token}})}function f(t,e){return Object(i["a"])({url:"/album/song/delete",method:"post",headers:{authorization:a["a"].state.userMsg.token},data:{songId:t,alId:e}})}function m(){return Object(i["a"])({url:"/album/data"})}function p(t,e,n,s){return Object(i["a"])({url:"/album/update",method:"post",data:{alId:t,name:e,desc:n,publishTime:s},headers:{authorization:a["a"].state.userMsg.token}})}function v(t){return Object(i["a"])({url:"/album/cate/delete",method:"post",data:{id:t},headers:{authorization:a["a"].state.userMsg.token}})}},ba37:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"i",(function(){return o})),n.d(e,"e",(function(){return r})),n.d(e,"d",(function(){return c})),n.d(e,"a",(function(){return u})),n.d(e,"f",(function(){return l})),n.d(e,"h",(function(){return d})),n.d(e,"g",(function(){return h})),n.d(e,"c",(function(){return f}));var i=n("1bab"),a=n("4360");function s(t,e){return Object(i["a"])({url:"/toplist",method:"post",data:{name:t,desc:e},headers:{authorization:a["a"].state.userMsg.token}})}function o(t,e){return Object(i["a"])({url:"/toplist/upload",method:"post",data:t,params:{tId:e},headers:{authorization:a["a"].state.userMsg.token,"Content-type":"multipart/form-data"}})}function r(){return Object(i["a"])({url:"/toplist/official "})}function c(){return Object(i["a"])({url:"/toplist/hot"})}function u(t,e){return Object(i["a"])({url:"/toplist/song",method:"post",data:{tId:t,songId:e},headers:{authorization:a["a"].state.userMsg.token}})}function l(t){return Object(i["a"])({url:"/toplist/detail",params:{id:t}})}function d(t,e){return Object(i["a"])({url:"/toplist/song/remove",method:"post",data:{tId:t,sId:e},headers:{authorization:a["a"].state.userMsg.token}})}function h(){return Object(i["a"])({url:"/toplist/export",method:"post"})}function f(t){return Object(i["a"])({url:"/toplist/delete",method:"post",data:{id:t},headers:{authorization:a["a"].state.userMsg.token}})}},c73f:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add-msg"},[n("div",{staticClass:"avatar"},[t._t("icon")],2),n("div",{staticClass:"add-btn",style:{backgroundColor:t.bgc},on:{click:t.addClick}},[t._v(" "+t._s(t.title)+" ")])])},a=[],s={name:"AddMsg",props:{title:{type:String,default:""},bgc:{type:String,default:"#f27a7a"}},methods:{addClick:function(){this.$emit("add-content")}}},o=s,r=(n("fdd5"),n("2877")),c=Object(r["a"])(o,i,a,!1,null,"08fd75aa",null);e["a"]=c.exports},ca85:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"i",(function(){return o})),n.d(e,"c",(function(){return r})),n.d(e,"h",(function(){return c})),n.d(e,"g",(function(){return u})),n.d(e,"b",(function(){return l})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return h})),n.d(e,"f",(function(){return f}));var i=n("1bab"),a=n("4360");function s(t,e,n,s,o){return Object(i["a"])({url:"/song",data:{name:t,arId:e,alId:n,publishTime:s,alia:o},method:"post",headers:{authorization:a["a"].state.userMsg.token}})}function o(t,e){return Object(i["a"])({url:"/song/upload",params:{songId:e},data:t,method:"post",headers:{authorization:a["a"].state.userMsg.token,"Content-type":"multipart/form-data"}})}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,n=arguments.length>2?arguments[2]:void 0;return Object(i["a"])({url:"/song/all",params:{offset:t,limit:e,keyword:n}})}function c(t,e){return Object(i["a"])({url:"/song/lyric",method:"post",data:{id:t,lyric:e},headers:{authorization:a["a"].state.userMsg.token}})}function u(t,e){return Object(i["a"])({url:"/song/vip/update",method:"post",data:{vip:e,id:t},headers:{authorization:a["a"].state.userMsg.token}})}function l(t){return Object(i["a"])({url:"/song/delete",method:"post",data:{id:t},headers:{authorization:a["a"].state.userMsg.token}})}function d(t){return Object(i["a"])({url:"/artist/mv",params:{id:t}})}function h(t){return Object(i["a"])({url:"/song/lyric",params:{id:t}})}function f(t,e,n,s,o,r){return Object(i["a"])({url:"/song/update",method:"post",data:{id:t,name:e,alia:n,publishTime:s,vip:o,lyric:r},headers:{authorization:a["a"].state.userMsg.token}})}},caad:function(t,e,n){"use strict";var i=n("23e7"),a=n("4d64").includes,s=n("44d2");i({target:"Array",proto:!0},{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),s("includes")},cbb3:function(t,e,n){"use strict";n("5d06")},d164:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d");function i(t){return new Promise((function(e,n){var i=document.createElement("canvas"),a=i.getContext("2d"),s=document.createElement("video");s.setAttribute("controls","controls"),s.src=t,s.currentTime=1,s.oncanplay=function(){i.height=s.videoHeight,i.width=s.videoWidth,a.drawImage(s,0,0,s.videoWidth,s.videoHeight);var t=i.toDataURL("image/png");e(t)}}))}function a(t){var e=URL.createObjectURL(t),n=document.createElement("video");return n.setAttribute("src",e),new Promise((function(t,e){n.oncanplay=function(){t(1e3*n.duration)}}))}},d81d:function(t,e,n){"use strict";var i=n("23e7"),a=n("b727").map,s=n("1dde"),o=s("map");i({target:"Array",proto:!0,forced:!o},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},dd9a:function(t,e,n){},de34:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"song"},[n("div",{staticClass:"left-content"},[n("div",{staticClass:"upload-song"},[n("upload",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],attrs:{artists:t.artists,albums:t.allAlbum,"show-form":"music"},on:{titleInp:t.titleInp,contentInp:t.contentInp,"select-file":t.change,define:t.define,cancel:t.cancel,"select-artist":t.selectArtist,"select-album":t.selectAlbum}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("名称")]),n("span",{attrs:{slot:"desc-name"},slot:"desc-name"},[t._v("简介")]),n("span",{attrs:{slot:"artistTitle"},slot:"artistTitle"},[t._v("选择歌手")]),n("span",{attrs:{slot:"albumTitle"},slot:"albumTitle"},[t._v("选择专辑")]),n("div",{staticClass:"album-publish-time",attrs:{slot:"time"},slot:"time"},[n("p",[t._v("选择发布时间")]),n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",size:"small","value-format":"timestamp"},model:{value:t.publishTime,callback:function(e){t.publishTime=e},expression:"publishTime"}})],1)])],1),n("div",{staticClass:"search-outer"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.keyword,expression:"keyword",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入歌曲名称"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),n("i",{staticClass:"iconfont icon-search search-icon"})]),n("song-list",{attrs:{keyword:t.keyword}})],1),n("div",{staticClass:"right-content"},[n("add-msg",{attrs:{title:"添加歌曲"},on:{"add-content":t.addSong}},[n("i",{staticClass:"iconfont icon-music add-song-icon",attrs:{slot:"icon"},slot:"icon"})])],1)])},a=[],s=(n("498a"),n("d3b7"),n("25f0"),n("c73f")),o=n("9ab1"),r=n("7e8b"),c=n("b8fd"),u=n("ca85"),l=n("9d9a"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"song-list"},[n("p",{staticClass:"title"},[t._v("全部歌曲("+t._s(t.songList.count)+")")]),n("ul",t._l(t.songList.songs,(function(e,i){return n("li",{key:e.id,on:{click:function(n){return t.lClick(e,i)}}},[n("div",{staticClass:"index"},[t._v(t._s((i+1).toString().padStart(2,"0")))]),n("div",{staticClass:"name text-nowrap",attrs:{title:e.name}},[t._v(t._s(e.name))]),n("div",{staticClass:"album text-nowrap",attrs:{title:e.name}},[t._v(t._s(e.album.name))]),n("div",{staticClass:"artist text-nowrap",attrs:{title:e.name}},[t._v(t._s(e.artist.name))]),n("div",{staticClass:"is-vip"},[n("select",{on:{change:function(n){return t.vipChange(n,e)}}},[n("option",{domProps:{value:0,selected:0===e.vip}},[t._v("非会员")]),n("option",{domProps:{value:1,selected:1===e.vip}},[t._v("会员")])])]),n("div",{staticClass:"control-btn"},[n("button",{staticClass:"add-to-toplist add-mv",on:{click:function(n){return t.addMV(e,i)}}},[t._v("添加MV")]),n("button",{staticClass:"add-to-toplist",on:{click:function(n){return t.addLyric(e,i)}}},[t._v("上传歌词")]),n("button",{staticClass:"add-to-toplist edit-delete",on:{click:function(n){return t.edit(e)}}},[t._v("编辑")]),n("button",{staticClass:"add-to-toplist edit-delete",on:{click:function(n){return t.delSong(e)}}},[t._v("删除")])])])})),0),t.songList&&t.songList.songs&&0===t.songList.songs.length?n("div",{staticClass:"song-empty"},[n("el-empty",{attrs:{description:"暂无相关歌曲"}})],1):t._e(),t.songList&&t.songList.count>10?n("div",{staticClass:"page"},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.songList.count,"page-size":11},on:{"current-change":t.change}})],1):t._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"toplist"},[n("ul",t._l(t.toplist.concat(t.hotToplist),(function(e,i){return n("li",{key:e.id,on:{click:function(n){return t.selectToplist(e,i)}}},[n("div",{staticClass:"img-container"},[n("img",{attrs:{src:e.coverUrl,alt:""}})]),n("div",{staticClass:"state"},[t._v(t._s(e.name))])])})),0)]),t.isShowUpload?n("upload-m-v",{on:{define:t.define,cancel:t.cancel}}):t._e(),t.isShowLyric?n("lyric",{attrs:{"song-id":t.songId},on:{define:t.defineLyric,cancel:t.cancelLyric}}):t._e(),n("el-drawer",{attrs:{direction:t.direction,visible:t.drawer,"destroy-on-close":!0,"show-close":!1},on:{"update:visible":function(e){t.drawer=e}},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"title-control"},[n("div",{staticClass:"title"},[t._v("编辑歌曲信息")]),n("div",{staticClass:"define",on:{click:t.defineEdit}},[t._v("确定")])])]},proxy:!0}])},[t.drawer?n("edit-song",{ref:"songEdit",attrs:{song:t.song}}):t._e()],1)],1)},h=[],f=(n("b0c0"),n("ba37")),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload-mv"},[n("div",{staticClass:"mv"},[n("div",{staticClass:"mv-source"},[n("input",{directives:[{name:"show",rawName:"v-show",value:!t.isShowMVPrev,expression:"!isShowMVPrev"}],attrs:{type:"file",title:"选择MV"},on:{change:t.changeMV}}),n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isShowMVPrev,expression:"!isShowMVPrev"}],staticClass:"iconfont icon-video"}),n("img",{directives:[{name:"show",rawName:"v-show",value:t.isShowMVPrev,expression:"isShowMVPrev"}],attrs:{src:t.mvURL,alt:""}})]),n("div",{staticClass:"cover"},[n("input",{directives:[{name:"show",rawName:"v-show",value:!t.isShowCoverPrev,expression:"!isShowCoverPrev"}],attrs:{type:"file",title:"选择封面"},on:{change:t.changeCover}}),n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isShowCoverPrev,expression:"!isShowCoverPrev"}],staticClass:"iconfont icon-tupian"}),n("img",{directives:[{name:"show",rawName:"v-show",value:t.isShowCoverPrev,expression:"isShowCoverPrev"}],attrs:{src:t.coverUrl,alt:""}})])]),n("ul",{staticClass:"cate-list"},t._l(t.mvCate,(function(e,i){return n("li",{key:e.id,class:{active:t.currentIndex===i},on:{click:function(n){return t.liClick(e,i)}}},[t._v(" "+t._s(e.name)+" ")])})),0),n("div",{staticClass:"control-btn"},[n("button",{on:{click:t.define}},[t._v("确定")]),n("button",{on:{click:t.cancel}},[t._v("取消")])])])},p=[],v=(n("3ca3"),n("ddb0"),n("2b3d"),n("d164")),g=n("1a1d"),b={name:"UploadMV",data:function(){return{mvURL:"",coverUrl:"",isShowMVPrev:!1,isShowCoverPrev:!1,mv:null,cover:null,dt:0,cateId:"",mvCate:[],currentIndex:0}},created:function(){var t=this;Object(g["g"])(1).then((function(e){t.cateId=e[0].id,t.mvCate=e}))},methods:{liClick:function(t,e){this.currentIndex=e,this.cateId=t.id},changeMV:function(t){var e=this;this.mv=t.target.files[0];var n=URL.createObjectURL(t.target.files[0]);Object(v["a"])(n).then((function(n){e.mvURL=n,e.isShowMVPrev=!0,Object(v["b"])(t.target.files[0]).then((function(t){t&&(e.dt=t)}))}))},changeCover:function(t){this.cover=t.target.files[0],this.isShowCoverPrev=!0,this.coverUrl=URL.createObjectURL(t.target.files[0])},define:function(){this.$emit("define",this.mv,this.cover,this.dt,this.cateId)},cancel:function(){this.$emit("cancel")}}},w=b,y=(n("cbb3"),n("2877")),k=Object(y["a"])(w,m,p,!1,null,"109f3834",null),C=k.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lyric"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.lyric,expression:"lyric"}],attrs:{rows:"10",cols:"50"},domProps:{value:t.lyric},on:{input:function(e){e.target.composing||(t.lyric=e.target.value)}}}),t._v(" "),n("div",{staticClass:"control-btn"},[n("button",{on:{click:t.define}},[t._v("确定")]),n("button",{on:{click:t.cancel}},[t._v("取消")])])])},O=[],S={name:"Lyric",data:function(){return{lyric:""}},props:{songId:{type:String,default:""}},methods:{define:function(){var t=this;Object(u["h"])(this.songId,this.lyric).then((function(e){t.$emit("define")}))},cancel:function(){this.$emit("cancel")}}},_=S,I=(n("118e"),Object(y["a"])(_,j,O,!1,null,"20997d3d",null)),x=I.exports,M=n("20ca"),L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit-song"},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-position":"left","label-width":"100px"}},[n("el-form-item",{attrs:{label:"歌曲名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入歌曲名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"歌曲别名",prop:"alia"}},[n("el-input",{attrs:{placeholder:"情输入歌曲别名"},model:{value:t.form.alia,callback:function(e){t.$set(t.form,"alia",e)},expression:"form.alia"}})],1),n("el-form-item",{attrs:{label:"发布时间",prop:"publishTime"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择歌曲发布时间","value-format":"timestamp"},model:{value:t.form.publishTime,callback:function(e){t.$set(t.form,"publishTime",e)},expression:"form.publishTime"}})],1),n("el-form-item",{attrs:{label:"VIP",prop:"vip"}},[n("el-radio-group",{staticStyle:{width:"70%"},model:{value:t.form.vip,callback:function(e){t.$set(t.form,"vip",e)},expression:"form.vip"}},[n("el-radio",{attrs:{label:1}},[t._v("VIP歌曲")]),n("el-radio",{attrs:{label:0}},[t._v("非VIP歌曲")])],1)],1),n("el-form-item",{attrs:{label:"歌词",prop:"lyric"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:50}},model:{value:t.form.lyric,callback:function(e){t.$set(t.form,"lyric",e)},expression:"form.lyric"}})],1)],1)],1)},T=[],z={name:"EditSong",data:function(){return{form:{name:"",alia:"",publishTime:"",vip:!1,lyric:""},rules:{name:[{required:!0,message:"请输歌曲名称",trigger:"blur"}],alia:[{required:!0,message:"请输别名",trigger:"blur"}],publishTime:[{required:!0,message:"请选择发布时间",trigger:"change"}]}}},props:{song:{type:Object,default:function(){return{}}}},created:function(){var t=this;this.form.name=this.song.name,this.form.alia=this.song.alia,this.form.publishTime=this.song.publishTime,this.form.vip=this.song.vip,Object(u["e"])(this.song.id).then((function(e){t.form.lyric=e.lyric}))}},A=z,$=(n("007e"),Object(y["a"])(A,L,T,!1,null,"5b24ad09",null)),P=$.exports,U={name:"SongList",components:{EditSong:P,Lyric:x,UploadMV:C},data:function(){return{songList:{},toplist:[],isShow:!1,songId:"",songName:"",hotToplist:[],isShowUpload:!1,isShowLyric:!1,drawer:!1,direction:"rtl",song:{}}},props:{keyword:{type:String,default:""}},watch:{keyword:{handler:function(t,e){var n=this,i=Object(M["a"])((function(){Object(u["c"])(0,11,t).then((function(t){n.songList=t}))}),1e3,!1);i()}}},created:function(){var t=this;Object(u["c"])(0,11,this.keyword).then((function(e){console.log(e),t.songList=e})),Object(f["e"])().then((function(e){t.toplist=e})),Object(f["d"])().then((function(e){console.log(e),t.hotToplist=e}))},methods:{addToToplist:function(){this.isShow=!this.isShow},vipChange:function(t,e){var n=this;Object(u["g"])(e.id,t.currentTarget.value).then((function(t){n.$toast.show("更新成功",1500)}))},selectToplist:function(t,e){Object(f["a"])(t.id,this.songId).then((function(t){console.log(t)})),this.isShow=!1},lClick:function(t,e){this.songId=t.id,this.songName=t.name},addMV:function(t,e){this.isShowUpload=!0,this.song=t},addLyric:function(t,e){this.isShowLyric=!0,this.songId=t.id},define:function(t,e,n,i){var a=this;this.songName&&t&&e&&n&&Object(g["a"])(this.songName,this.song.name,1,i,this.songId).then((function(i){var s=i.id;if(s){var o=new FormData;o.append("video",t),o.append("dt",n),Object(g["m"])(o,s).then((function(t){console.log(t)}));var r=new FormData;r.append("cover",e),Object(g["l"])(r,s).then((function(t){a.isShowUpload=!1}))}}))},cancel:function(){this.isShowUpload=!1},defineLyric:function(){this.isShowLyric=!1},cancelLyric:function(){this.isShowLyric=!1},change:function(t){var e=this;Object(u["c"])(11*(t-1),11,this.keyword).then((function(t){e.songList=t}))},edit:function(t){this.drawer=!0,this.song=t},delSong:function(t){var e=this;this.$confirm("确定删除该歌曲?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["b"])(t.id).then((function(t){e.$message({type:"success",message:"删除成功!"})}))})).catch((function(){}))},defineEdit:function(){var t=this,e=this.$refs.songEdit.form,n=e.alia,i=e.lyric,a=e.name,s=e.publishTime,o=e.vip;Object(u["f"])(this.song.id,a,n,s,o,i).then((function(e){t.drawer=!1,t.$message({message:"修改成功",duration:1500,type:"success"}),Object(u["c"])(0,11,t.keyword).then((function(e){t.songList=e}))}))}}},N=U,E=(n("2b3e"),Object(y["a"])(N,d,h,!1,null,"ee6fe2c0",null)),V=E.exports,R={name:"Song",components:{SongList:V,AddMsg:s["a"],Upload:o["a"]},data:function(){return{title:"",alia:"",isShow:!1,artists:[],publishTime:"",arId:"",alId:"",song:null,allAlbum:[],keyword:""}},created:function(){var t=this;Object(r["g"])().then((function(e){t.artists=e})),Object(c["i"])().then((function(e){t.allAlbum=e}))},methods:{addSong:function(){this.isShow=!0},titleInp:function(t){this.title=t},contentInp:function(t){this.alia=t},change:function(t){this.song=t},selectArtist:function(t){this.arId=t.id},selectAlbum:function(t){this.alId=t.id},define:function(){var t=this;0===this.title.trim().length?this.$toast.show("请添加名称",1500):0===this.alia.trim().length?this.$toast.show("请添加简介",1500):0===this.arId.trim().length?this.$toast.show("请选择歌手",1500):0===this.alId.trim().length?this.$toast.show("请选择专辑",1500):this.song?this.publishTime?(this.isShow=!1,Object(u["a"])(this.title,this.arId,this.alId,this.publishTime,this.alia).then((function(e){if(e){var n=e.songId,i=new FormData;i.append("song",t.song),Object(l["a"])(t.song).then((function(t){t&&(i.append("dt",t.toString()),Object(u["i"])(i,n).then((function(t){console.log(t)})))}))}}))):this.$toast.show("请选择歌曲发布时间",1500):this.$toast.show("请选择歌曲",1500)},cancel:function(){this.isShow=!1}}},F=R,q=(n("2b57"),Object(y["a"])(F,i,a,!1,null,"6c5bb77c",null));e["default"]=q.exports},ef1e:function(t,e,n){},fc7d:function(t,e,n){},fdd5:function(t,e,n){"use strict";n("8b65")}}]);
//# sourceMappingURL=chunk-08416013.c0019102.js.map