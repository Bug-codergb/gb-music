(this["webpackJsonpgb-music-react"]=this["webpackJsonpgb-music-react"]||[]).push([[49],{106:function(t,e,n){"use strict";n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return g})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return h}));var r=n(174),a=n.n(r),o=n(175),u=n(499),c=n(115),i=n(108),s=n(45);function d(t){return{type:"changeUserMsg",userMsg:t}}function l(t){return{type:"changeLoginType",loginType:t}}function g(){return function(t){Object(i.f)().then((function(e){var n=e.love,r=e.follow;n||(e.love=[]),r||(e.follow=[]),window.localStorage.setItem("userDetail",JSON.stringify(e)),t({type:"changeUserDetail",userDetail:e})}))}}function f(t,e,n){return function(){var r=Object(o.a)(a.a.mark((function r(o){var f,h;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(c.a)(t,e);case 3:if(!(f=r.sent)){r.next=19;break}return h=f.token,r.next=8,Object(i.l)(h);case 8:return 1*r.sent.code===200&&(o(Object(s.a)("\u60a8\u7684VIP\u5df2\u7ecf\u8fc7\u671f\uff0c\u5f00\u901aVIP\u540e\u7545\u60f3",3500)),f.auth=0,delete f.vip),r.next=12,o(d(f));case 12:return r.next=14,o(l(1));case 14:return window.localStorage.setItem("userMsg",JSON.stringify(f)),window.localStorage.setItem("loginType","1"),r.next=18,o(g());case 18:n.history.push({pathname:"/Home"});case 19:r.next=25;break;case 21:r.prev=21,r.t0=r.catch(0),console.log(r.t0),u.b.warning({content:"\u7528\u6237\u540d\u6216\u8005\u5bc6\u7801\u9519\u8bef",style:{fontSize:"20px",marginTop:"5vh"}});case 25:case"end":return r.stop()}}),r,null,[[0,21]])})));return function(t){return r.apply(this,arguments)}}()}function h(){return function(t){window.localStorage.clear(),t(l(0)),t(d({token:"",userName:"",userId:"",avatarUrl:"",createTime:"",updateTime:"",manage:-1,auth:-1})),t({type:"changeUserDetail",userDetail:{userId:"",userName:"",avatarUrl:"",subscriber:[],thumb:[],follow:[{userId:""}],love:[{songId:""}]}})}}},108:function(t,e,n){"use strict";n.d(e,"k",(function(){return o})),n.d(e,"g",(function(){return u})),n.d(e,"a",(function(){return c})),n.d(e,"i",(function(){return i})),n.d(e,"f",(function(){return s})),n.d(e,"m",(function(){return d})),n.d(e,"b",(function(){return l})),n.d(e,"e",(function(){return g})),n.d(e,"j",(function(){return f})),n.d(e,"l",(function(){return h})),n.d(e,"h",(function(){return p})),n.d(e,"d",(function(){return m})),n.d(e,"c",(function(){return b}));var r=n(97),a=n(22);function o(t){return Object(r.a)({url:"/user/favorite",method:"post",data:{id:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function u(t,e){return Object(r.a)({url:"/user/favorite",params:{offset:t,limit:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function c(t){return Object(r.a)({url:"/user/favorite/cancel",method:"post",data:{songId:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function i(t,e,n){return Object(r.a)({url:"/sub/user/".concat(t),params:{offset:e,limit:n},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function s(){return Object(r.a)({url:"/user/detail",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function d(t){return Object(r.a)({url:"/user/upload/avatar",method:"post",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token,"Content-Type":"multipart/form-data"},data:t})}function l(t){return Object(r.a)({url:"/user/other/detail",method:"post",data:{userId:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function g(t,e,n){return Object(r.a)({url:"/user/channel",method:"post",data:{userId:t,offset:e,limit:n},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function f(t,e,n){return Object(r.a)({url:"/sub/user/playlist",method:"post",params:{offset:e,limit:n},data:{userId:t}})}function h(t){return Object(r.a)({url:"/user/expire",method:"post",headers:{authorization:t}})}function p(){return Object(r.a)({url:"/user/data/moment",method:"post",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function m(t,e){return Object(r.a)({url:"/user/moment",method:"post",data:{offset:t,limit:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function b(t){return Object(r.a)({url:"/user/simple",params:{userId:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}},115:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o}));var r=n(97);function a(t,e){return Object(r.a)({url:"/login",method:"post",data:{userName:t,password:e}})}function o(t,e){return Object(r.a)({url:"/register",method:"post",data:{userName:t,password:e}})}},122:function(t,e,n){"use strict";function r(t,e){var n=new Date(t);/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));var r={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds()};for(var o in r)if(new RegExp("(".concat(o,")")).test(e)){var u=r[o]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?u:a(u))}return e||""}function a(t){return("00"+t).substr(t.length)}n.d(e,"a",(function(){return r}))},376:function(t,e,n){"use strict";n.d(e,"e",(function(){return o})),n.d(e,"h",(function(){return u})),n.d(e,"f",(function(){return c})),n.d(e,"a",(function(){return i})),n.d(e,"p",(function(){return s})),n.d(e,"n",(function(){return d})),n.d(e,"m",(function(){return l})),n.d(e,"b",(function(){return g})),n.d(e,"d",(function(){return f})),n.d(e,"c",(function(){return h})),n.d(e,"i",(function(){return p})),n.d(e,"j",(function(){return m})),n.d(e,"k",(function(){return b})),n.d(e,"l",(function(){return j})),n.d(e,"g",(function(){return O})),n.d(e,"o",(function(){return x}));var r=n(97),a=n(22);function o(){return Object(r.a)({url:"/channel/all"})}function u(t,e,n){return Object(r.a)({url:"/channel/content",params:{id:t,offset:e,limit:n}})}function c(t,e,n){return Object(r.a)({url:"/channel/detail",params:{id:t,offset:e,limit:n}})}function i(t,e,n){return Object(r.a)({url:"/channel/content/add",method:"post",data:{cId:t,name:e,description:n},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function s(t){return Object(r.a)({url:"/channel/content/upload",data:t,method:"post",headers:{"Content-type":"multipart/form-data",authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function d(t){return Object(r.a)({url:"/channel/count",params:{userId:t}})}function l(t,e,n,a){return Object(r.a)({url:"/channel/user",params:{userId:t,cId:e,offset:n,limit:a}})}function g(t,e){return Object(r.a)({url:"/channel/program",method:"post",data:{name:t,cId:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function f(t,e){return Object(r.a)({url:"/channel/program/source",method:"post",params:{id:t},data:e,headers:{"Content-type":"multipart/form-data",authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function h(t){return Object(r.a)({url:"/channel/playCount",method:"post",data:{id:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function p(){return Object(r.a)({url:"/channel/hot"})}function m(){return Object(r.a)({url:"/channel/content/hot"})}function b(t){return Object(r.a)({url:"/channel/program/detail",params:{id:t}})}function j(t){return Object(r.a)({url:"/channel/program/url",params:{id:t}})}function O(t,e,n){return Object(r.a)({url:"/channel/sub/user",params:{cId:t,offset:e,limit:n}})}function x(){return Object(r.a)({url:"/channel/program/list",method:"post",data:{},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}},558:function(t,e,n){"use strict";n.r(e);var r,a=n(40),o=n(0),u=n(3),c=n(376),i=n(11),s=n(12).a.div(r||(r=Object(i.a)(["\n  background-color: #fff;\n  padding: 20px 20px 30px 20px;\n  .program-list {\n    & > li {\n      display: flex;\n      align-items: center;\n      padding: 10px 0 10px 10px;\n      &:nth-child(odd) {\n        background-color: #f9f9f9;\n      }\n      &:nth-child(1),\n      &:nth-child(2),\n      &:nth-child(3) {\n        .index {\n          background-color: #ff3a3a;\n        }\n      }\n      .index {\n        margin: 0 15px 0 0;\n        background-color: #cccccc;\n        padding: 5px 6px;\n        border-radius: 8px;\n        font-size: 13px;\n        color: #fff;\n        font-weight: bold;\n      }\n      .img-container {\n        width: 50px;\n        cursor: pointer;\n        img {\n          width: 100%;\n        }\n      }\n      .name {\n        margin: 0 0 0 20px;\n        font-size: 14px;\n        color: #656565;\n        width: 20%;\n        cursor: pointer;\n      }\n      .channel-name {\n        width: 15%;\n        color: #656565;\n      }\n      .cate {\n        width: 15%;\n        font-size: 13px;\n        color: #0086b3;\n      }\n      .create-time {\n        color: #ccc;\n        font-size: 13px;\n        width: 15%;\n      }\n      .play-count {\n        & > span {\n          color: #ccc;\n          margin: 0 0 0 5px;\n        }\n        i {\n          color: #ccc;\n        }\n      }\n    }\n  }\n  .empty {\n    padding: 180px 0;\n  }\n"]))),d=n(122),l=n(19),g=n(2),f=function(t){var e=Object(o.useState)([]),n=Object(a.a)(e,2),r=n[0],u=n[1];Object(o.useEffect)((function(){Object(c.o)().then((function(t){u(t)}))}),[]);var i=function(e){t.history.push({pathname:"/Home/channelDetail",state:{id:e.category.id}})};return Object(g.jsxs)(s,{children:[Object(g.jsx)("ul",{className:"program-list",children:r&&0!==r.length&&r.map((function(t,e){var n;return Object(g.jsxs)("li",{children:[Object(g.jsx)("div",{className:"index",children:(e+1).toString().padStart(2,"0")}),Object(g.jsx)("div",{className:"img-container",onClick:function(e){return i(t)},children:Object(g.jsx)("img",{src:t.category.coverUrl,alt:t.category.name})}),Object(g.jsx)("div",{className:"name text-nowrap",onClick:function(e){return i(t)},children:t.name}),Object(g.jsx)("div",{className:"channel-name",children:t.category.name}),Object(g.jsx)("div",{className:"cate",children:null===(n=t.category.channel)||void 0===n?void 0:n.name}),Object(g.jsx)("div",{className:"create-time",children:Object(d.a)(t.createTime,"yyyy-MM-dd hh:mm")}),Object(g.jsxs)("div",{className:"play-count",children:[Object(g.jsx)("i",{className:"iconfont icon-play2",children:" "}),Object(g.jsx)("span",{children:t.playCount})]})]},t.id)}))}),r&&r.length<1&&Object(g.jsx)("div",{className:"empty",children:Object(g.jsx)(l.a,{description:"\u6682\u65e0\u58f0\u97f3"})})]})};e.default=Object(u.h)(Object(o.memo)(f))},97:function(t,e,n){"use strict";var r=n(173),a=n.n(r),o=n(26),u=n(22),c=n(106),i=n(9);e.a=function(t){var e=a.a.create({baseURL:o.a,timeout:15e3});return e.interceptors.request.use((function(t){return t}),(function(t){return console.log(t),t})),e.interceptors.response.use((function(t){return t.data}),(function(t){if(t.response){var e=t.response,n=e.status,r=e.data;if(1*n!==403||"\u8bf7\u767b\u5f55"!==r.message)throw t;u.a.dispatch(Object(c.d)()),u.a.dispatch(Object(c.b)({token:"",userName:"",userId:"",avatarUrl:"",createTime:"",updateTime:"",manage:-1,auth:-1})),Object(i.a)().push({pathname:"/Login"})}})),e.request(t)}}}]);
//# sourceMappingURL=49.182909d0.chunk.js.map