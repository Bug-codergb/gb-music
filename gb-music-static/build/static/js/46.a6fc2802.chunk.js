(this["webpackJsonpgb-music-react"]=this["webpackJsonpgb-music-react"]||[]).push([[46],{106:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return h}));var r=n(174),a=n.n(r),o=n(175),u=n(499),i=n(115),c=n(108),s=n(45);function d(e){return{type:"changeUserMsg",userMsg:e}}function l(e){return{type:"changeLoginType",loginType:e}}function g(){return function(e){Object(c.f)().then((function(t){var n=t.love,r=t.follow;n||(t.love=[]),r||(t.follow=[]),window.localStorage.setItem("userDetail",JSON.stringify(t)),e({type:"changeUserDetail",userDetail:t})}))}}function f(e,t,n){return function(){var r=Object(o.a)(a.a.mark((function r(o){var f,h;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(i.a)(e,t);case 3:if(!(f=r.sent)){r.next=19;break}return h=f.token,r.next=8,Object(c.l)(h);case 8:return 1*r.sent.code===200&&(o(Object(s.a)("\u60a8\u7684VIP\u5df2\u7ecf\u8fc7\u671f\uff0c\u5f00\u901aVIP\u540e\u7545\u60f3",3500)),f.auth=0,delete f.vip),r.next=12,o(d(f));case 12:return r.next=14,o(l(1));case 14:return window.localStorage.setItem("userMsg",JSON.stringify(f)),window.localStorage.setItem("loginType","1"),r.next=18,o(g());case 18:n.history.push({pathname:"/Home"});case 19:r.next=25;break;case 21:r.prev=21,r.t0=r.catch(0),console.log(r.t0),u.b.warning({content:"\u7528\u6237\u540d\u6216\u8005\u5bc6\u7801\u9519\u8bef",style:{fontSize:"20px",marginTop:"5vh"}});case 25:case"end":return r.stop()}}),r,null,[[0,21]])})));return function(e){return r.apply(this,arguments)}}()}function h(){return function(e){window.localStorage.clear(),e(l(0)),e(d({token:"",userName:"",userId:"",avatarUrl:"",createTime:"",updateTime:"",manage:-1,auth:-1})),e({type:"changeUserDetail",userDetail:{userId:"",userName:"",avatarUrl:"",subscriber:[],thumb:[],follow:[{userId:""}],love:[{songId:""}]}})}}},108:function(e,t,n){"use strict";n.d(t,"k",(function(){return o})),n.d(t,"g",(function(){return u})),n.d(t,"a",(function(){return i})),n.d(t,"i",(function(){return c})),n.d(t,"f",(function(){return s})),n.d(t,"m",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return g})),n.d(t,"j",(function(){return f})),n.d(t,"l",(function(){return h})),n.d(t,"h",(function(){return p})),n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return m}));var r=n(97),a=n(22);function o(e){return Object(r.a)({url:"/user/favorite",method:"post",data:{id:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function u(e,t){return Object(r.a)({url:"/user/favorite",params:{offset:e,limit:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function i(e){return Object(r.a)({url:"/user/favorite/cancel",method:"post",data:{songId:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function c(e,t,n){return Object(r.a)({url:"/sub/user/".concat(e),params:{offset:t,limit:n},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function s(){return Object(r.a)({url:"/user/detail",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function d(e){return Object(r.a)({url:"/user/upload/avatar",method:"post",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token,"Content-Type":"multipart/form-data"},data:e})}function l(e){return Object(r.a)({url:"/user/other/detail",method:"post",data:{userId:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function g(e,t,n){return Object(r.a)({url:"/user/channel",method:"post",data:{userId:e,offset:t,limit:n},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function f(e,t,n){return Object(r.a)({url:"/sub/user/playlist",method:"post",params:{offset:t,limit:n},data:{userId:e}})}function h(e){return Object(r.a)({url:"/user/expire",method:"post",headers:{authorization:e}})}function p(){return Object(r.a)({url:"/user/data/moment",method:"post",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function b(e,t){return Object(r.a)({url:"/user/moment",method:"post",data:{offset:e,limit:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function m(e){return Object(r.a)({url:"/user/simple",params:{userId:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}},115:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var r=n(97);function a(e,t){return Object(r.a)({url:"/login",method:"post",data:{userName:e,password:t}})}function o(e,t){return Object(r.a)({url:"/register",method:"post",data:{userName:e,password:t}})}},142:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},237:function(e,t,n){"use strict";n.d(t,"h",(function(){return u})),n.d(t,"c",(function(){return i})),n.d(t,"i",(function(){return c})),n.d(t,"g",(function(){return s})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return g})),n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return h})),n.d(t,"j",(function(){return p}));var r=n(142),a=n(97),o=n(22);function u(e,t,n,u){return Object(a.a)({url:"/message/".concat(e),method:"post",data:Object(r.a)({content:t},n,u),headers:{authorization:o.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function i(){return Object(a.a)({url:"/message",headers:{authorization:o.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function c(e){return Object(a.a)({url:"/message/read",method:"post",data:{id:e},headers:{authorization:o.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function s(e,t){return Object(a.a)({url:"/message/detail/video",method:"post",data:{offset:e,limit:t},headers:{authorization:o.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function d(e,t){return Object(a.a)({url:"/message/detail/comment",method:"post",data:{offset:e,limit:t},headers:{authorization:o.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function l(e,t){return Object(a.a)({url:"/message/detail/album",method:"post",data:{offset:e,limit:t},headers:{authorization:o.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function g(e,t){return Object(a.a)({url:"/message/detail/playlist",method:"post",data:{offset:e,limit:t},headers:{authorization:o.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function f(e,t){return Object(a.a)({url:"/message/detail/channel",method:"post",data:{offset:e,limit:t},headers:{authorization:o.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function h(e){return Object(a.a)({url:"/message/delete",method:"post",data:{id:e},headers:{authorization:o.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function p(e){return Object(a.a)({url:"/message/read/single",method:"post",data:{id:e},headers:{authorization:o.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}},374:function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"h",(function(){return u})),n.d(t,"f",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"p",(function(){return s})),n.d(t,"n",(function(){return d})),n.d(t,"m",(function(){return l})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"i",(function(){return p})),n.d(t,"j",(function(){return b})),n.d(t,"k",(function(){return m})),n.d(t,"l",(function(){return j})),n.d(t,"g",(function(){return O})),n.d(t,"o",(function(){return x}));var r=n(97),a=n(22);function o(){return Object(r.a)({url:"/channel/all"})}function u(e,t,n){return Object(r.a)({url:"/channel/content",params:{id:e,offset:t,limit:n}})}function i(e,t,n){return Object(r.a)({url:"/channel/detail",params:{id:e,offset:t,limit:n}})}function c(e,t,n){return Object(r.a)({url:"/channel/content/add",method:"post",data:{cId:e,name:t,description:n},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function s(e){return Object(r.a)({url:"/channel/content/upload",data:e,method:"post",headers:{"Content-type":"multipart/form-data",authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function d(e){return Object(r.a)({url:"/channel/count",params:{userId:e}})}function l(e,t,n,a){return Object(r.a)({url:"/channel/user",params:{userId:e,cId:t,offset:n,limit:a}})}function g(e,t){return Object(r.a)({url:"/channel/program",method:"post",data:{name:e,cId:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function f(e,t){return Object(r.a)({url:"/channel/program/source",method:"post",params:{id:e},data:t,headers:{"Content-type":"multipart/form-data",authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function h(e){return Object(r.a)({url:"/channel/playCount",method:"post",data:{id:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function p(){return Object(r.a)({url:"/channel/hot"})}function b(){return Object(r.a)({url:"/channel/content/hot"})}function m(e){return Object(r.a)({url:"/channel/program/detail",params:{id:e}})}function j(e){return Object(r.a)({url:"/channel/program/url",params:{id:e}})}function O(e,t,n){return Object(r.a)({url:"/channel/sub/user",params:{cId:e,offset:t,limit:n}})}function x(){return Object(r.a)({url:"/channel/program/list",method:"post",data:{},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}},536:function(e,t,n){"use strict";n.r(t);var r,a=n(40),o=n(0),u=n(10),i=n.p+"static/media/radio.b03184fc.png",c=n(11),s=n(12).a.div(r||(r=Object(c.a)(["\n  position: relative;\n  .upload-radio {\n    width: 500px;\n    height: 300px;\n    margin: 30px auto;\n    border: 1px dotted #cccccc;\n    text-align: center;\n    border-radius: 8px;\n    img {\n      width: 200px;\n    }\n    .tip {\n      color: #5091cb;\n      text-decoration: underline;\n      cursor: pointer;\n    }\n  }\n  .upload-content {\n    padding: 30px 50px;\n    background-color: #fff;\n    border-radius: 8px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);\n    .name,\n    .desc {\n      display: flex;\n      margin: 0 0 20px 0;\n      textarea {\n        resize: none;\n        border: 1px solid #cccac1;\n      }\n      span {\n        margin: 0 5px 0 0;\n      }\n    }\n    .prev-img {\n      width: 92%;\n      height: 100px;\n      background-color: #f2f2f2;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      position: relative;\n      margin: 0 0 20px 0;\n      input {\n        position: absolute;\n        height: 100%;\n        width: 100%;\n        opacity: 0;\n        cursor: pointer;\n      }\n      i.iconfont {\n        font-size: 40px;\n        color: #ff3a3a;\n        display: inline-block;\n      }\n      img {\n        height: 100%;\n      }\n    }\n    .channel-list {\n      display: flex;\n      flex-wrap: wrap;\n      width: 450px;\n      & > li {\n        white-space: nowrap;\n        margin: 0 15px 15px 0;\n        background-color: #f7b3b3;\n        font-size: 13px;\n        color: #fff;\n        padding: 4px 15px;\n        border-radius: 5px;\n        cursor: pointer;\n        &:hover {\n          background-color: #f27a7a;\n        }\n        &.active {\n          background-color: #f27a7a;\n        }\n      }\n    }\n    .control-btn {\n      display: flex;\n      justify-content: flex-end;\n      button {\n        color: #fff;\n        font-size: 13px;\n        padding: 4px 15px;\n        margin: 0 0 0 30px;\n        cursor: pointer;\n        &:nth-child(1) {\n          background-color: #f27a7a;\n        }\n        &:nth-child(2) {\n          background-color: #efefef;\n          color: #656565;\n        }\n      }\n    }\n  }\n"]))),d=n(374),l=n(45),g=n(237),f=n(2),h=function(){var e=Object(o.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],c=Object(o.useState)(0),h=Object(a.a)(c,2),p=h[0],b=h[1],m=Object(o.useState)(!1),j=Object(a.a)(m,2),O=j[0],x=j[1],v=Object(o.useState)(""),k=Object(a.a)(v,2),I=k[0],S=k[1],w=Object(o.useState)(""),z=Object(a.a)(w,2),M=z[0],R=z[1],y=Object(o.useState)(""),N=Object(a.a)(y,2),T=N[0],C=N[1],U=Object(o.useState)(""),D=Object(a.a)(U,2),L=D[0],J=D[1],P=Object(o.useState)(),q=Object(a.a)(P,2),V=q[0],E=q[1],F=Object(o.useState)(!1),H=Object(a.a)(F,2),A=H[0],B=H[1],G=Object(u.b)();Object(o.useEffect)((function(){Object(d.e)().then((function(e){r(e),C(e[0].id)}))}),[]);return Object(f.jsxs)(s,{children:[Object(f.jsxs)("div",{className:"upload-radio",children:[Object(f.jsx)("img",{src:i,alt:"radio-img"}),Object(f.jsx)("p",{className:"tip",onClick:function(e){x(!0)},children:"\u70b9\u51fb\u6dfb\u52a0"})]}),O&&Object(f.jsxs)("div",{className:"upload-content",children:[Object(f.jsxs)("div",{className:"name",children:[Object(f.jsx)("span",{children:"\u540d\u79f0:"}),Object(f.jsx)("textarea",{rows:2,cols:50,value:I,onChange:function(e){return function(e){S(e.currentTarget.value)}(e)},children:" "})]}),Object(f.jsxs)("div",{className:"desc",children:[Object(f.jsx)("span",{children:"\u7b80\u4ecb:"}),Object(f.jsx)("textarea",{rows:5,cols:50,value:M,onChange:function(e){return function(e){R(e.currentTarget.value)}(e)},children:" "})]}),Object(f.jsxs)("div",{className:"prev-img",children:[!A&&Object(f.jsx)("input",{type:"file",onChange:function(e){return function(e){if(e.currentTarget.files){var t=URL.createObjectURL(e.currentTarget.files[0]);J(t),B(!0),E(e.currentTarget.files[0])}}(e)}}),!A&&Object(f.jsx)("i",{className:"iconfont icon-tupian",children:" "}),A&&Object(f.jsx)("img",{src:L,alt:"\u56fe\u7247\u9884\u89c8"})]}),Object(f.jsx)("ul",{className:"channel-list",children:0!==n.length&&n.map((function(e,t){return Object(f.jsx)("li",{onClick:function(n){return function(e,t){b(t),C(e.id)}(e,t)},className:p===t?"active":"",children:e.name},e.id)}))}),Object(f.jsxs)("div",{className:"control-btn",children:[Object(f.jsx)("button",{className:"define",onClick:function(e){0===I.trim().length?G(Object(l.a)("\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a",1500)):0===M.trim().length?G(Object(l.a)("\u7b80\u4ecb\u4e0d\u80fd\u4e3a\u7a7a",1500)):V?0===T.trim().length?G(Object(l.a)("\u8bf7\u9009\u62e9\u6587\u4ef6",1500)):Object(d.a)(T,I,M).then((function(e){if(e){var t=e.id,n=new FormData;n.append("cover",V),n.append("id",t),Object(d.p)(n).then((function(e){C(""),R(""),S(""),E(void 0),J(""),x(!1),B(!1)})),Object(g.h)("/channel","\u53d1\u5e03\u4e86","ccId",t)}})):G(Object(l.a)("\u8bf7\u9009\u62e9\u6587\u4ef6",1500))},children:"\u786e\u5b9a"}),Object(f.jsx)("button",{className:"cancel",onClick:function(e){return x(!1),C(""),R(""),S(""),E(void 0),J(""),void B(!1)},children:"\u53d6\u6d88"})]})]})]})};t.default=Object(o.memo)(h)},97:function(e,t,n){"use strict";var r=n(173),a=n.n(r),o=n(26),u=n(22),i=n(106),c=n(9);t.a=function(e){var t=a.a.create({baseURL:o.a,timeout:15e3});return t.interceptors.request.use((function(e){return e}),(function(e){return console.log(e),e})),t.interceptors.response.use((function(e){return e.data}),(function(e){if(e.response){var t=e.response,n=t.status,r=t.data;if(1*n!==403||"\u8bf7\u767b\u5f55"!==r.message)throw e;u.a.dispatch(Object(i.d)()),u.a.dispatch(Object(i.b)({token:"",userName:"",userId:"",avatarUrl:"",createTime:"",updateTime:"",manage:-1,auth:-1})),Object(c.a)().push({pathname:"/Login"})}})),t.request(e)}}}]);
//# sourceMappingURL=46.a6fc2802.chunk.js.map