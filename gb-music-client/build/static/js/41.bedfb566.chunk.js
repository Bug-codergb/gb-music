(this["webpackJsonpgb-music-react"]=this["webpackJsonpgb-music-react"]||[]).push([[41],{106:function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return g})),n.d(e,"d",(function(){return p}));var r=n(174),a=n.n(r),i=n(175),o=n(499),u=n(115),s=n(108),c=n(45);function l(t){return{type:"changeUserMsg",userMsg:t}}function d(t){return{type:"changeLoginType",loginType:t}}function f(){return function(t){Object(s.f)().then((function(e){var n=e.love,r=e.follow;n||(e.love=[]),r||(e.follow=[]),window.localStorage.setItem("userDetail",JSON.stringify(e)),t({type:"changeUserDetail",userDetail:e})}))}}function g(t,e,n){return function(){var r=Object(i.a)(a.a.mark((function r(i){var g,p;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(u.a)(t,e);case 3:if(!(g=r.sent)){r.next=19;break}return p=g.token,r.next=8,Object(s.l)(p);case 8:return 1*r.sent.code===200&&(i(Object(c.a)("\u60a8\u7684VIP\u5df2\u7ecf\u8fc7\u671f\uff0c\u5f00\u901aVIP\u540e\u7545\u60f3",3500)),g.auth=0,delete g.vip),r.next=12,i(l(g));case 12:return r.next=14,i(d(1));case 14:return window.localStorage.setItem("userMsg",JSON.stringify(g)),window.localStorage.setItem("loginType","1"),r.next=18,i(f());case 18:n.history.push({pathname:"/Home"});case 19:r.next=25;break;case 21:r.prev=21,r.t0=r.catch(0),console.log(r.t0),o.b.warning({content:"\u7528\u6237\u540d\u6216\u8005\u5bc6\u7801\u9519\u8bef",style:{fontSize:"20px",marginTop:"5vh"}});case 25:case"end":return r.stop()}}),r,null,[[0,21]])})));return function(t){return r.apply(this,arguments)}}()}function p(){return function(t){window.localStorage.clear(),t(d(0)),t(l({token:"",userName:"",userId:"",avatarUrl:"",createTime:"",updateTime:"",manage:-1,auth:-1})),t({type:"changeUserDetail",userDetail:{userId:"",userName:"",avatarUrl:"",subscriber:[],thumb:[],follow:[{userId:""}],love:[{songId:""}]}})}}},108:function(t,e,n){"use strict";n.d(e,"k",(function(){return i})),n.d(e,"g",(function(){return o})),n.d(e,"a",(function(){return u})),n.d(e,"i",(function(){return s})),n.d(e,"f",(function(){return c})),n.d(e,"m",(function(){return l})),n.d(e,"b",(function(){return d})),n.d(e,"e",(function(){return f})),n.d(e,"j",(function(){return g})),n.d(e,"l",(function(){return p})),n.d(e,"h",(function(){return h})),n.d(e,"d",(function(){return b})),n.d(e,"c",(function(){return m}));var r=n(97),a=n(22);function i(t){return Object(r.a)({url:"/user/favorite",method:"post",data:{id:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function o(t,e){return Object(r.a)({url:"/user/favorite",params:{offset:t,limit:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function u(t){return Object(r.a)({url:"/user/favorite/cancel",method:"post",data:{songId:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function s(t,e,n){return Object(r.a)({url:"/sub/user/".concat(t),params:{offset:e,limit:n},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function c(){return Object(r.a)({url:"/user/detail",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function l(t){return Object(r.a)({url:"/user/upload/avatar",method:"post",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token,"Content-Type":"multipart/form-data"},data:t})}function d(t){return Object(r.a)({url:"/user/other/detail",method:"post",data:{userId:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function f(t,e,n){return Object(r.a)({url:"/user/channel",method:"post",data:{userId:t,offset:e,limit:n},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function g(t,e,n){return Object(r.a)({url:"/sub/user/playlist",method:"post",params:{offset:e,limit:n},data:{userId:t}})}function p(t){return Object(r.a)({url:"/user/expire",method:"post",headers:{authorization:t}})}function h(){return Object(r.a)({url:"/user/data/moment",method:"post",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function b(t,e){return Object(r.a)({url:"/user/moment",method:"post",data:{offset:t,limit:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function m(t){return Object(r.a)({url:"/user/simple",params:{userId:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}},115:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}));var r=n(97);function a(t,e){return Object(r.a)({url:"/login",method:"post",data:{userName:t,password:e}})}function i(t,e){return Object(r.a)({url:"/register",method:"post",data:{userName:t,password:e}})}},122:function(t,e,n){"use strict";function r(t,e){var n=new Date(t);/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));var r={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds()};for(var i in r)if(new RegExp("(".concat(i,")")).test(e)){var o=r[i]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?o:a(o))}return e||""}function a(t){return("00"+t).substr(t.length)}n.d(e,"a",(function(){return r}))},143:function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},239:function(t,e,n){"use strict";n.d(e,"h",(function(){return o})),n.d(e,"c",(function(){return u})),n.d(e,"i",(function(){return s})),n.d(e,"g",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"b",(function(){return d})),n.d(e,"f",(function(){return f})),n.d(e,"d",(function(){return g})),n.d(e,"a",(function(){return p})),n.d(e,"j",(function(){return h}));var r=n(143),a=n(97),i=n(22);function o(t,e,n,o){return Object(a.a)({url:"/message/".concat(t),method:"post",data:Object(r.a)({content:e},n,o),headers:{authorization:i.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function u(){return Object(a.a)({url:"/message",headers:{authorization:i.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function s(t){return Object(a.a)({url:"/message/read",method:"post",data:{id:t},headers:{authorization:i.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function c(t,e){return Object(a.a)({url:"/message/detail/video",method:"post",data:{offset:t,limit:e},headers:{authorization:i.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function l(t,e){return Object(a.a)({url:"/message/detail/comment",method:"post",data:{offset:t,limit:e},headers:{authorization:i.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function d(t,e){return Object(a.a)({url:"/message/detail/album",method:"post",data:{offset:t,limit:e},headers:{authorization:i.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function f(t,e){return Object(a.a)({url:"/message/detail/playlist",method:"post",data:{offset:t,limit:e},headers:{authorization:i.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function g(t,e){return Object(a.a)({url:"/message/detail/channel",method:"post",data:{offset:t,limit:e},headers:{authorization:i.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function p(t){return Object(a.a)({url:"/message/delete",method:"post",data:{id:t},headers:{authorization:i.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function h(t){return Object(a.a)({url:"/message/read/single",method:"post",data:{id:t},headers:{authorization:i.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}},240:function(t,e,n){"use strict";function r(t,e){for(var n=[],r=0;r<Math.ceil(t/e)*e-t;r++)n.push(r);return n}n.d(e,"a",(function(){return r}))},250:function(t,e,n){"use strict";var r,a=n(0),i=n(11),o=n(12).a.div(r||(r=Object(i.a)(["\n  position: relative;\n  width: ",";\n  .img-container {\n    width: ",";\n    height: ",";\n    overflow: hidden;\n    border-radius: 3px;\n    background-color: #fff;\n    position: relative;\n    img {\n      width: 100%;\n      position: absolute;\n      left: 50%;\n      top: 50%;\n      transform: translate(-50%, -50%);\n    }\n  }\n  .play-count {\n    position: absolute;\n    left: 100%;\n    top: 0;\n    color: #fff;\n    transform: translate(-110%, 10%);\n    white-space: nowrap;\n  }\n  .dt {\n    position: absolute;\n    top: 100%;\n    left: 100%;\n    color: #fff;\n    transform: translate(-110%, -110%);\n  }\n  .state {\n    margin: 10px 0 5px 0;\n    color: #373737;\n  }\n  .user-name {\n    color: #507daf;\n    font-size: 12px;\n    cursor: pointer;\n  }\n"])),(function(t){return t.widthProps}),(function(t){return t.widthProps}),(function(t){return parseInt(t.widthProps)*t.scale+"px"})),u=n(122),s=n(2),c=function(t){var e=t.img,n=t.state,r=t.playCount,a=t.isShowPlayCount,i=t.itemWidth,c=t.scale,l=t.dt,d=t.userName,f=t.cover,g=t.onClick,p=function(){g&&g()};return Object(s.jsxs)(o,{widthProps:i,scale:c,children:[Object(s.jsxs)("div",{className:"img-container",children:[f,e,l&&Object(s.jsx)("div",{className:"dt",children:Object(u.a)(l,"mm:ss")})]}),Object(s.jsx)("div",{className:"state text-nowrap",children:n}),Object(s.jsxs)("div",{className:"play-count",children:[a&&Object(s.jsx)("i",{className:"iconfont icon-play",children:" "}),r]}),d&&Object(s.jsx)("div",{className:"user-name",onClick:function(t){return p()},children:d})]})};e.a=Object(a.memo)(c)},381:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"l",(function(){return o})),n.d(e,"k",(function(){return u})),n.d(e,"j",(function(){return s})),n.d(e,"b",(function(){return c})),n.d(e,"h",(function(){return l})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return f})),n.d(e,"i",(function(){return g})),n.d(e,"a",(function(){return p})),n.d(e,"g",(function(){return h})),n.d(e,"f",(function(){return b}));var r=n(97),a=n(22);function i(t,e){return Object(r.a)({url:"/playlist",method:"post",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token},data:{name:t,desc:e}})}function o(t,e){return Object(r.a)({url:"/playlist/cover",method:"post",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token},params:{pId:e},data:t})}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;return Object(r.a)({url:"/playlist/user",params:{userId:t,offset:e,limit:n}})}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return Object(r.a)({url:"/playlist/recommend",params:{offset:t,limit:e}})}function c(t,e){return Object(r.a)({url:"/playlist/song",method:"post",data:{pId:t,songId:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function l(t){return Object(r.a)({url:"/playlist/detail",params:{id:t}})}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return Object(r.a)({url:"/playlist/cate",params:{offset:t,limit:e}})}function f(t,e,n){return Object(r.a)({url:"/playlist/cate/detail",params:{cateId:t,offset:e,limit:n}})}function g(t,e,n){return Object(r.a)({url:"/playlist/sub/user",params:{id:t,offset:e,limit:n}})}function p(t){return Object(r.a)({url:"/playlist/playCount/add",method:"post",data:{id:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function h(t){return Object(r.a)({url:"/playlist/song/include",params:{id:t}})}function b(){return Object(r.a)({url:"/playlist/hot"})}},517:function(t,e,n){"use strict";n.r(e);var r,a,i,o=n(40),u=n(0),s=n(11),c=n(12),l=c.a.div(r||(r=Object(s.a)(["\n  position: relative;\n  .create-playlist {\n    display: flex;\n    align-items: center;\n    background-color: #f27a7a;\n    padding: 8px 20px;\n    width: 180px;\n    color: #fff;\n    justify-content: space-between;\n    cursor: pointer;\n    border-radius: 25px;\n    span {\n      font-size: 14px;\n    }\n    i {\n      font-size: 20px;\n      margin: 0 0 0 20px;\n    }\n  }\n"]))),d=c.a.div(a||(a=Object(s.a)(["\n  position: absolute;\n  left: 50%;\n  top: 0;\n  transform: translate(-50%, 0);\n  z-index: 9999;\n  .create-my-playlist {\n    padding: 40px;\n    box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);\n    background-color: #fff;\n    border-radius: 5px;\n    color: #373737;\n    textarea {\n      border: 1px solid #f27a7a;\n      resize: none;\n      height: 35px;\n      border-radius: 4px;\n    }\n    .name,\n    .desc {\n      display: flex;\n      align-items: center;\n      margin: 0 0 15px 0;\n      span {\n        white-space: nowrap;\n        margin: 0 15px 0 0;\n      }\n    }\n    .desc{\n      &>textarea{\n        height: 100px;\n      }\n    }\n    .upload-cover {\n      margin: 10px 0 0 0;\n      width: 100%;\n      background-color: #fef4f4;\n      height: 120px;\n      position: relative;\n      line-height: 120px;\n      text-align: center;\n      input {\n        position: absolute;\n        opacity: 0;\n        width: 100%;\n        height: 100%;\n        display: block;\n      }\n      i {\n        font-size: 40px;\n        color: #f38b86;\n      }\n    }\n    .control-btn {\n      margin: 15px 0 0 0;\n      display: flex;\n      justify-content: flex-end;\n      button {\n        font-size: 13px;\n        background-color: #f38b86;\n        color: #fff;\n        padding: 5px 15px;\n        margin: 0 0 0 20px;\n        border-radius: 4px;\n        &:nth-child(2) {\n          background-color: rgba(0, 0, 0, 0.08);\n          color: #000;\n        }\n      }\n    }\n  }\n"]))),f=n(2),g=function(t){var e=t.onClick,n=t.cancelClick,r=Object(u.useState)(""),a=Object(o.a)(r,2),i=a[0],s=a[1],c=Object(u.useState)(""),l=Object(o.a)(c,2),g=l[0],p=l[1],h=Object(u.useState)(null),b=Object(o.a)(h,2),m=b[0],j=b[1],O=function(){e(i,g,m)};return Object(f.jsx)(d,{children:Object(f.jsxs)("div",{className:"create-my-playlist",children:[Object(f.jsxs)("div",{className:"name",children:[Object(f.jsx)("span",{children:"\u540d\u79f0:"}),Object(f.jsx)("textarea",{rows:2,cols:40,value:i,onInput:function(t){return function(t){s(t.target.value)}(t)},children:" "})]}),Object(f.jsxs)("div",{className:"desc",children:[Object(f.jsx)("span",{children:"\u7b80\u4ecb:"}),Object(f.jsx)("textarea",{rows:10,cols:40,value:g,onInput:function(t){return function(t){p(t.target.value)}(t)},children:" "})]}),Object(f.jsx)("div",{children:"\u6dfb\u52a0\u5c01\u9762"}),Object(f.jsxs)("div",{className:"upload-cover",children:[Object(f.jsx)("input",{type:"file",onChange:function(t){!function(t){t.target.files&&j(t.target.files[0])}(t)}}),Object(f.jsx)("i",{className:"iconfont icon-tupian",children:" "})]}),Object(f.jsxs)("div",{className:"control-btn",children:[Object(f.jsx)("button",{onClick:function(t){return O()},children:"\u786e\u5b9a"}),Object(f.jsx)("button",{onClick:function(t){n()},children:"\u53d6\u6d88"})]})]})})},p=Object(u.memo)(g),h=n(19),b=n(3),m=n(10),j=n(381),O=n(250),x=c.a.div(i||(i=Object(s.a)(["\n  margin: 30px 0 0 0;\n  .play-list {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-between;\n    li.play-list-item {\n      width: 150px;\n      margin: 0 0 20px 0;\n    }\n    li {\n      width: 150px;\n    }\n  }\n  .empty-tip {\n    padding: 100px 0;\n  }\n"]))),v=n(240),y=Object(u.memo)((function(t){var e=Object(u.useState)([]),n=Object(o.a)(e,2),r=n[0],a=n[1],i=Object(m.c)((function(t){return{userMsg:t.getIn(["loginReducer","login","userMsg"])}})).userMsg;Object(u.useEffect)((function(){Object(j.k)(i.userId,0,30).then((function(t){t&&0!==t.playlist&&a(t.playlist)}))}),[i.userId]);return Object(f.jsxs)(x,{children:[Object(f.jsxs)("ul",{className:"play-list",children:[0!==r.length&&r.map((function(e,n){return Object(f.jsx)("li",{className:"play-list-item",children:Object(f.jsx)(O.a,{img:Object(f.jsx)("img",{src:e.coverUrl,alt:"",onClick:function(n){return function(e,n){t.history.push({pathname:"/Home/playlistDetail",state:{id:e.id}})}(e)}}),state:Object(f.jsx)("span",{children:e.name}),playCount:e.playCount,isShowPlayCount:!0,itemWidth:"150px",scale:1})},e.id)})),r&&Object(v.a)(r.length,7).map((function(t){return Object(f.jsx)("li",{children:" "},t)}))]}),0===r.length&&Object(f.jsx)("div",{className:"empty-tip",children:Object(f.jsx)(h.a,{description:"\u6682\u65e0\u6b4c\u5355"})})]})})),k=Object(b.h)(y),I=n(239),w=function(){var t=Object(u.useState)(!1),e=Object(o.a)(t,2),n=e[0],r=e[1],a=Object(u.useState)(0),i=Object(o.a)(a,2),s=i[0],c=i[1];return Object(f.jsxs)(l,{children:[Object(f.jsxs)("div",{className:"create-playlist",onClick:function(t){r(!0)},children:[Object(f.jsx)("span",{children:"\u65b0\u5efa\u6b4c\u5355"}),Object(f.jsx)("i",{className:"iconfont icon-jia1",children:" "})]}),n&&Object(f.jsx)(p,{onClick:function(t,e,n){return function(t,e,n){Object(j.c)(t,e).then((function(t){var e=t.id,r=new FormData;r.append("cover",n),Object(j.l)(r,e).then((function(t){c(s+1)})),Object(I.h)("/playlist","\u521b\u5efa\u4e86","pId",e)})),r(!1)}(t,e,n)},cancelClick:function(t){r(!1)}}),Object(f.jsx)(k,{},s)]})};e.default=Object(u.memo)(w)},97:function(t,e,n){"use strict";var r=n(173),a=n.n(r),i=n(26),o=n(22),u=n(106),s=n(9);e.a=function(t){var e=a.a.create({baseURL:i.a,timeout:15e3});return e.interceptors.request.use((function(t){return t}),(function(t){return console.log(t),t})),e.interceptors.response.use((function(t){return t.data}),(function(t){if(t.response){var e=t.response,n=e.status,r=e.data;if(1*n!==403||"\u8bf7\u767b\u5f55"!==r.message)throw t;o.a.dispatch(Object(u.d)()),o.a.dispatch(Object(u.b)({token:"",userName:"",userId:"",avatarUrl:"",createTime:"",updateTime:"",manage:-1,auth:-1})),Object(s.a)().push({pathname:"/Login"})}})),e.request(t)}}}]);
//# sourceMappingURL=41.bedfb566.chunk.js.map