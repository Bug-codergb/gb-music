(this["webpackJsonpgb-music-react"]=this["webpackJsonpgb-music-react"]||[]).push([[51],{106:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return p}));var r=n(174),a=n.n(r),o=n(175),u=n(499),i=n(115),s=n(108),c=n(45);function l(e){return{type:"changeUserMsg",userMsg:e}}function d(e){return{type:"changeLoginType",loginType:e}}function f(){return function(e){Object(s.f)().then((function(t){var n=t.love,r=t.follow;n||(t.love=[]),r||(t.follow=[]),window.localStorage.setItem("userDetail",JSON.stringify(t)),e({type:"changeUserDetail",userDetail:t})}))}}function g(e,t,n){return function(){var r=Object(o.a)(a.a.mark((function r(o){var g,p;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(i.a)(e,t);case 3:if(!(g=r.sent)){r.next=19;break}return p=g.token,r.next=8,Object(s.l)(p);case 8:return 1*r.sent.code===200&&(o(Object(c.a)("\u60a8\u7684VIP\u5df2\u7ecf\u8fc7\u671f\uff0c\u5f00\u901aVIP\u540e\u7545\u60f3",3500)),g.auth=0,delete g.vip),r.next=12,o(l(g));case 12:return r.next=14,o(d(1));case 14:return window.localStorage.setItem("userMsg",JSON.stringify(g)),window.localStorage.setItem("loginType","1"),r.next=18,o(f());case 18:n.history.push({pathname:"/Home"});case 19:r.next=25;break;case 21:r.prev=21,r.t0=r.catch(0),console.log(r.t0),u.b.warning({content:"\u7528\u6237\u540d\u6216\u8005\u5bc6\u7801\u9519\u8bef",style:{fontSize:"20px",marginTop:"5vh"}});case 25:case"end":return r.stop()}}),r,null,[[0,21]])})));return function(e){return r.apply(this,arguments)}}()}function p(){return function(e){window.localStorage.clear(),e(d(0)),e(l({token:"",userName:"",userId:"",avatarUrl:"",createTime:"",updateTime:"",manage:-1,auth:-1})),e({type:"changeUserDetail",userDetail:{userId:"",userName:"",avatarUrl:"",subscriber:[],thumb:[],follow:[{userId:""}],love:[{songId:""}]}})}}},108:function(e,t,n){"use strict";n.d(t,"k",(function(){return o})),n.d(t,"g",(function(){return u})),n.d(t,"a",(function(){return i})),n.d(t,"i",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"m",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"j",(function(){return g})),n.d(t,"l",(function(){return p})),n.d(t,"h",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return b}));var r=n(97),a=n(22);function o(e){return Object(r.a)({url:"/user/favorite",method:"post",data:{id:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function u(e,t){return Object(r.a)({url:"/user/favorite",params:{offset:e,limit:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function i(e){return Object(r.a)({url:"/user/favorite/cancel",method:"post",data:{songId:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function s(e,t,n){return Object(r.a)({url:"/sub/user/".concat(e),params:{offset:t,limit:n},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function c(){return Object(r.a)({url:"/user/detail",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function l(e){return Object(r.a)({url:"/user/upload/avatar",method:"post",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token,"Content-Type":"multipart/form-data"},data:e})}function d(e){return Object(r.a)({url:"/user/other/detail",method:"post",data:{userId:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function f(e,t,n){return Object(r.a)({url:"/user/channel",method:"post",data:{userId:e,offset:t,limit:n},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function g(e,t,n){return Object(r.a)({url:"/sub/user/playlist",method:"post",params:{offset:t,limit:n},data:{userId:e}})}function p(e){return Object(r.a)({url:"/user/expire",method:"post",headers:{authorization:e}})}function h(){return Object(r.a)({url:"/user/data/moment",method:"post",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function m(e,t){return Object(r.a)({url:"/user/moment",method:"post",data:{offset:e,limit:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function b(e){return Object(r.a)({url:"/user/simple",params:{userId:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}},115:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var r=n(97);function a(e,t){return Object(r.a)({url:"/login",method:"post",data:{userName:e,password:t}})}function o(e,t){return Object(r.a)({url:"/register",method:"post",data:{userName:e,password:t}})}},533:function(e,t,n){"use strict";n.r(t);var r=n(40),a=n(0),o=n(97),u=n(22);var i,s=n(11),c=n(12).a.div(i||(i=Object(s.a)(["\n  background-color: #fff;\n  padding: 20px 0;\n  .fan-list {\n    display: flex;\n    flex-wrap: wrap;\n    & > li {\n      display: flex;\n      align-items: center;\n      padding: 20px 30px 20px 20px;\n      border-left: 2px solid #f3f3f3;\n      border-bottom: 2px solid #f3f3f3;\n      .right-msg {\n        display: flex;\n        & > div {\n          padding: 0 10px;\n          .name {\n            font-size: 14px;\n            color: #999999;\n          }\n          .value {\n            font-weight: bold;\n            font-size: 18px;\n            color: #333;\n          }\n        }\n      }\n    }\n    .img-container {\n      width: 120px;\n      height: 120px;\n      background-color: #000c17;\n      position: relative;\n      border-radius: 8px;\n      overflow: hidden;\n      img {\n        position: absolute;\n        left: 50%;\n        top: 50%;\n        transform: translate(-50%, -50%);\n        width: 100%;\n      }\n    }\n  }\n  .fans-empty {\n    padding: 200px 0;\n    display: flex;\n    justify-content: center;\n  }\n"]))),l=n(3),d=n(19),f=n(2),g=function(e){var t=Object(a.useState)([]),n=Object(r.a)(t,2),i=n[0],s=n[1],l=Object(a.useState)(0),g=Object(r.a)(l,2),p=(g[0],g[1]);Object(a.useEffect)((function(){var e,t;(e=0,t=30,Object(o.a)({url:"/user/fans",method:"post",headers:{authorization:u.a.getState().getIn(["loginReducer","login","userMsg"]).token},params:{offset:e,limit:t}})).then((function(e){s(e.fans),p(e.count)}))}),[]);return Object(f.jsxs)(c,{children:[Object(f.jsx)("ul",{className:"fan-list",children:i&&0!==i.length&&i.map((function(t,n){var r,a;return Object(f.jsxs)("li",{children:[Object(f.jsx)("div",{className:"img-container",onClick:function(n){return function(t){e.history.push({pathname:"/Home/userDetail",state:{userId:t.user.userId}})}(t)},children:Object(f.jsx)("img",{src:null===(r=t.user)||void 0===r?void 0:r.avatarUrl,alt:null===(a=t.user)||void 0===a?void 0:a.userName})}),Object(f.jsxs)("div",{className:"right-msg",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{className:"name",children:"\u89c6\u9891\u6570"}),Object(f.jsx)("p",{className:"value",children:t.videoCount})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{className:"name",children:"\u52a8\u6001\u6570"}),Object(f.jsx)("p",{className:"value",children:t.momentCount})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{className:"name",children:"\u58f0\u97f3\u6570"}),Object(f.jsx)("p",{className:"value",children:t.channelCount})]})]})]},t.id)}))}),i&&0===i.length&&Object(f.jsx)("div",{className:"fans-empty",children:Object(f.jsx)(d.a,{image:d.a.PRESENTED_IMAGE_SIMPLE,description:"\u6682\u65e0\u7c89\u4e1d\u54e6"})})]})};t.default=Object(l.h)(Object(a.memo)(g))},97:function(e,t,n){"use strict";var r=n(173),a=n.n(r),o=n(26),u=n(22),i=n(106),s=n(9);t.a=function(e){var t=a.a.create({baseURL:o.a,timeout:15e3});return t.interceptors.request.use((function(e){return e}),(function(e){return console.log(e),e})),t.interceptors.response.use((function(e){return e.data}),(function(e){if(e.response){var t=e.response,n=t.status,r=t.data;if(1*n!==403||"\u8bf7\u767b\u5f55"!==r.message)throw e;u.a.dispatch(Object(i.d)()),u.a.dispatch(Object(i.b)({token:"",userName:"",userId:"",avatarUrl:"",createTime:"",updateTime:"",manage:-1,auth:-1})),Object(s.a)().push({pathname:"/Login"})}})),t.request(e)}}}]);
//# sourceMappingURL=51.b68c23fa.chunk.js.map