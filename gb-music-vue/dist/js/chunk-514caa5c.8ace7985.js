(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-514caa5c"],{"026a":function(t,e,i){},1138:function(t,e,i){"use strict";i("2a84")},1733:function(t,e,i){},2532:function(t,e,i){"use strict";var n=i("23e7"),a=i("5a34"),s=i("1d80"),r=i("ab13");n({target:"String",proto:!0,forced:!r("includes")},{includes:function(t){return!!~String(s(this)).indexOf(a(t),arguments.length>1?arguments[1]:void 0)}})},"2a84":function(t,e,i){},"3c13":function(t,e,i){"use strict";i("026a")},"42e2":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"detail-album"},[i("div",{staticClass:"header"},[i("div",{staticClass:"img-container"},[i("img",{attrs:{src:t.albumDetail.coverUrl}})]),i("div",{staticClass:"msg"},[i("div",{staticClass:"title"},[t._v(t._s(t.albumDetail.name))]),i("div",{staticClass:"artist-msg"},[i("div",{staticClass:"avatar"},[i("img",{attrs:{src:t.albumDetail.artist.avatarUrl}})]),i("div",{staticClass:"artist-name"},[t._v(t._s(t.albumDetail.artist.name))])]),i("div",{staticClass:"publish-time"},[i("span",[t._v("发行时间:")]),i("span",[t._v(t._s(t.formatTime(parseInt(t.albumDetail.publishTime),"yyyy-MM-dd")))])]),i("div",{staticClass:"publish"},[i("button",{on:{click:t.uploadSong}},[t._v("上传歌曲")]),i("div",{staticClass:"upload-song"},[t.isShow?i("upload",{attrs:{"show-form":"music"},on:{titleInp:t.titleInp,contentInp:t.contentInp,define:t.define,cancel:t.cancel,"select-file":t.change}},[i("span",{attrs:{slot:"title"},slot:"title"},[t._v("名称")]),i("span",{attrs:{slot:"desc-name"},slot:"desc-name"},[t._v("简介")]),i("div",{staticClass:"album-publish-time",attrs:{slot:"time"},slot:"time"},[i("p",[t._v("选择发布时间")]),i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",size:"small","value-format":"timestamp"},model:{value:t.publishTime,callback:function(e){t.publishTime=e},expression:"publishTime"}})],1)]):t._e()],1)])])]),i("div",{staticClass:"content"},[i("tab-control",{attrs:{list:["歌曲列表","专辑详情"]}},[i("SongList",{attrs:{slot:"0","album-detail":t.albumDetail},slot:"0"})],1)],1)])},a=[],s=(i("498a"),i("d3b7"),i("25f0"),i("b8fd")),r=i("6be8"),o=i("9ab1"),l=i("ca85"),c=i("9d9a"),u=i("642b"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.albumDetail.songs?i("ul",{staticClass:"song-list",attrs:{slot:"0"},slot:"0"},t._l(t.albumDetail.songs,(function(e,n){return i("li",{key:e.id},[i("ListInfo",[i("span",{attrs:{slot:"index"},slot:"index"},[t._v(t._s((n+1).toString().padStart(2,"0")))]),i("div",{staticClass:"text-nowrap",attrs:{slot:"state"},slot:"state"},[t._v(t._s(e.name))]),i("span",{attrs:{slot:"creator"},slot:"creator"},[t._v(t._s(t.albumDetail.artist.name))]),i("div",{staticClass:"text-nowrap",attrs:{slot:"time"},slot:"time"},[t._v(t._s(t.albumDetail.name))]),i("span",{attrs:{slot:"duration"},slot:"duration"},[t._v(t._s(t.formatTime(e.dt,"mm:ss")))]),i("span",{staticClass:"song-list-operate",attrs:{slot:"operate"},on:{click:function(i){return t.delSong(e,n)}},slot:"operate"},[i("button",[t._v("删除")])])])],1)})),0):t._e()])},m=[],f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list-info"},[i("div",{staticClass:"index"},[t._t("index")],2),t._m(0),t._m(1),i("div",{staticClass:"song-name"},[t._t("state")],2),i("div",{staticClass:"artist"},[t._t("creator")],2),i("div",{staticClass:"album"},[t._t("time")],2),i("div",{staticClass:"dt"},[t._t("duration")],2),i("div",{staticClass:"operate"},[t._t("operate")],2)])},h=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"love"},[i("i",{staticClass:"iconfont icon-love"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"download"},[i("i",{staticClass:"iconfont icon-download"})])}],p={name:"ListInfo"},v=p,b=(i("b66f"),i("2877")),g=Object(b["a"])(v,f,h,!1,null,"486e8215",null),w=g.exports,_={name:"SongList",components:{ListInfo:w},props:{albumDetail:{type:Object,default:function(){return{}}}},methods:{formatTime:function(t,e){return Object(r["a"])(t,e)},delSong:function(t,e){var i=this,n=confirm("确认永久删除?");n&&Object(s["e"])(t.id,this.albumDetail.id).then((function(t){t&&(i.$delete(i.albumDetail.songs,e),i.$toast.show("删除成功",1200))}))}}},C=_,k=(i("981d"),Object(b["a"])(C,d,m,!1,null,"05f9ceb4",null)),S=k.exports,y={name:"DetailAlbum",components:{SongList:S,TabControl:u["a"],Upload:o["a"]},data:function(){return{albumDetail:{artist:{}},publishTime:"",isShow:!1,title:"",content:"",song:null}},created:function(){var t=this;Object(s["h"])(this.$route.query.albumId).then((function(e){t.albumDetail=e}))},methods:{formatTime:function(t,e){return Object(r["a"])(t,e)},titleInp:function(t){this.title=t},contentInp:function(t){this.content=t},uploadSong:function(){this.isShow=!0},change:function(t){this.song=t},define:function(){var t=this;0===this.title.trim().length?this.$toast.show("歌曲名称不能为空"):0===this.content.trim().length?this.$toast.show("简介不能为空"):this.publishTime?this.song?Object(l["a"])(this.title,this.albumDetail.artist.id,this.albumDetail.id,this.publishTime,this.content).then((function(e){if(e){var i=e.songId,n=new FormData;n.append("song",t.song),Object(c["a"])(t.song).then((function(e){e&&(n.append("dt",e.toString()),Object(l["i"])(n,i).then((function(e){t.isShow=!1})))}))}})):this.$toast.show("请选择歌曲"):this.$toast.show("请选择发布时间")},cancel:function(){this.isShow=!1}}},j=y,O=(i("3c13"),Object(b["a"])(j,n,a,!1,null,"64626ef2",null));e["default"]=O.exports},4739:function(t,e,i){"use strict";i("dd9a")},"4de4":function(t,e,i){"use strict";var n=i("23e7"),a=i("b727").filter,s=i("1dde"),r=s("filter");n({target:"Array",proto:!0,forced:!r},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},5073:function(t,e,i){"use strict";i("d22f")},"5a34":function(t,e,i){var n=i("44e7");t.exports=function(t){if(n(t))throw TypeError("The method doesn't accept regular expressions");return t}},"642b":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tab-control"},[i("ul",{staticClass:"list"},t._l(t.list,(function(e,n){return i("li",{key:e,class:{active:t.currentIndex===n},on:{click:function(i){return t.liClick(e,n)}}},[i("span",[t._v(t._s(e))])])})),0),i("ul",t._l(t.list,(function(e,n){return t.currentIndex===n?i("li",{key:e},[i("div",[t._t(n)],2)]):t._e()})),0)])},a=[],s={name:"TabControl",props:{list:{type:Array,default:function(){return[]}}},data:function(){return{currentIndex:0}},methods:{liClick:function(t,e){this.currentIndex=e}}},r=s,o=(i("5073"),i("2877")),l=Object(o["a"])(r,n,a,!1,null,"7e19d0a9",null);e["a"]=l.exports},"981d":function(t,e,i){"use strict";i("1733")},"9ab1":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload"},[i("div",{staticClass:"state"},[i("div",{staticClass:"title"},[t._t("title")],2),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{cols:"50",rows:"2"},domProps:{value:t.title},on:{input:[function(e){e.target.composing||(t.title=e.target.value)},t.titleInp]}})]),i("div",{staticClass:"desc"},[i("div",{staticClass:"desc-name"},[t._t("desc-name")],2),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{cols:"50",rows:"7"},domProps:{value:t.content},on:{input:[function(e){e.target.composing||(t.content=e.target.value)},t.contentInp]}})]),i("div",{staticClass:"time"},[t._t("time")],2),i("div",{staticClass:"upload-img"},[i("div",{staticClass:"upload-name"},[t._t("upload-name")],2),i("div",{staticClass:"upload-preview"},[i("div",{staticClass:"img-content"},[i("input",{directives:[{name:"show",rawName:"v-show",value:!t.isShowPreview,expression:"!isShowPreview"}],attrs:{type:"file"},on:{change:t.change}}),i("i",{directives:[{name:"show",rawName:"v-show",value:!t.isShowPreview&&"img"===t.showForm,expression:"!isShowPreview && showForm === 'img'"}],staticClass:"iconfont icon-tupian"}),i("img",{directives:[{name:"show",rawName:"v-show",value:t.isShowPreview&&"img"===t.showForm,expression:"isShowPreview && showForm === 'img'"}],attrs:{src:t.imgUrl,alt:""}})]),t._t("vide-content")],2)]),t.cateList.length?i("div",{staticClass:"cate"},[i("div",{staticClass:"cate-name"},[t._t("cate")],2),i("ul",{staticClass:"cate-outer"},t._l(t.cateList,(function(e,n){return i("li",{key:e.id,class:{active:t.currentIndex===n},on:{click:function(i){return t.liClick(e,n)}}},[t._v(" "+t._s(e.name)+" ")])})),0)]):t._e(),t.artists.length?i("div",{staticClass:"artist-list"},[i("div",{staticClass:"artist-title",on:{click:t.showArtist}},[t._t("artistTitle")],2),i("list",{directives:[{name:"show",rawName:"v-show",value:t.isShowArtist,expression:"isShowArtist"}],attrs:{list:t.artists},on:{defineArtist:t.defineArtist,"select-artist":t.artistClick}})],1):t._e(),t.albums.length?i("div",{staticClass:"album-list"},[i("div",{staticClass:"album-title",on:{click:t.showAlbum}},[t._t("albumTitle")],2),i("list",{directives:[{name:"show",rawName:"v-show",value:t.isShowAlbum,expression:"isShowAlbum"}],attrs:{list:t.albums},on:{defineArtist:t.defineAlbum,"select-artist":t.albumClick}})],1):t._e(),i("div",{staticClass:"control-btn"},[i("button",{on:{click:t.define}},[t._v("确定")]),i("button",{on:{click:t.cancel}},[t._v("取消")])])])},a=[],s=(i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list-outer"},[i("div",{staticClass:"list"},[i("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":t.querySearch,placeholder:"请输入相关内容","trigger-on-focus":!1},on:{select:t.handleSelect},model:{value:t.id,callback:function(e){t.id=e},expression:"id"}}),i("div",{staticClass:"control-btn"},[i("button",{on:{click:t.defineList}},[t._v("确定")]),i("button",{on:{click:t.defineList}},[t._v("取消")])])],1)])}),r=[],o=(i("d81d"),i("b0c0"),i("4de4"),i("caad"),i("2532"),{name:"List",data:function(){return{id:"",formatList:[]}},props:{list:{type:Array,default:function(){return[]}}},created:function(){this.formatList=this.list.map((function(t,e){return{id:t.id,name:t.name,value:t.name}}))},methods:{querySearch:function(t,e){var i=this.formatList,n=t?i.filter(this.createFilter(t)):i;e(n)},createFilter:function(t){return function(e){return e.value.toLowerCase().includes(t.toLowerCase())}},defineList:function(){this.$emit("defineArtist")},handleSelect:function(t){this.$emit("select-artist",t)}}}),l=o,c=(i("4739"),i("2877")),u=Object(c["a"])(l,s,r,!1,null,"0ab1528a",null),d=u.exports,m={name:"Upload",components:{List:d},data:function(){return{content:"",title:"",image:null,isShowPreview:!1,imgUrl:"",currentIndex:0,currentArtists:0,isShowArtist:!1,isShowAlbum:!1}},props:{cateList:{type:Array,default:function(){return[]}},artists:{type:Array,default:function(){return[]}},albums:{type:Array,default:function(){return[]}},showForm:{type:String,default:"img"}},methods:{titleInp:function(){this.$emit("titleInp",this.title)},contentInp:function(){this.$emit("contentInp",this.content)},change:function(t){this.imgUrl=URL.createObjectURL(t.target.files[0]),this.isShowPreview=!this.isShowPreview,this.$emit("select-file",t.target.files[0])},liClick:function(t,e){this.currentIndex=e,this.$emit("liClick",t,e)},artistClick:function(t,e){this.$emit("select-artist",t)},albumClick:function(t,e){this.$emit("select-album",t)},showArtist:function(){this.isShowArtist=!0},defineArtist:function(){this.isShowArtist=!1},showAlbum:function(){this.isShowAlbum=!0},defineAlbum:function(){this.isShowAlbum=!1},define:function(){this.$emit("define")},cancel:function(){this.$emit("cancel")}}},f=m,h=(i("1138"),Object(c["a"])(f,n,a,!1,null,"46c6e630",null));e["a"]=h.exports},"9d9a":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d");function n(t){var e=URL.createObjectURL(t),i=document.createElement("audio");return i.setAttribute("src",e),new Promise((function(t,e){i.oncanplay=function(){t(1e3*i.duration)}}))}},ab13:function(t,e,i){var n=i("b622"),a=n("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[a]=!1,"/./"[t](e)}catch(n){}}return!1}},b66f:function(t,e,i){"use strict";i("d573")},b8fd:function(t,e,i){"use strict";i.d(e,"f",(function(){return s})),i.d(e,"b",(function(){return r})),i.d(e,"a",(function(){return o})),i.d(e,"l",(function(){return l})),i.d(e,"i",(function(){return c})),i.d(e,"h",(function(){return u})),i.d(e,"j",(function(){return d})),i.d(e,"c",(function(){return m})),i.d(e,"e",(function(){return f})),i.d(e,"g",(function(){return h})),i.d(e,"k",(function(){return p})),i.d(e,"d",(function(){return v}));var n=i("1bab"),a=i("4360");function s(){return Object(n["a"])({url:"/album/cate"})}function r(t){return Object(n["a"])({url:"/album/cate",data:{name:t},method:"post",headers:{authorization:a["a"].state.userMsg.token}})}function o(t,e,i,s,r){return Object(n["a"])({url:"/album",data:{name:t,description:e,publishTime:i,arId:s,cateId:r},method:"post",headers:{authorization:a["a"].state.userMsg.token}})}function l(t,e){return Object(n["a"])({url:"/album/upload/cover",data:t,method:"post",params:{id:e},headers:{"Content-type":"multipart/form-data",authorization:a["a"].state.userMsg.token}})}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return Object(n["a"])({url:"/album/all",params:{offset:t,limit:e}})}function u(t){return Object(n["a"])({url:"/album/detail",params:{albumId:t}})}function d(t,e,i,a){return Object(n["a"])({url:"/album/cate/detail",params:{id:t,offset:i,limit:a,keyword:e}})}function m(t){return Object(n["a"])({url:"/album/delete",data:{id:t},method:"post",headers:{authorization:a["a"].state.userMsg.token}})}function f(t,e){return Object(n["a"])({url:"/album/song/delete",method:"post",headers:{authorization:a["a"].state.userMsg.token},data:{songId:t,alId:e}})}function h(){return Object(n["a"])({url:"/album/data"})}function p(t,e,i,s){return Object(n["a"])({url:"/album/update",method:"post",data:{alId:t,name:e,desc:i,publishTime:s},headers:{authorization:a["a"].state.userMsg.token}})}function v(t){return Object(n["a"])({url:"/album/cate/delete",method:"post",data:{id:t},headers:{authorization:a["a"].state.userMsg.token}})}},ca85:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"i",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"h",(function(){return l})),i.d(e,"g",(function(){return c})),i.d(e,"b",(function(){return u})),i.d(e,"d",(function(){return d})),i.d(e,"e",(function(){return m})),i.d(e,"f",(function(){return f}));var n=i("1bab"),a=i("4360");function s(t,e,i,s,r){return Object(n["a"])({url:"/song",data:{name:t,arId:e,alId:i,publishTime:s,alia:r},method:"post",headers:{authorization:a["a"].state.userMsg.token}})}function r(t,e){return Object(n["a"])({url:"/song/upload",params:{songId:e},data:t,method:"post",headers:{authorization:a["a"].state.userMsg.token,"Content-type":"multipart/form-data"}})}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,i=arguments.length>2?arguments[2]:void 0;return Object(n["a"])({url:"/song/all",params:{offset:t,limit:e,keyword:i}})}function l(t,e){return Object(n["a"])({url:"/song/lyric",method:"post",data:{id:t,lyric:e},headers:{authorization:a["a"].state.userMsg.token}})}function c(t,e){return Object(n["a"])({url:"/song/vip/update",method:"post",data:{vip:e,id:t},headers:{authorization:a["a"].state.userMsg.token}})}function u(t){return Object(n["a"])({url:"/song/delete",method:"post",data:{id:t},headers:{authorization:a["a"].state.userMsg.token}})}function d(t){return Object(n["a"])({url:"/artist/mv",params:{id:t}})}function m(t){return Object(n["a"])({url:"/song/lyric",params:{id:t}})}function f(t,e,i,s,r,o){return Object(n["a"])({url:"/song/update",method:"post",data:{id:t,name:e,alia:i,publishTime:s,vip:r,lyric:o},headers:{authorization:a["a"].state.userMsg.token}})}},caad:function(t,e,i){"use strict";var n=i("23e7"),a=i("4d64").includes,s=i("44d2");n({target:"Array",proto:!0},{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),s("includes")},d22f:function(t,e,i){},d573:function(t,e,i){},d81d:function(t,e,i){"use strict";var n=i("23e7"),a=i("b727").map,s=i("1dde"),r=s("map");n({target:"Array",proto:!0,forced:!r},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},dd9a:function(t,e,i){}}]);
//# sourceMappingURL=chunk-514caa5c.8ace7985.js.map