(this["webpackJsonpgb-music-react"]=this["webpackJsonpgb-music-react"]||[]).push([[45],{106:function(n,e,t){"use strict";t.d(e,"b",(function(){return l})),t.d(e,"a",(function(){return f})),t.d(e,"c",(function(){return g})),t.d(e,"d",(function(){return h}));var r=t(174),a=t.n(r),o=t(175),i=t(499),c=t(115),u=t(108),s=t(45);function l(n){return{type:"changeUserMsg",userMsg:n}}function d(n){return{type:"changeLoginType",loginType:n}}function f(){return function(n){Object(u.f)().then((function(e){var t=e.love,r=e.follow;t||(e.love=[]),r||(e.follow=[]),window.localStorage.setItem("userDetail",JSON.stringify(e)),n({type:"changeUserDetail",userDetail:e})}))}}function g(n,e,t){return function(){var r=Object(o.a)(a.a.mark((function r(o){var g,h;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(c.a)(n,e);case 3:if(!(g=r.sent)){r.next=19;break}return h=g.token,r.next=8,Object(u.l)(h);case 8:return 1*r.sent.code===200&&(o(Object(s.a)("\u60a8\u7684VIP\u5df2\u7ecf\u8fc7\u671f\uff0c\u5f00\u901aVIP\u540e\u7545\u60f3",3500)),g.auth=0,delete g.vip),r.next=12,o(l(g));case 12:return r.next=14,o(d(1));case 14:return window.localStorage.setItem("userMsg",JSON.stringify(g)),window.localStorage.setItem("loginType","1"),r.next=18,o(f());case 18:t.history.push({pathname:"/Home"});case 19:r.next=25;break;case 21:r.prev=21,r.t0=r.catch(0),console.log(r.t0),i.b.warning({content:"\u7528\u6237\u540d\u6216\u8005\u5bc6\u7801\u9519\u8bef",style:{fontSize:"20px",marginTop:"5vh"}});case 25:case"end":return r.stop()}}),r,null,[[0,21]])})));return function(n){return r.apply(this,arguments)}}()}function h(){return function(n){window.localStorage.clear(),n(d(0)),n(l({token:"",userName:"",userId:"",avatarUrl:"",createTime:"",updateTime:"",manage:-1,auth:-1})),n({type:"changeUserDetail",userDetail:{userId:"",userName:"",avatarUrl:"",subscriber:[],thumb:[],follow:[{userId:""}],love:[{songId:""}]}})}}},108:function(n,e,t){"use strict";t.d(e,"k",(function(){return o})),t.d(e,"g",(function(){return i})),t.d(e,"a",(function(){return c})),t.d(e,"i",(function(){return u})),t.d(e,"f",(function(){return s})),t.d(e,"m",(function(){return l})),t.d(e,"b",(function(){return d})),t.d(e,"e",(function(){return f})),t.d(e,"j",(function(){return g})),t.d(e,"l",(function(){return h})),t.d(e,"h",(function(){return p})),t.d(e,"d",(function(){return b})),t.d(e,"c",(function(){return m}));var r=t(97),a=t(22);function o(n){return Object(r.a)({url:"/user/favorite",method:"post",data:{id:n},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function i(n,e){return Object(r.a)({url:"/user/favorite",params:{offset:n,limit:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function c(n){return Object(r.a)({url:"/user/favorite/cancel",method:"post",data:{songId:n},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function u(n,e,t){return Object(r.a)({url:"/sub/user/".concat(n),params:{offset:e,limit:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function s(){return Object(r.a)({url:"/user/detail",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function l(n){return Object(r.a)({url:"/user/upload/avatar",method:"post",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token,"Content-Type":"multipart/form-data"},data:n})}function d(n){return Object(r.a)({url:"/user/other/detail",method:"post",data:{userId:n},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function f(n,e,t){return Object(r.a)({url:"/user/channel",method:"post",data:{userId:n,offset:e,limit:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function g(n,e,t){return Object(r.a)({url:"/sub/user/playlist",method:"post",params:{offset:e,limit:t},data:{userId:n}})}function h(n){return Object(r.a)({url:"/user/expire",method:"post",headers:{authorization:n}})}function p(){return Object(r.a)({url:"/user/data/moment",method:"post",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function b(n,e){return Object(r.a)({url:"/user/moment",method:"post",data:{offset:n,limit:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function m(n){return Object(r.a)({url:"/user/simple",params:{userId:n},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}},115:function(n,e,t){"use strict";t.d(e,"a",(function(){return a})),t.d(e,"b",(function(){return o}));var r=t(97);function a(n,e){return Object(r.a)({url:"/login",method:"post",data:{userName:n,password:e}})}function o(n,e){return Object(r.a)({url:"/register",method:"post",data:{userName:n,password:e}})}},122:function(n,e,t){"use strict";function r(n,e){var t=new Date(n);/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var r={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var o in r)if(new RegExp("(".concat(o,")")).test(e)){var i=r[o]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?i:a(i))}return e||""}function a(n){return("00"+n).substr(n.length)}t.d(e,"a",(function(){return r}))},376:function(n,e,t){"use strict";t.d(e,"e",(function(){return o})),t.d(e,"h",(function(){return i})),t.d(e,"f",(function(){return c})),t.d(e,"a",(function(){return u})),t.d(e,"p",(function(){return s})),t.d(e,"n",(function(){return l})),t.d(e,"m",(function(){return d})),t.d(e,"b",(function(){return f})),t.d(e,"d",(function(){return g})),t.d(e,"c",(function(){return h})),t.d(e,"i",(function(){return p})),t.d(e,"j",(function(){return b})),t.d(e,"k",(function(){return m})),t.d(e,"l",(function(){return j})),t.d(e,"g",(function(){return O})),t.d(e,"o",(function(){return x}));var r=t(97),a=t(22);function o(){return Object(r.a)({url:"/channel/all"})}function i(n,e,t){return Object(r.a)({url:"/channel/content",params:{id:n,offset:e,limit:t}})}function c(n,e,t){return Object(r.a)({url:"/channel/detail",params:{id:n,offset:e,limit:t}})}function u(n,e,t){return Object(r.a)({url:"/channel/content/add",method:"post",data:{cId:n,name:e,description:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function s(n){return Object(r.a)({url:"/channel/content/upload",data:n,method:"post",headers:{"Content-type":"multipart/form-data",authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function l(n){return Object(r.a)({url:"/channel/count",params:{userId:n}})}function d(n,e,t,a){return Object(r.a)({url:"/channel/user",params:{userId:n,cId:e,offset:t,limit:a}})}function f(n,e){return Object(r.a)({url:"/channel/program",method:"post",data:{name:n,cId:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function g(n,e){return Object(r.a)({url:"/channel/program/source",method:"post",params:{id:n},data:e,headers:{"Content-type":"multipart/form-data",authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function h(n){return Object(r.a)({url:"/channel/playCount",method:"post",data:{id:n},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function p(){return Object(r.a)({url:"/channel/hot"})}function b(){return Object(r.a)({url:"/channel/content/hot"})}function m(n){return Object(r.a)({url:"/channel/program/detail",params:{id:n}})}function j(n){return Object(r.a)({url:"/channel/program/url",params:{id:n}})}function O(n,e,t){return Object(r.a)({url:"/channel/sub/user",params:{cId:n,offset:e,limit:t}})}function x(){return Object(r.a)({url:"/channel/program/list",method:"post",data:{},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}},400:function(n,e,t){"use strict";function r(n){return new Promise((function(e,t){var r=document.createElement("canvas"),a=r.getContext("2d"),o=document.createElement("video");o.setAttribute("controls","controls"),o.src=n,o.currentTime=1,o.oncanplay=function(){r.height=o.videoHeight,r.width=o.videoWidth,a.drawImage(o,0,0,o.videoWidth,o.videoHeight);var n=r.toDataURL("image/png");e(n)}}))}function a(n){var e=URL.createObjectURL(n),t=document.createElement("video");return t.setAttribute("src",e),new Promise((function(n,e){t.oncanplay=function(){n(1e3*t.duration)}}))}function o(n){var e=URL.createObjectURL(n),t=document.createElement("audio");return t.setAttribute("src",e),new Promise((function(n,e){t.oncanplay=function(){n(1e3*t.duration)}}))}t.d(e,"b",(function(){return r})),t.d(e,"c",(function(){return a})),t.d(e,"a",(function(){return o}))},419:function(n,e,t){"use strict";var r,a=t(40),o=t(0),i=t(11),c=t(12).a.div(r||(r=Object(i.a)(["\n  background-color: #fff;\n  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n  padding: 40px 50px;\n  border-radius: 8px;\n  .name {\n    display: flex;\n    align-items: flex-start;\n    margin: 0 0 20px 0;\n    span {\n      margin: 0 5px 0 0;\n      white-space: nowrap;\n    }\n    textarea {\n      resize: none;\n      border: 1px solid #dbd9d2;\n    }\n  }\n  .prev-outer {\n    display: flex;\n    background-color: #f2f2f2;\n    height: 100px;\n    margin: 0 0 20px 0;\n    .prev-img {\n      flex: 1;\n      height: 100%;\n      border-right: 1px dotted #cccac1;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      i {\n        font-size: 38px;\n        color: #f27a7a;\n      }\n    }\n    .prev-vio {\n      flex: 1;\n      height: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      i {\n        font-size: 40px;\n        color: #ec4141;\n      }\n    }\n    .prev-channel {\n      flex: 1;\n      height: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    .prev-vio,\n    .prev-img,\n    .prev-channel {\n      position: relative;\n      input {\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        opacity: 0;\n        cursor: pointer;\n      }\n      img {\n        height: 100%;\n      }\n    }\n  }\n  .control-btn {\n    display: flex;\n    justify-content: flex-end;\n    button {\n      font-size: 13px;\n      padding: 5px 15px;\n      margin: 0 0 0 30px;\n      border-radius: 3px;\n      &:nth-child(1) {\n        background-color: #f27a7a;\n        color: #fff;\n      }\n      &:nth-child(2) {\n        background-color: #efefef;\n        color: #000000;\n      }\n    }\n  }\n"]))),u=t(400),s=t(2),l=function(n){var e=n.names,t=n.defineBtn,r=n.cancelBtn,i=n.isShowImgPrev,l=n.isShowVioPrev,d=n.isShowChannelPrev,f=Object(o.useState)(!1),g=Object(a.a)(f,2),h=g[0],p=g[1],b=Object(o.useState)(!1),m=Object(a.a)(b,2),j=m[0],O=m[1],x=Object(o.useState)(""),v=Object(a.a)(x,2),w=v[0],S=v[1],y=Object(o.useState)(""),I=Object(a.a)(y,2),k=I[0],R=I[1],z=Object(o.useState)(0),M=Object(a.a)(z,2),N=M[0],T=M[1],U=Object(o.useState)(),C=Object(a.a)(U,2),L=C[0],P=C[1],E=Object(o.useState)(),D=Object(a.a)(E,2),B=D[0],H=D[1],J=Object(o.useState)(),V=Object(a.a)(J,2),$=V[0],A=V[1];return Object(s.jsxs)(c,{children:[0!==e.length&&e.map((function(n,e){return Object(s.jsxs)("div",{className:"name",children:[Object(s.jsxs)("span",{children:[n.name,":"]}),Object(s.jsx)("textarea",{cols:n.cols,rows:n.rows,onChange:function(e){return n.fn(e)},children:" "})]})})),Object(s.jsxs)("div",{className:"prev-outer",children:[i&&Object(s.jsxs)("div",{className:"prev-img",children:[!h&&Object(s.jsx)("input",{type:"file",title:"\u8bf7\u4e0a\u4f20\u5c01\u9762",onChange:function(n){return function(n){if(n.currentTarget.files){var e=n.currentTarget.files[0];P(e);var t=URL.createObjectURL(e);S(t),p(!0)}}(n)}}),!h&&Object(s.jsx)("i",{className:"iconfont icon-tupian",children:" "}),h&&Object(s.jsx)("img",{src:w,alt:"\u5c01\u9762"})]}),l&&Object(s.jsxs)("div",{className:"prev-vio",children:[!j&&Object(s.jsx)("input",{type:"file",title:"\u8bf7\u4e0a\u4f20\u89c6\u9891",onChange:function(n){return function(n){if(n.currentTarget.files){var e=n.currentTarget.files[0],t=URL.createObjectURL(e);H(e),Object(u.b)(t).then((function(n){Object(u.c)(e).then((function(n){T(n)})),R(n),O(!0)}))}}(n)}}),!j&&Object(s.jsx)("i",{className:"iconfont icon-video",children:" "}),j&&Object(s.jsx)("img",{src:k,alt:"\u89c6\u9891"})]}),d&&Object(s.jsx)("div",{className:"prev-channel",title:"\u8bf7\u9009\u62e9\u58f0\u97f3",children:Object(s.jsx)("input",{type:"file",onChange:function(n){return function(n){if(n.currentTarget.files){var e=n.currentTarget.files[0];A(e)}}(n)}})})]}),Object(s.jsxs)("div",{className:"control-btn",children:[Object(s.jsx)("button",{onClick:function(n){t(L,B,N,$)},children:"\u786e\u5b9a"}),Object(s.jsx)("button",{onClick:function(n){r()},children:"\u53d6\u6d88"})]})]})};e.a=Object(o.memo)(l)},526:function(n,e,t){"use strict";t.r(e);var r,a,o=t(40),i=t(0),c=t(10),u=t(11),s=t(12),l=s.a.div(r||(r=Object(u.a)(["\n  .control-btn {\n    display: flex;\n    justify-content: flex-end;\n    & > button {\n      background-color: #ec4141;\n      color: #fff;\n      padding: 4px 15px;\n      display: flex;\n      align-items: center;\n      border-radius: 18px;\n      cursor: pointer;\n      & > span {\n        font-size: 13px;\n        margin: 0 0 0 10px;\n      }\n      & > i {\n        font-size: 18px;\n      }\n    }\n  }\n  .program-list {\n    & > li {\n      display: flex;\n      align-items: center;\n      padding: 10px 0;\n      &:nth-child(odd) {\n        background-color: #f9f9f9;\n      }\n      &:nth-child(even) {\n        background-color: #fff;\n      }\n      &:hover {\n        background-color: #f0f1f2;\n      }\n      .index {\n        padding: 0 20px;\n        color: #656565;\n      }\n      .img-container {\n        width: 70px;\n        height: 70px;\n        margin: 0 20px 0 0;\n        img {\n          width: 100%;\n          border-radius: 5px;\n        }\n      }\n      .name {\n        width: 26%;\n        margin: 0 20px 0 0;\n        font-weight: bold;\n        font-size: 16px;\n        color: #656565;\n        cursor: pointer;\n      }\n      .cate {\n        width: 15%;\n        color: #5091cb;\n        font-size: 13px;\n        span {\n          color: #959595;\n          font-size: 13px;\n          margin: 0 4px 0 0;\n        }\n      }\n      .create-time {\n        font-size: 13px;\n        color: #959595;\n        width: 15%;\n      }\n      .del-btn {\n        background-color: #ec4141;\n        font-size: 13px;\n        padding: 3px 15px;\n        color: #fff;\n        cursor: pointer;\n      }\n    }\n  }\n"]))),d=t(376),f=t(122),g=s.a.div(a||(a=Object(u.a)(["\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n"]))),h=t(419),p=t(45),b=t(2),m=function(n){var e=Object(i.useState)(""),t=Object(o.a)(e,2),r=t[0],a=t[1],u=Object(i.useState)(""),s=Object(o.a)(u,2),l=s[0],f=s[1],m=Object(c.b)(),j=[{name:"\u540d\u79f0",cols:50,rows:2,fn:function(n){return function(n){a(n.currentTarget.value)}(n)}},{name:"\u7b80\u4ecb",cols:50,rows:5,fn:function(n){return function(n){f(n.currentTarget.value)}(n)}}],O=n.id,x=n.isShowP,v=n.defined,w=n.canceled;return Object(b.jsx)(g,{children:x&&Object(b.jsx)(h.a,{names:j,defineBtn:function(n,e,t){return function(n,e,t){0===r.trim().length?m(Object(p.a)("\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a",1500)):0===l.trim().length?m(Object(p.a)("\u7b80\u4ecb\u4e0d\u80fd\u4e3a\u7a7a",1500)):Object(d.a)(O,r,l).then((function(e){if(e){var t=e.id,r=new FormData;r.append("cover",n),r.append("id",t),Object(d.p)(r).then((function(n){}))}})),v()}(n)},cancelBtn:function(){w()},isShowImgPrev:true,isShowVioPrev:false})})},j=Object(i.memo)(m),O=function(n){var e=n.location.state.id,t=Object(i.useState)([]),r=Object(o.a)(t,2),a=r[0],u=r[1],s=Object(i.useState)(!1),g=Object(o.a)(s,2),h=g[0],p=g[1],m=Object(c.c)((function(n){return{userMsg:n.getIn(["loginReducer","login","userMsg"])}})).userMsg;Object(i.useEffect)((function(){Object(d.m)(m.userId,e,0,30).then((function(n){u(n),console.log(n)}))}),[e,m.userId]);var O=function(e,t){console.log(e),n.history.push({pathname:"/innovate/detail",state:{id:e.id}})};return Object(b.jsxs)(l,{children:[Object(b.jsx)("div",{className:"control-btn",children:Object(b.jsxs)("button",{onClick:function(n){p(!0)},children:[Object(b.jsx)("i",{className:"iconfont icon-jia1",children:" "}),Object(b.jsx)("span",{children:"\u6dfb\u52a0\u5185\u5bb9"})]})}),Object(b.jsx)(j,{isShowP:h,defined:function(){p(!1)},canceled:function(){p(!1)},id:e}),Object(b.jsx)("ul",{className:"program-list",children:0!==a.length&&a.map((function(n,e){return Object(b.jsxs)("li",{children:[Object(b.jsx)("div",{className:"index",children:(e+1).toString().padStart(2,"0")}),Object(b.jsx)("div",{className:"img-container",onClick:function(e){return O(n)},children:Object(b.jsx)("img",{src:n.coverUrl,alt:n.name})}),Object(b.jsx)("div",{className:"name text-nowrap",onClick:function(e){return O(n)},children:n.name}),Object(b.jsxs)("div",{className:"cate",children:[Object(b.jsx)("span",{children:"\u9891\u9053:"}),n.channel.name]}),Object(b.jsxs)("div",{className:"create-time",children:["\u521b\u5efa\u4e8e:",Object(f.a)(n.createTime,"yyyy-MM-dd")]}),Object(b.jsx)("button",{className:"del-btn",children:"\u5220\u9664"})]},n.id)}))})]})};e.default=Object(i.memo)(O)},97:function(n,e,t){"use strict";var r=t(173),a=t.n(r),o=t(26),i=t(22),c=t(106),u=t(9);e.a=function(n){var e=a.a.create({baseURL:o.a,timeout:15e3});return e.interceptors.request.use((function(n){return n}),(function(n){return console.log(n),n})),e.interceptors.response.use((function(n){return n.data}),(function(n){if(n.response){var e=n.response,t=e.status,r=e.data;if(1*t!==403||"\u8bf7\u767b\u5f55"!==r.message)throw n;i.a.dispatch(Object(c.d)()),i.a.dispatch(Object(c.b)({token:"",userName:"",userId:"",avatarUrl:"",createTime:"",updateTime:"",manage:-1,auth:-1})),Object(u.a)().push({pathname:"/Login"})}})),e.request(n)}}}]);
//# sourceMappingURL=45.800fe9ff.chunk.js.map