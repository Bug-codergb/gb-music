(this["webpackJsonpgb-music-react"]=this["webpackJsonpgb-music-react"]||[]).push([[50],{106:function(t,e,n){"use strict";n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return g})),n.d(e,"d",(function(){return h}));var r=n(174),a=n.n(r),u=n(175),o=n(499),i=n(115),c=n(108),s=n(45);function d(t){return{type:"changeUserMsg",userMsg:t}}function l(t){return{type:"changeLoginType",loginType:t}}function f(){return function(t){Object(c.f)().then((function(e){var n=e.love,r=e.follow;n||(e.love=[]),r||(e.follow=[]),window.localStorage.setItem("userDetail",JSON.stringify(e)),t({type:"changeUserDetail",userDetail:e})}))}}function g(t,e,n){return function(){var r=Object(u.a)(a.a.mark((function r(u){var g,h;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(i.a)(t,e);case 3:if(!(g=r.sent)){r.next=19;break}return h=g.token,r.next=8,Object(c.l)(h);case 8:return 1*r.sent.code===200&&(u(Object(s.a)("\u60a8\u7684VIP\u5df2\u7ecf\u8fc7\u671f\uff0c\u5f00\u901aVIP\u540e\u7545\u60f3",3500)),g.auth=0,delete g.vip),r.next=12,u(d(g));case 12:return r.next=14,u(l(1));case 14:return window.localStorage.setItem("userMsg",JSON.stringify(g)),window.localStorage.setItem("loginType","1"),r.next=18,u(f());case 18:n.history.push({pathname:"/Home"});case 19:r.next=25;break;case 21:r.prev=21,r.t0=r.catch(0),console.log(r.t0),o.b.warning({content:"\u7528\u6237\u540d\u6216\u8005\u5bc6\u7801\u9519\u8bef",style:{fontSize:"20px",marginTop:"5vh"}});case 25:case"end":return r.stop()}}),r,null,[[0,21]])})));return function(t){return r.apply(this,arguments)}}()}function h(){return function(t){window.localStorage.clear(),t(l(0)),t(d({token:"",userName:"",userId:"",avatarUrl:"",createTime:"",updateTime:"",manage:-1,auth:-1})),t({type:"changeUserDetail",userDetail:{userId:"",userName:"",avatarUrl:"",subscriber:[],thumb:[],follow:[{userId:""}],love:[{songId:""}]}})}}},108:function(t,e,n){"use strict";n.d(e,"k",(function(){return u})),n.d(e,"g",(function(){return o})),n.d(e,"a",(function(){return i})),n.d(e,"i",(function(){return c})),n.d(e,"f",(function(){return s})),n.d(e,"m",(function(){return d})),n.d(e,"b",(function(){return l})),n.d(e,"e",(function(){return f})),n.d(e,"j",(function(){return g})),n.d(e,"l",(function(){return h})),n.d(e,"h",(function(){return p})),n.d(e,"d",(function(){return m})),n.d(e,"c",(function(){return b}));var r=n(97),a=n(22);function u(t){return Object(r.a)({url:"/user/favorite",method:"post",data:{id:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function o(t,e){return Object(r.a)({url:"/user/favorite",params:{offset:t,limit:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function i(t){return Object(r.a)({url:"/user/favorite/cancel",method:"post",data:{songId:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function c(t,e,n){return Object(r.a)({url:"/sub/user/".concat(t),params:{offset:e,limit:n},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function s(){return Object(r.a)({url:"/user/detail",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function d(t){return Object(r.a)({url:"/user/upload/avatar",method:"post",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token,"Content-Type":"multipart/form-data"},data:t})}function l(t){return Object(r.a)({url:"/user/other/detail",method:"post",data:{userId:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function f(t,e,n){return Object(r.a)({url:"/user/channel",method:"post",data:{userId:t,offset:e,limit:n},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function g(t,e,n){return Object(r.a)({url:"/sub/user/playlist",method:"post",params:{offset:e,limit:n},data:{userId:t}})}function h(t){return Object(r.a)({url:"/user/expire",method:"post",headers:{authorization:t}})}function p(){return Object(r.a)({url:"/user/data/moment",method:"post",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function m(t,e){return Object(r.a)({url:"/user/moment",method:"post",data:{offset:t,limit:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function b(t){return Object(r.a)({url:"/user/simple",params:{userId:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}},115:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return u}));var r=n(97);function a(t,e){return Object(r.a)({url:"/login",method:"post",data:{userName:t,password:e}})}function u(t,e){return Object(r.a)({url:"/register",method:"post",data:{userName:t,password:e}})}},374:function(t,e,n){"use strict";n.d(e,"e",(function(){return u})),n.d(e,"h",(function(){return o})),n.d(e,"f",(function(){return i})),n.d(e,"a",(function(){return c})),n.d(e,"p",(function(){return s})),n.d(e,"n",(function(){return d})),n.d(e,"m",(function(){return l})),n.d(e,"b",(function(){return f})),n.d(e,"d",(function(){return g})),n.d(e,"c",(function(){return h})),n.d(e,"i",(function(){return p})),n.d(e,"j",(function(){return m})),n.d(e,"k",(function(){return b})),n.d(e,"l",(function(){return j})),n.d(e,"g",(function(){return O})),n.d(e,"o",(function(){return I}));var r=n(97),a=n(22);function u(){return Object(r.a)({url:"/channel/all"})}function o(t,e,n){return Object(r.a)({url:"/channel/content",params:{id:t,offset:e,limit:n}})}function i(t,e,n){return Object(r.a)({url:"/channel/detail",params:{id:t,offset:e,limit:n}})}function c(t,e,n){return Object(r.a)({url:"/channel/content/add",method:"post",data:{cId:t,name:e,description:n},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function s(t){return Object(r.a)({url:"/channel/content/upload",data:t,method:"post",headers:{"Content-type":"multipart/form-data",authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function d(t){return Object(r.a)({url:"/channel/count",params:{userId:t}})}function l(t,e,n,a){return Object(r.a)({url:"/channel/user",params:{userId:t,cId:e,offset:n,limit:a}})}function f(t,e){return Object(r.a)({url:"/channel/program",method:"post",data:{name:t,cId:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function g(t,e){return Object(r.a)({url:"/channel/program/source",method:"post",params:{id:t},data:e,headers:{"Content-type":"multipart/form-data",authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function h(t){return Object(r.a)({url:"/channel/playCount",method:"post",data:{id:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function p(){return Object(r.a)({url:"/channel/hot"})}function m(){return Object(r.a)({url:"/channel/content/hot"})}function b(t){return Object(r.a)({url:"/channel/program/detail",params:{id:t}})}function j(t){return Object(r.a)({url:"/channel/program/url",params:{id:t}})}function O(t,e,n){return Object(r.a)({url:"/channel/sub/user",params:{cId:t,offset:e,limit:n}})}function I(){return Object(r.a)({url:"/channel/program/list",method:"post",data:{},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}},558:function(t,e,n){"use strict";n.r(e);var r,a=n(40),u=n(0),o=n(10),i=n(374),c=n(3),s=n(11),d=n(12).a.div(r||(r=Object(s.a)(["\n  background-color: #fff;\n  padding: 20px;\n  .channel-list {\n    display: flex;\n    flex-wrap: wrap;\n    & > li {\n      width: 30%;\n      padding: 0 0 0 20px;\n      display: flex;\n      align-items: center;\n      border-right: 2px solid #f3f3f3;\n      border-bottom: 2px solid #f3f3f3;\n      margin: 0 0 15px 0;\n      .right-msg {\n        margin: 0 0 0 40px;\n        flex: 1;\n        height: 100%;\n        .msg {\n          color: #de5e5e;\n          display: flex;\n          align-items: center;\n          height: 100%;\n          cursor: pointer;\n        }\n      }\n    }\n    .img-container {\n      width: 65px;\n      height: 65px;\n      background-repeat: no-repeat;\n      background-size: 100px;\n      background-position: -45px 0;\n    }\n    .channel-name {\n      text-align: center;\n      width: 65px;\n      color: #db5e5e;\n      font-weight: bold;\n    }\n  }\n"]))),l=n(2);e.default=Object(u.memo)(Object(c.h)((function(t){var e=Object(u.useState)([]),n=Object(a.a)(e,2),r=n[0],c=n[1],s=Object(u.useState)([]),f=Object(a.a)(s,2),g=f[0],h=f[1],p=Object(o.c)((function(t){return t.getIn(["loginReducer","login"])})).userMsg;Object(u.useEffect)((function(){Object(i.e)().then((function(t){c(t)}))}),[]),Object(u.useEffect)((function(){Object(i.n)(p.userId).then((function(t){h(t)}))}),[p.userId]);var m=function(e,n,r){e.stopPropagation(),t.history.push({pathname:"/innovate/innovateCon",state:{id:n.id}})};return Object(l.jsx)(d,{children:Object(l.jsx)("ul",{className:"channel-list",children:0!==r.length&&r.map((function(t,e){return Object(l.jsxs)("li",{children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{style:{backgroundImage:"url(".concat(t.picUrl,")")},className:"img-container"}),Object(l.jsx)("p",{className:"channel-name",children:t.name})]}),Object(l.jsx)("div",{className:"right-msg",onClick:function(e){return m(e,t)},children:g.filter((function(e,n){return e.id===t.id})).map((function(t,e){return Object(l.jsxs)("span",{className:"msg",onClick:function(e){return m(e,t)},children:["\u5171\u6709",t.count,"\u4e2a\u58f0\u97f3"]},t.id)}))})]},t.id)}))})})})))},97:function(t,e,n){"use strict";var r=n(173),a=n.n(r),u=n(26),o=n(22),i=n(106),c=n(9);e.a=function(t){var e=a.a.create({baseURL:u.a,timeout:15e3});return e.interceptors.request.use((function(t){return t}),(function(t){return console.log(t),t})),e.interceptors.response.use((function(t){return t.data}),(function(t){if(t.response){var e=t.response,n=e.status,r=e.data;if(1*n!==403||"\u8bf7\u767b\u5f55"!==r.message)throw t;o.a.dispatch(Object(i.d)()),o.a.dispatch(Object(i.b)({token:"",userName:"",userId:"",avatarUrl:"",createTime:"",updateTime:"",manage:-1,auth:-1})),Object(c.a)().push({pathname:"/Login"})}})),e.request(t)}}}]);
//# sourceMappingURL=50.af25da7d.chunk.js.map