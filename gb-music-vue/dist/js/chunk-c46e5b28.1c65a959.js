(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c46e5b28"],{"0257":function(t,e,n){},"1a1d":function(t,e,n){"use strict";n.d(e,"g",(function(){return o})),n.d(e,"a",(function(){return r})),n.d(e,"m",(function(){return c})),n.d(e,"l",(function(){return s})),n.d(e,"e",(function(){return u})),n.d(e,"c",(function(){return d})),n.d(e,"b",(function(){return l})),n.d(e,"k",(function(){return h})),n.d(e,"h",(function(){return f})),n.d(e,"f",(function(){return m})),n.d(e,"i",(function(){return v})),n.d(e,"j",(function(){return p})),n.d(e,"d",(function(){return b}));var a=n("1bab"),i=n("4360");function o(t){return Object(a["a"])({url:"/video/cate/all",params:{type:t}})}function r(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0;return Object(a["a"])({url:"/video",method:"post",data:{name:t,desc:e,type:n,cateId:o,songId:r},headers:{authorization:i["a"].state.userMsg.token}})}function c(t,e){return Object(a["a"])({url:"/video/upload",method:"post",data:t,params:{vid:e},headers:{authorization:i["a"].state.userMsg.token,"Content-type":"multipart/form-data"}})}function s(t,e){return Object(a["a"])({url:"/video/cover/upload",method:"post",data:t,params:{id:e},headers:{authorization:i["a"].state.userMsg.token,"Content-type":"multipart/form-data"}})}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;return Object(a["a"])({url:"/video/cate/detail",params:{cateId:t,type:e,offset:i,limit:o,keyword:n}})}function d(t){return Object(a["a"])({url:"/video/delete",method:"post",data:{id:t},headers:{authorization:i["a"].state.userMsg.token}})}function l(t,e){return Object(a["a"])({url:"/video/cate",method:"post",data:{type:t,name:e},headers:{authorization:i["a"].state.userMsg.token}})}function h(t,e,n,o){return Object(a["a"])({url:"/video/update",method:"post",data:{id:t,name:e,desc:n,cate:o},headers:{authorization:i["a"].state.userMsg.token}})}function f(){return Object(a["a"])({url:"/video/data",headers:{authorization:i["a"].state.userMsg.token}})}function m(){return Object(a["a"])({url:"/video/mv/data",headers:{authorization:i["a"].state.userMsg.token}})}function v(t){return Object(a["a"])({url:"/video/detail",method:"get",params:{id:t},headers:{authorization:i["a"].state.userMsg.token}})}function p(t){return Object(a["a"])({url:"/video/url",params:{vid:t}})}function b(t){return Object(a["a"])({url:"/video/cate/delete",method:"post",data:{id:t},headers:{authorization:i["a"].state.userMsg.token}})}},"1daa":function(t,e,n){"use strict";n("976f")},"3cc8":function(t,e,n){"use strict";n("0257")},"78ae5":function(t,e,n){"use strict";n("f069c")},"7f08":function(t,e,n){"use strict";var a=n("6be8");e["a"]={timeFormat:function(t,e){return Object(a["a"])(t,e)}}},"976f":function(t,e,n){},a953:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"channel-detail"},[n("div",{staticClass:"left"},[n("div",{staticClass:"add-btn"},[n("button",{on:{click:t.addBtn}},[n("i",{staticClass:"iconfont icon-jiahao"}),t._v(" 添加内容 ")])]),t.isShow?n("div",{staticClass:"upload-content"},[n("UploadContent",{on:{define:t.define,cancel:t.cancel}})],1):t._e(),n("ul",{staticClass:"channel-list"},t._l(t.channel,(function(e,a){return n("li",{key:e.id},[n("div",{staticClass:"index"},[t._v(" "+t._s((a+1).toString().padStart(2,"0"))+" ")]),n("div",{staticClass:"img-container"},[n("img",{attrs:{src:e.coverUrl,alt:e.name}})]),n("div",{staticClass:"state"},[t._v(" "+t._s(e.name)+" ")]),n("div",{staticClass:"time"},[t._v(" "+t._s((e.createTime,"yyyy-MM-dd"|t.timeFormat))+" ")]),n("div",{staticClass:"play-count"},[n("i",{staticClass:"el-icon-video-play"}),n("span",[t._v(t._s(e.playCount))])]),n("div",{staticClass:"count"},[t._v(" "+t._s(e.count)+" 个声音 ")]),n("div",{staticClass:"btn"},[n("button",{on:{click:function(n){return t.delChannel(e)}}},[t._v("删除")]),n("button",{on:{click:function(n){return t.editChannel(e,a)}}},[t._v("编辑")])])])})),0),0===t.channel.length?n("div",{staticClass:"empty"},[n("el-empty",{attrs:{description:"暂无电台"}})],1):t._e(),t.count>7?n("div",{staticClass:"page"},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.count,"page-size":7},on:{"current-change":t.pageChange}})],1):t._e()]),n("div",{staticClass:"right"},[n("el-drawer",{attrs:{direction:t.direction,visible:t.drawer,"destroy-on-close":!0,"show-close":!1},on:{"update:visible":function(e){t.drawer=e}},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"title-control"},[n("div",{staticClass:"title"},[t._v("编辑电台信息")]),n("div",{staticClass:"define",on:{click:t.defineEdit}},[t._v("确定")])])]},proxy:!0}])},[t.drawer?n("edit-channel",{ref:"channelEdit",attrs:{channel:t.channelItem,cate:t.cate}}):t._e()],1)],1)])},i=[],o=(n("498a"),n("b0c0"),n("b4f0")),r=n("7f08"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload"},[n("div",{staticClass:"name"},[n("span",[t._v("名称:")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{cols:"50",rows:"2"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),n("div",{staticClass:"desc"},[n("span",[t._v("简介:")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.desc,expression:"desc"}],attrs:{cols:"50",rows:"5"},domProps:{value:t.desc},on:{input:function(e){e.target.composing||(t.desc=e.target.value)}}})]),n("div",{staticClass:"cover"},[n("input",{directives:[{name:"show",rawName:"v-show",value:!t.isShowCover,expression:"!isShowCover"}],attrs:{type:"file"},on:{change:function(e){return t.fileChange(e)}}}),n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isShowCover,expression:"!isShowCover"}],staticClass:"iconfont icon-tupian"}),n("img",{directives:[{name:"show",rawName:"v-show",value:t.isShowCover,expression:"isShowCover"}],attrs:{src:t.url,alt:"预览"}})]),n("div",{staticClass:"control-btn"},[n("button",{on:{click:t.define}},[t._v("确定")]),n("button",{on:{click:t.cancel}},[t._v("取消")])])])},s=[],u=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),{name:"UploadContent",data:function(){return{content:"",desc:"",url:"",isShowCover:!1,file:null}},methods:{fileChange:function(t){var e=t.currentTarget.files[0];this.file=e,this.url=URL.createObjectURL(e),this.isShowCover=!0},define:function(){this.$emit("define",this.content,this.desc,this.file)},cancel:function(){this.$emit("cancel")}}}),d=u,l=(n("1daa"),n("2877")),h=Object(l["a"])(d,c,s,!1,null,"3603021a",null),f=h.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit-channel"},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-position":"left","label-width":"100px"}},[n("el-form-item",{attrs:{label:"电台名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入电台名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"电台分类",prop:"cate"}},[n("el-select",{attrs:{placeholder:"请选择电台分类"},model:{value:t.form.cate,callback:function(e){t.$set(t.form,"cate",e)},expression:"form.cate"}},t._l(t.cateList,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),n("el-form-item",{attrs:{label:"电台简介",prop:"desc"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:30}},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1)],1)],1)},v=[],p=(n("a4d3"),n("e01a"),n("1a1d"),{name:"EditChannel",data:function(){return{form:{name:"",cate:"",desc:""},rules:{name:[{required:!0,message:"请输电台名称",trigger:"blur"}],cate:[{required:!0,message:"请选择电台分类",trigger:"change"}],desc:[{required:!0,message:"请输入电台简介",trigger:"blur"}]},cateList:[]}},props:{cate:{type:Object,default:function(){return{}}},channel:{type:Object,default:function(){return{}}}},created:function(){var t=this;this.form.name=this.channel.name,this.form.desc=this.channel.description,this.form.cate=this.cate.id,Object(o["e"])().then((function(e){t.cateList=e}))}}),b=p,g=(n("78ae5"),Object(l["a"])(b,m,v,!1,null,"bea2d12a",null)),C=g.exports,w={name:"ChannelDetail",components:{EditChannel:C,UploadContent:f},data:function(){return{count:0,channel:[],isShow:!1,id:"",drawer:!1,direction:"rtl",channelItem:{},cate:{}}},filters:r["a"],created:function(){var t=this;this.id=this.$route.query.id,Object(o["f"])(this.$route.query.id,0,7).then((function(e){t.count=e.count,t.cate=e.category,t.channel=e.channel}))},methods:{addBtn:function(){this.isShow=!0},pageChange:function(t){var e=this;Object(o["f"])(this.id,7*(t-1),7).then((function(t){e.count=t.count,e.channel=t.channel}))},define:function(t,e,n){var a=this;console.log(t,e,n),t&&0!==t.trim().length?e&&0!==e.trim().length?n?Object(o["b"])(this.id,t,e).then((function(t){if(t){var e=t.id,i=new FormData;i.append("cover",n),i.append("id",e),Object(o["i"])(i).then((function(t){a.isShow=!1,Object(o["f"])(a.id,0,7).then((function(t){a.count=t.count,a.channel=t.channel}))}))}})):this.$toast.show("文件不能为空",1500):this.$toast.show("简介不能为空",1500):this.$toast.show("名称不能为空",1500)},cancel:function(){this.isShow=!1},defineEdit:function(){var t=this;this.$refs.channelEdit&&this.$refs.channelEdit.$refs.form.validate((function(e){if(e){var n=t.$refs.channelEdit.form,a=n.name,i=n.desc,r=n.cate;Object(o["h"])(t.channelItem.id,a,i,r).then((function(e){Object(o["f"])(t.id,0,7).then((function(e){t.count=e.count,t.channel=e.channel})),t.drawer=!1,t.$message({message:"更新成功",type:"success"})}))}}))},editChannel:function(t){this.drawer=!0,this.channelItem=t},delChannel:function(t){var e=this;this.$confirm("确认删除该电台?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["d"])(t.id).then((function(t){Object(o["f"])(e.id,0,7).then((function(t){e.count=t.count,e.channel=t.channel})),e.$message({message:"删除成功",type:"success"})}))})).catch((function(t){console.log(t)}))}}},j=w,O=(n("3cc8"),Object(l["a"])(j,a,i,!1,null,"5d3f0aac",null));e["default"]=O.exports},b4f0:function(t,e,n){"use strict";n.d(e,"e",(function(){return o})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return s})),n.d(e,"i",(function(){return u})),n.d(e,"f",(function(){return d})),n.d(e,"g",(function(){return l})),n.d(e,"h",(function(){return h})),n.d(e,"d",(function(){return f}));var a=n("1bab"),i=n("4360");function o(){return Object(a["a"])({url:"/channel/all"})}function r(t){return Object(a["a"])({url:"/channel/delete",method:"post",data:{id:t},headers:{authorization:i["a"].state.userMsg.token}})}function c(t){return Object(a["a"])({url:"/channel",method:"post",data:t,headers:{authorization:i["a"].state.userMsg.token}})}function s(t,e,n){return Object(a["a"])({url:"/channel/content/add",method:"post",data:{cId:t,name:e,description:n},headers:{authorization:i["a"].state.userMsg.token}})}function u(t){return Object(a["a"])({url:"/channel/content/upload",data:t,method:"post",headers:{"Content-type":"multipart/form-data",authorization:i["a"].state.userMsg.token}})}function d(t,e,n){return Object(a["a"])({url:"/channel/content",params:{id:t,offset:e,limit:n}})}function l(){return Object(a["a"])({url:"/channel/data",method:"get",headers:{authorization:i["a"].state.userMsg.token}})}function h(t,e,n,o){return Object(a["a"])({url:"/channel/content/update",method:"post",data:{id:t,name:e,desc:n,cate:o},headers:{authorization:i["a"].state.userMsg.token}})}function f(t){return Object(a["a"])({url:"/channel/content/delete",method:"post",data:{id:t},headers:{authorization:i["a"].state.userMsg.token}})}},f069c:function(t,e,n){}}]);
//# sourceMappingURL=chunk-c46e5b28.1c65a959.js.map