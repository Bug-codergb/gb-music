(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55b3abab"],{"043d":function(t,e,i){"use strict";i("88ea")},"043e":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"msg-item"},[i("div",{staticClass:"img-container",style:{width:t.itemWidth,height:parseInt(t.itemWidth)*t.scale+"px"}},[t._t("img-container"),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowPC,expression:"isShowPC"}],staticClass:"playCount"},[t._v(" "+t._s(t.playCount)+" ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowDT,expression:"isShowDT"}],staticClass:"duration"},[t._v(" "+t._s(t.formatTime(t.dt,"mm:ss"))+" ")])],2),i("div",{staticClass:"state"},[t._t("state")],2),t.user?i("div",{staticClass:"user-msg"},[i("div",{staticClass:"avatar"},[i("img",{attrs:{src:t.user.avatarUrl}})]),i("div",{staticClass:"user-name"},[t._v(" "+t._s(t.user.userName)+" ")])]):t._e()])},a=[],s=(i("a9e3"),i("6be8")),o={name:"MsgItem",props:{itemWidth:{type:String,default:"130px"},user:{userName:{type:String,default:""},avatarUrl:{type:String,default:""}},playCount:{type:Number,default:78},dt:{type:Number,default:0},isShowDT:{type:Boolean,default:!1},isShowPC:{type:Boolean,default:!1},scale:{type:Number,default:.6}},methods:{formatTime:function(t,e){return Object(s["a"])(t,e)}}},r=o,c=(i("4606"),i("2877")),d=Object(c["a"])(r,n,a,!1,null,"a8e5a3d0",null);e["a"]=d.exports},"0acf":function(t,e,i){"use strict";i("190c")},1138:function(t,e,i){"use strict";i("2a84")},"190c":function(t,e,i){},"1a1d":function(t,e,i){"use strict";i.d(e,"g",(function(){return s})),i.d(e,"a",(function(){return o})),i.d(e,"m",(function(){return r})),i.d(e,"l",(function(){return c})),i.d(e,"e",(function(){return d})),i.d(e,"c",(function(){return l})),i.d(e,"b",(function(){return u})),i.d(e,"k",(function(){return f})),i.d(e,"h",(function(){return v})),i.d(e,"f",(function(){return h})),i.d(e,"i",(function(){return m})),i.d(e,"j",(function(){return p})),i.d(e,"d",(function(){return b}));var n=i("1bab"),a=i("4360");function s(t){return Object(n["a"])({url:"/video/cate/all",params:{type:t}})}function o(t,e,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0;return Object(n["a"])({url:"/video",method:"post",data:{name:t,desc:e,type:i,cateId:s,songId:o},headers:{authorization:a["a"].state.userMsg.token}})}function r(t,e){return Object(n["a"])({url:"/video/upload",method:"post",data:t,params:{vid:e},headers:{authorization:a["a"].state.userMsg.token,"Content-type":"multipart/form-data"}})}function c(t,e){return Object(n["a"])({url:"/video/cover/upload",method:"post",data:t,params:{id:e},headers:{authorization:a["a"].state.userMsg.token,"Content-type":"multipart/form-data"}})}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;return Object(n["a"])({url:"/video/cate/detail",params:{cateId:t,type:e,offset:a,limit:s,keyword:i}})}function l(t){return Object(n["a"])({url:"/video/delete",method:"post",data:{id:t},headers:{authorization:a["a"].state.userMsg.token}})}function u(t,e){return Object(n["a"])({url:"/video/cate",method:"post",data:{type:t,name:e},headers:{authorization:a["a"].state.userMsg.token}})}function f(t,e,i,s){return Object(n["a"])({url:"/video/update",method:"post",data:{id:t,name:e,desc:i,cate:s},headers:{authorization:a["a"].state.userMsg.token}})}function v(){return Object(n["a"])({url:"/video/data",headers:{authorization:a["a"].state.userMsg.token}})}function h(){return Object(n["a"])({url:"/video/mv/data",headers:{authorization:a["a"].state.userMsg.token}})}function m(t){return Object(n["a"])({url:"/video/detail",method:"get",params:{id:t},headers:{authorization:a["a"].state.userMsg.token}})}function p(t){return Object(n["a"])({url:"/video/url",params:{vid:t}})}function b(t){return Object(n["a"])({url:"/video/cate/delete",method:"post",data:{id:t},headers:{authorization:a["a"].state.userMsg.token}})}},"20ca":function(t,e,i){"use strict";function n(t,e,i){var n=null,a=function(){var a=this,s=arguments;if(n&&clearTimeout(n),i){var o=!n;n=setTimeout((function(){n=null}),e),o&&t.apply(a,s)}else n=setTimeout((function(){t.apply(a,s)}),e)};return a.remove=function(){clearTimeout(n),n=null},a}i.d(e,"a",(function(){return n}))},2532:function(t,e,i){"use strict";var n=i("23e7"),a=i("5a34"),s=i("1d80"),o=i("ab13");n({target:"String",proto:!0,forced:!o("includes")},{includes:function(t){return!!~String(s(this)).indexOf(a(t),arguments.length>1?arguments[1]:void 0)}})},"2a84":function(t,e,i){},4606:function(t,e,i){"use strict";i("d2f2")},4739:function(t,e,i){"use strict";i("dd9a")},"4de4":function(t,e,i){"use strict";var n=i("23e7"),a=i("b727").filter,s=i("1dde"),o=s("filter");n({target:"Array",proto:!0,forced:!o},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},5928:function(t,e,i){"use strict";i("af43")},"5a34":function(t,e,i){var n=i("44e7");t.exports=function(t){if(n(t))throw TypeError("The method doesn't accept regular expressions");return t}},"5d23":function(t,e,i){"use strict";i("6e97")},"6e97":function(t,e,i){},"88ea":function(t,e,i){},"8b65":function(t,e,i){},"9ab1":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload"},[i("div",{staticClass:"state"},[i("div",{staticClass:"title"},[t._t("title")],2),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{cols:"50",rows:"2"},domProps:{value:t.title},on:{input:[function(e){e.target.composing||(t.title=e.target.value)},t.titleInp]}})]),i("div",{staticClass:"desc"},[i("div",{staticClass:"desc-name"},[t._t("desc-name")],2),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{cols:"50",rows:"7"},domProps:{value:t.content},on:{input:[function(e){e.target.composing||(t.content=e.target.value)},t.contentInp]}})]),i("div",{staticClass:"time"},[t._t("time")],2),i("div",{staticClass:"upload-img"},[i("div",{staticClass:"upload-name"},[t._t("upload-name")],2),i("div",{staticClass:"upload-preview"},[i("div",{staticClass:"img-content"},[i("input",{directives:[{name:"show",rawName:"v-show",value:!t.isShowPreview,expression:"!isShowPreview"}],attrs:{type:"file"},on:{change:t.change}}),i("i",{directives:[{name:"show",rawName:"v-show",value:!t.isShowPreview&&"img"===t.showForm,expression:"!isShowPreview && showForm === 'img'"}],staticClass:"iconfont icon-tupian"}),i("img",{directives:[{name:"show",rawName:"v-show",value:t.isShowPreview&&"img"===t.showForm,expression:"isShowPreview && showForm === 'img'"}],attrs:{src:t.imgUrl,alt:""}})]),t._t("vide-content")],2)]),t.cateList.length?i("div",{staticClass:"cate"},[i("div",{staticClass:"cate-name"},[t._t("cate")],2),i("ul",{staticClass:"cate-outer"},t._l(t.cateList,(function(e,n){return i("li",{key:e.id,class:{active:t.currentIndex===n},on:{click:function(i){return t.liClick(e,n)}}},[t._v(" "+t._s(e.name)+" ")])})),0)]):t._e(),t.artists.length?i("div",{staticClass:"artist-list"},[i("div",{staticClass:"artist-title",on:{click:t.showArtist}},[t._t("artistTitle")],2),i("list",{directives:[{name:"show",rawName:"v-show",value:t.isShowArtist,expression:"isShowArtist"}],attrs:{list:t.artists},on:{defineArtist:t.defineArtist,"select-artist":t.artistClick}})],1):t._e(),t.albums.length?i("div",{staticClass:"album-list"},[i("div",{staticClass:"album-title",on:{click:t.showAlbum}},[t._t("albumTitle")],2),i("list",{directives:[{name:"show",rawName:"v-show",value:t.isShowAlbum,expression:"isShowAlbum"}],attrs:{list:t.albums},on:{defineArtist:t.defineAlbum,"select-artist":t.albumClick}})],1):t._e(),i("div",{staticClass:"control-btn"},[i("button",{on:{click:t.define}},[t._v("确定")]),i("button",{on:{click:t.cancel}},[t._v("取消")])])])},a=[],s=(i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list-outer"},[i("div",{staticClass:"list"},[i("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":t.querySearch,placeholder:"请输入相关内容","trigger-on-focus":!1},on:{select:t.handleSelect},model:{value:t.id,callback:function(e){t.id=e},expression:"id"}}),i("div",{staticClass:"control-btn"},[i("button",{on:{click:t.defineList}},[t._v("确定")]),i("button",{on:{click:t.defineList}},[t._v("取消")])])],1)])}),o=[],r=(i("d81d"),i("b0c0"),i("4de4"),i("caad"),i("2532"),{name:"List",data:function(){return{id:"",formatList:[]}},props:{list:{type:Array,default:function(){return[]}}},created:function(){this.formatList=this.list.map((function(t,e){return{id:t.id,name:t.name,value:t.name}}))},methods:{querySearch:function(t,e){var i=this.formatList,n=t?i.filter(this.createFilter(t)):i;e(n)},createFilter:function(t){return function(e){return e.value.toLowerCase().includes(t.toLowerCase())}},defineList:function(){this.$emit("defineArtist")},handleSelect:function(t){this.$emit("select-artist",t)}}}),c=r,d=(i("4739"),i("2877")),l=Object(d["a"])(c,s,o,!1,null,"0ab1528a",null),u=l.exports,f={name:"Upload",components:{List:u},data:function(){return{content:"",title:"",image:null,isShowPreview:!1,imgUrl:"",currentIndex:0,currentArtists:0,isShowArtist:!1,isShowAlbum:!1}},props:{cateList:{type:Array,default:function(){return[]}},artists:{type:Array,default:function(){return[]}},albums:{type:Array,default:function(){return[]}},showForm:{type:String,default:"img"}},methods:{titleInp:function(){this.$emit("titleInp",this.title)},contentInp:function(){this.$emit("contentInp",this.content)},change:function(t){this.imgUrl=URL.createObjectURL(t.target.files[0]),this.isShowPreview=!this.isShowPreview,this.$emit("select-file",t.target.files[0])},liClick:function(t,e){this.currentIndex=e,this.$emit("liClick",t,e)},artistClick:function(t,e){this.$emit("select-artist",t)},albumClick:function(t,e){this.$emit("select-album",t)},showArtist:function(){this.isShowArtist=!0},defineArtist:function(){this.isShowArtist=!1},showAlbum:function(){this.isShowAlbum=!0},defineAlbum:function(){this.isShowAlbum=!1},define:function(){this.$emit("define")},cancel:function(){this.$emit("cancel")}}},v=f,h=(i("1138"),Object(d["a"])(v,n,a,!1,null,"46c6e630",null));e["a"]=h.exports},a9e3:function(t,e,i){"use strict";var n=i("83ab"),a=i("da84"),s=i("94ca"),o=i("6eeb"),r=i("5135"),c=i("c6b6"),d=i("7156"),l=i("c04e"),u=i("d039"),f=i("7c73"),v=i("241c").f,h=i("06cf").f,m=i("9bf2").f,p=i("58a8").trim,b="Number",g=a[b],w=g.prototype,C=c(f(w))==b,_=function(t){var e,i,n,a,s,o,r,c,d=l(t,!1);if("string"==typeof d&&d.length>2)if(d=p(d),e=d.charCodeAt(0),43===e||45===e){if(i=d.charCodeAt(2),88===i||120===i)return NaN}else if(48===e){switch(d.charCodeAt(1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+d}for(s=d.slice(2),o=s.length,r=0;r<o;r++)if(c=s.charCodeAt(r),c<48||c>a)return NaN;return parseInt(s,n)}return+d};if(s(b,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var y,k=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof k&&(C?u((function(){w.valueOf.call(i)})):c(i)!=b)?d(new g(_(e)),i,k):_(e)},S=n?v(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),I=0;S.length>I;I++)r(g,y=S[I])&&!r(k,y)&&m(k,y,h(g,y));k.prototype=w,w.constructor=k,o(a,b,k)}},ab13:function(t,e,i){var n=i("b622"),a=n("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[a]=!1,"/./"[t](e)}catch(n){}}return!1}},af43:function(t,e,i){},bfaf:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video"},[i("div",{staticClass:"left-content"},[t.isShow?i("div",{staticClass:"upload-video"},[i("upload",{attrs:{"cate-list":t.cateList},on:{liClick:t.cateClick,"select-file":t.selectCover,titleInp:t.titleInp,contentInp:t.contentInp,define:t.define,cancel:t.cancel}},[i("span",{attrs:{slot:"title"},slot:"title"},[t._v("名称:")]),i("span",{attrs:{slot:"desc-name"},slot:"desc-name"},[t._v("简介:")]),i("span",{attrs:{slot:"cate"},slot:"cate"},[t._v("分类:")]),i("div",{staticClass:"video-container",attrs:{slot:"vide-content"},slot:"vide-content"},[i("input",{directives:[{name:"show",rawName:"v-show",value:!t.isShowPreview,expression:"!isShowPreview"}],attrs:{type:"file"},on:{change:t.change}}),i("i",{directives:[{name:"show",rawName:"v-show",value:!t.isShowPreview,expression:"!isShowPreview"}],staticClass:"iconfont icon-video"}),i("img",{directives:[{name:"show",rawName:"v-show",value:t.isShowPreview,expression:"isShowPreview"}],attrs:{src:t.videoUrl,alt:""}})])])],1):t._e(),i("video-list")],1),i("div",{staticClass:"right-content"},[i("add-msg",{attrs:{title:"添加视频"},on:{"add-content":t.addVideo}},[i("i",{staticClass:"iconfont icon-video icon",attrs:{slot:"icon"},slot:"icon"})]),i("VideoCate")],1)])},a=[],s=(i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("498a"),i("c73f")),o=i("9ab1"),r=i("1a1d"),c=i("d164"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-list"},[i("div",{staticClass:"cate-list-outer"},[i("ul",{staticClass:"cate-list"},t._l(t.cateList,(function(e,n){return i("li",{key:e.id,class:{active:t.currentIndex===n},on:{click:function(i){return t.cateClick(e,n)}}},[t._v(" "+t._s(e.name)+" ")])})),0),i("div",{staticClass:"search-outer"},[i("el-input",{attrs:{placeholder:"请输入视频名称","suffix-icon":"el-icon-search"},on:{input:t.searchInp},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)]),t.videoList?i("ul",{staticClass:"videos"},t._l(t.videoList,(function(e,n){return i("li",{key:e.id},[i("div",{staticClass:"index"},[t._v(" "+t._s((n+1).toString().padStart(2,"0"))+" ")]),i("div",{staticClass:"img-container"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.coverUrl,expression:"item.coverUrl"}],attrs:{alt:e.name}})]),i("div",{staticClass:"video-name"},[t._v(" "+t._s(e.name)+" ")]),i("div",{staticClass:"dt"},[t._v(t._s(t.formatDate(e.dt,"mm:ss")))]),i("div",{staticClass:"create-time"},[t._v(t._s(t.formatDate(e.createTime,"yyyy-MM-dd")))]),i("div",{staticClass:"user-name"},[t._v("by "+t._s(e.user.userName))]),i("button",{staticClass:"del-btn",on:{click:function(i){return t.del(e,n)}}},[t._v("删除")]),i("button",{staticClass:"del-btn",on:{click:function(i){return t.edit(e,n)}}},[t._v("编辑")]),i("button",{staticClass:"del-btn",on:{click:function(i){return t.checkout(e,n)}}},[t._v("查看")])])})),0):t._e(),0===t.videoList.length?i("div",{staticClass:"empty"},[i("el-empty",{attrs:{description:"暂无视频"}})],1):t._e(),t.count>8?i("div",{staticClass:"page"},[i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.count,"page-size":8},on:{"current-change":t.pageChange}})],1):t._e(),i("el-drawer",{attrs:{direction:t.direction,visible:t.drawer,"destroy-on-close":!0,"show-close":!1},on:{"update:visible":function(e){t.drawer=e}},scopedSlots:t._u([{key:"title",fn:function(){return[i("div",{staticClass:"title-control"},[i("div",{staticClass:"title"},[t._v("编辑视频信息")]),i("div",{staticClass:"define",on:{click:t.defineEdit}},[t._v("确定")])])]},proxy:!0}])},[t.drawer?i("edit-video",{ref:"videoEdit",attrs:{video:t.video}}):t._e()],1)],1)},l=[],u=(i("b0c0"),i("043e")),f=i("6be8"),v=i("20ca"),h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"edit-video"},[i("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-position":"left","label-width":"100px"}},[i("el-form-item",{attrs:{label:"视频名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"请输入视频名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"视频分类",prop:"cate"}},[i("el-select",{attrs:{placeholder:"请选择视频分类"},model:{value:t.form.cate,callback:function(e){t.$set(t.form,"cate",e)},expression:"form.cate"}},t._l(t.cateList,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),i("el-form-item",{attrs:{label:"视频简介",prop:"desc"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:30}},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1)],1)],1)},m=[],p=(i("a4d3"),i("e01a"),{name:"EditVideo",data:function(){return{form:{name:"",cate:"",desc:""},rules:{name:[{required:!0,message:"请输视频名称",trigger:"blur"}],cate:[{required:!0,message:"请选择视频分类",trigger:"change"}],desc:[{required:!0,message:"请输入视频简介",trigger:"blur"}]},cateList:[]}},props:{video:{type:Object,default:function(){return{}}}},created:function(){var t=this;this.form.name=this.video.name,this.form.desc=this.video.description,this.form.cate=this.video.category.id,Object(r["g"])(0).then((function(e){t.cateList=e}))}}),b=p,g=(i("5d23"),i("2877")),w=Object(g["a"])(b,h,m,!1,null,"799abee8",null),C=w.exports,_={name:"VideoList",components:{EditVideo:C,MsgItem:u["a"]},data:function(){return{currentIndex:0,cateList:[],videoList:[],count:0,cateId:"",keyword:"",drawer:!1,direction:"rtl",video:{}}},created:function(){var t=this;Object(r["g"])(0).then((function(e){t.cateList=e,t.cateId=e[0].id,Object(r["e"])(e[0].id,0,t.keyword,0,8).then((function(e){t.videoList=e.videos,t.count=e.count}))}))},methods:{cateClick:function(t,e){var i=this;this.currentIndex=e,this.cateId=t.id,Object(r["e"])(t.id,0,this.keyword,0,8).then((function(t){console.log(t),i.videoList=t.videos,i.count=t.count}))},formatDate:function(t,e){return Object(f["a"])(t,e)},del:function(t,e){var i=this,n=confirm("确定要删除吗?");n&&Object(r["c"])(t.id).then((function(t){i.$delete(i.videoList,e)}))},pageChange:function(t){var e=this;Object(r["e"])(this.cateId,0,this.keyword,8*(t-1),8).then((function(t){e.videoList=t.videos,e.count=t.count}))},searchInp:Object(v["a"])((function(){var t=this;Object(r["e"])(this.cateId,0,this.keyword,0,8).then((function(e){t.videoList=e.videos,t.count=e.count}))}),1e3,!1),edit:function(t,e){this.video=t,this.drawer=!0},checkout:function(t){this.$router.push({path:"/Home/videoDetail",query:{id:t.id}})},defineEdit:function(){var t=this;this.$refs.videoEdit&&this.$refs.videoEdit.$refs.form.validate((function(e){if(e){var i=t.$refs.videoEdit.form,n=i.name,a=i.cate,s=i.desc;Object(r["k"])(t.video.id,n,s,a).then((function(e){t.drawer=!1,Object(r["e"])(t.cateId,0,t.keyword,0,8).then((function(e){t.videoList=e.videos,t.count=e.count}))}))}}))}}},y=_,k=(i("043d"),Object(g["a"])(y,d,l,!1,null,"4ee49491",null)),S=k.exports,I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-cate"},[i("div",{staticClass:"cate"},[i("p",[t._v("分类:")]),i("div",{staticClass:"inp"},[i("label",[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.cate,expression:"cate",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入视频分类"},domProps:{value:t.cate},on:{input:function(e){e.target.composing||(t.cate=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),i("button",{on:{click:t.addCate}},[t._v("添加分类")])]),i("ul",{staticClass:"cate-list"},t._l(t.cateList,(function(e,n){return i("li",{key:e.id},[t._v(" "+t._s(e.name)+" "),i("div",{staticClass:"del-cate",on:{click:function(i){return t.deleteCate(e)}}},[i("i",{staticClass:"el-icon-close"})])])})),0)])])},x=[],O={name:"VideoCate",data:function(){return{cate:"",cateList:[]}},created:function(){var t=this;Object(r["g"])(0).then((function(e){t.cateList=e}))},methods:{addCate:function(){var t=this;0!==this.cate.length&&Object(r["b"])("0",this.cate).then((function(e){Object(r["g"])(0).then((function(e){t.cateList=e,t.cate="",t.$toast.show("添加成功",1500)}))}))},deleteCate:function(t){var e=this;this.$confirm("是否删除视频类型","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["d"])(t.id).then((function(t){Object(r["g"])(0).then((function(t){e.cateList=t})),e.$message({type:"success",message:"删除成功!"})}))})).catch((function(){}))}}},j=O,L=(i("5928"),Object(g["a"])(j,I,x,!1,null,"7b989be2",null)),A=L.exports,N={name:"Video",components:{VideoCate:A,VideoList:S,AddMsg:s["a"],Upload:o["a"]},data:function(){return{cateList:[],isShowPreview:!1,videoUrl:"",dt:0,video:null,cover:null,cateId:"",title:"",desc:"",isShow:!1}},created:function(){var t=this;Object(r["g"])(0).then((function(e){t.cateList=e}))},methods:{addVideo:function(){this.isShow=!0},cateClick:function(t,e){console.log(t,e),this.cateId=t.id},selectCover:function(t){this.cover=t},change:function(t){var e=this,i=URL.createObjectURL(t.target.files[0]);Object(c["a"])(i).then((function(i){e.videoUrl=i,e.isShowPreview=!e.isShowPreview,Object(c["b"])(t.target.files[0]).then((function(i){e.dt=i,e.video=t.target.files[0]}))}))},titleInp:function(t){this.title=t},contentInp:function(t){this.desc=t},define:function(){var t=this;0===this.title.trim().length?this.$toast.show("请添加名称"):0===this.desc.trim().length?this.$toast.show("请添加简介"):this.video?this.cover?0===this.cateId.trim().length?this.$toast.show("请选择视频分类"):Object(r["a"])(this.title,this.desc,0,this.cateId).then((function(e){var i=e.id;if(i){var n=new FormData;n.append("video",t.video),n.append("dt",t.dt),Object(r["m"])(n,i).then((function(t){console.log(t)}));var a=new FormData;a.append("cover",t.cover),Object(r["l"])(a,i).then((function(e){console.log(e),t.isShow=!1,t.desc="",t.cateId="",t.video=null,t.cover=null,t.title="",t.isShowPreview=!1}))}})):this.$toast.show("请选择视频封面"):this.$toast.show("请选择视频")},cancel:function(){this.isShow=!1}}},$=N,E=(i("0acf"),Object(g["a"])($,n,a,!1,null,"8ae3adde",null));e["default"]=E.exports},c73f:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-msg"},[i("div",{staticClass:"avatar"},[t._t("icon")],2),i("div",{staticClass:"add-btn",style:{backgroundColor:t.bgc},on:{click:t.addClick}},[t._v(" "+t._s(t.title)+" ")])])},a=[],s={name:"AddMsg",props:{title:{type:String,default:""},bgc:{type:String,default:"#f27a7a"}},methods:{addClick:function(){this.$emit("add-content")}}},o=s,r=(i("fdd5"),i("2877")),c=Object(r["a"])(o,n,a,!1,null,"08fd75aa",null);e["a"]=c.exports},caad:function(t,e,i){"use strict";var n=i("23e7"),a=i("4d64").includes,s=i("44d2");n({target:"Array",proto:!0},{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),s("includes")},d164:function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return a}));i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d");function n(t){return new Promise((function(e,i){var n=document.createElement("canvas"),a=n.getContext("2d"),s=document.createElement("video");s.setAttribute("controls","controls"),s.src=t,s.currentTime=1,s.oncanplay=function(){n.height=s.videoHeight,n.width=s.videoWidth,a.drawImage(s,0,0,s.videoWidth,s.videoHeight);var t=n.toDataURL("image/png");e(t)}}))}function a(t){var e=URL.createObjectURL(t),i=document.createElement("video");return i.setAttribute("src",e),new Promise((function(t,e){i.oncanplay=function(){t(1e3*i.duration)}}))}},d2f2:function(t,e,i){},d81d:function(t,e,i){"use strict";var n=i("23e7"),a=i("b727").map,s=i("1dde"),o=s("map");n({target:"Array",proto:!0,forced:!o},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},dd9a:function(t,e,i){},fdd5:function(t,e,i){"use strict";i("8b65")}}]);
//# sourceMappingURL=chunk-55b3abab.1b8b8b7f.js.map