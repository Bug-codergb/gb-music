(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78ed02b6"],{"1a1d":function(t,e,a){"use strict";a.d(e,"g",(function(){return r})),a.d(e,"a",(function(){return o})),a.d(e,"m",(function(){return s})),a.d(e,"l",(function(){return c})),a.d(e,"e",(function(){return u})),a.d(e,"c",(function(){return d})),a.d(e,"b",(function(){return l})),a.d(e,"k",(function(){return f})),a.d(e,"h",(function(){return v})),a.d(e,"f",(function(){return m})),a.d(e,"i",(function(){return h})),a.d(e,"j",(function(){return p})),a.d(e,"d",(function(){return b}));var n=a("1bab"),i=a("4360");function r(t){return Object(n["a"])({url:"/video/cate/all",params:{type:t}})}function o(t,e,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0;return Object(n["a"])({url:"/video",method:"post",data:{name:t,desc:e,type:a,cateId:r,songId:o},headers:{authorization:i["a"].state.userMsg.token}})}function s(t,e){return Object(n["a"])({url:"/video/upload",method:"post",data:t,params:{vid:e},headers:{authorization:i["a"].state.userMsg.token,"Content-type":"multipart/form-data"}})}function c(t,e){return Object(n["a"])({url:"/video/cover/upload",method:"post",data:t,params:{id:e},headers:{authorization:i["a"].state.userMsg.token,"Content-type":"multipart/form-data"}})}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return Object(n["a"])({url:"/video/cate/detail",params:{cateId:t,type:e,offset:i,limit:r,keyword:a}})}function d(t){return Object(n["a"])({url:"/video/delete",method:"post",data:{id:t},headers:{authorization:i["a"].state.userMsg.token}})}function l(t,e){return Object(n["a"])({url:"/video/cate",method:"post",data:{type:t,name:e},headers:{authorization:i["a"].state.userMsg.token}})}function f(t,e,a,r){return Object(n["a"])({url:"/video/update",method:"post",data:{id:t,name:e,desc:a,cate:r},headers:{authorization:i["a"].state.userMsg.token}})}function v(){return Object(n["a"])({url:"/video/data",headers:{authorization:i["a"].state.userMsg.token}})}function m(){return Object(n["a"])({url:"/video/mv/data",headers:{authorization:i["a"].state.userMsg.token}})}function h(t){return Object(n["a"])({url:"/video/detail",method:"get",params:{id:t},headers:{authorization:i["a"].state.userMsg.token}})}function p(t){return Object(n["a"])({url:"/video/url",params:{vid:t}})}function b(t){return Object(n["a"])({url:"/video/cate/delete",method:"post",data:{id:t},headers:{authorization:i["a"].state.userMsg.token}})}},"1b2d":function(t,e,a){"use strict";a("8c3d")},"20ca":function(t,e,a){"use strict";function n(t,e,a){var n=null,i=function(){var i=this,r=arguments;if(n&&clearTimeout(n),a){var o=!n;n=setTimeout((function(){n=null}),e),o&&t.apply(i,r)}else n=setTimeout((function(){t.apply(i,r)}),e)};return i.remove=function(){clearTimeout(n),n=null},i}a.d(e,"a",(function(){return n}))},"50b9":function(t,e,a){"use strict";a("edc2")},5343:function(t,e,a){},"8c3d":function(t,e,a){},"97b4":function(t,e,a){"use strict";a("5343")},ea00:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mv"},[a("div",{staticClass:"cate-list-outer"},[a("ul",{staticClass:"cate-list"},t._l(t.mvCate,(function(e,n){return a("li",{key:e.id,class:{active:t.currentIndex===n},on:{click:function(a){return t.liClick(e,n)}}},[t._v(" "+t._s(e.name)+" ")])})),0),a("div",{staticClass:"controller-outer"},[a("div",{staticClass:"search-outer"},[a("el-input",{attrs:{placeholder:"请输入视频名称","suffix-icon":"el-icon-search"},on:{input:t.searchInp},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),a("div",{staticClass:"add-cate",on:{click:function(e){t.drawer=!0}}},[t._v("添加分类")])])]),a("ul",{staticClass:"mvs"},t._l(t.MV,(function(e,n){return a("li",{key:e.id},[a("div",{staticClass:"index"},[t._v(t._s((n+1).toString().padStart(2,"0")))]),a("div",{staticClass:"img-container"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.coverUrl,expression:"item.coverUrl"}],attrs:{alt:e.name}})]),a("div",{staticClass:"name"},[t._v(t._s(e.name))]),a("div",{staticClass:"user-name"},[t._v(t._s(e.user.userName))]),a("div",{staticClass:"create-time"},[t._v(t._s(t.formatTime(e.createTime,"yyyy-MM-dd")))]),a("div",{staticClass:"dt"},[t._v(t._s(t.formatTime(e.dt,"mm:ss")))]),a("div",{staticClass:"play-count"},[a("i",{staticClass:"el-icon-video-play"}),t._v(" "+t._s(e.playCount)+" ")]),a("div",{staticClass:"del",on:{click:function(a){return t.delMV(e,n)}}},[a("button",[t._v("删除")])]),a("div",{staticClass:"del",on:{click:function(a){return t.editMV(e,n)}}},[a("button",[t._v("编辑")])]),a("div",{staticClass:"del",on:{click:function(a){return t.checkoutMV(e,n)}}},[a("button",[t._v("查看")])])])})),0),0===t.MV.length?a("div",{staticClass:"empty"},[a("el-empty",{attrs:{description:"暂无MV"}})],1):t._e(),t.count>8?a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.count,"page-size":8},on:{"current-change":t.pageChange}})],1):t._e(),a("el-drawer",{attrs:{title:"添加分类",visible:t.drawer,"before-close":t.handleClose},on:{"update:visible":function(e){t.drawer=e}}},[a("div",{staticClass:"line"}),a("AddMvCate")],1),a("el-drawer",{attrs:{direction:t.direction,visible:t.isShow,"destroy-on-close":!0,"show-close":!1},on:{"update:visible":function(e){t.isShow=e}},scopedSlots:t._u([{key:"title",fn:function(){return[a("div",{staticClass:"title-control"},[a("div",{staticClass:"title"},[t._v("编辑MV信息")]),a("div",{staticClass:"define",on:{click:t.defineEdit}},[t._v("确定")])])]},proxy:!0}])},[t.isShow?a("EditMV",{ref:"mvEdit",attrs:{mv:t.mvItem}}):t._e()],1)],1)},i=[],r=(a("b0c0"),a("1a1d")),o=a("6be8"),s=a("20ca"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-mv-cate"},[a("div",{staticClass:"cate"},[a("p",[t._v("语种:")]),a("div",{staticClass:"inp"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.cate,expression:"cate"}],attrs:{type:"text",placeholder:"请输入语种"},domProps:{value:t.cate},on:{input:function(e){e.target.composing||(t.cate=e.target.value)}}})]),a("button",{on:{click:t.addCate}},[t._v("添加语种")])]),a("ul",{staticClass:"cate-list"},t._l(t.cateList,(function(e,n){return a("li",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),0)])])},u=[],d={name:"AddMvCate",data:function(){return{cateList:[],cate:""}},created:function(){var t=this;Object(r["g"])(1).then((function(e){t.cateList=e}))},methods:{addCate:function(){var t=this;0!==this.cate.length&&Object(r["b"])("1",this.cate).then((function(e){Object(r["g"])(1).then((function(e){t.cateList=e,t.cate="",t.$toast.show("添加成功",1500)}))}))}}},l=d,f=(a("97b4"),a("2877")),v=Object(f["a"])(l,c,u,!1,null,"7f3d6da3",null),m=v.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-mv"},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"视频名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入视频名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"视频分类",prop:"cate"}},[a("el-select",{attrs:{placeholder:"请选择视频分类"},model:{value:t.form.cate,callback:function(e){t.$set(t.form,"cate",e)},expression:"form.cate"}},t._l(t.cateList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"视频简介",prop:"desc"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:30}},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1)],1)],1)},p=[],b=(a("a4d3"),a("e01a"),{name:"EditMV",data:function(){return{form:{name:"",cate:"",desc:""},rules:{name:[{required:!0,message:"请输MV名称",trigger:"blur"}],cate:[{required:!0,message:"请选择MV分类",trigger:"change"}],desc:[{required:!0,message:"请输入MV简介",trigger:"blur"}]},cateList:[]}},props:{mv:{type:Object,default:function(){return{}}}},created:function(){var t=this;console.log(this.mv),this.form.name=this.mv.name,this.form.desc=this.mv.description,this.form.cate=this.mv.category.id,Object(r["g"])(1).then((function(e){t.cateList=e}))}}),g=b,C=(a("1b2d"),Object(f["a"])(g,h,p,!1,null,"49b326cd",null)),k=C.exports,y={name:"MV",components:{AddMvCate:m,EditMV:k},data:function(){return{mvCate:[],currentIndex:0,MV:[],count:0,keyword:"",cateId:"",drawer:!1,isShow:!1,mvItem:{},direction:"rtl"}},created:function(){var t=this;Object(r["g"])(1).then((function(e){t.mvCate=e,t.liClick(e[0],0)}))},methods:{liClick:function(t,e){var a=this;this.currentIndex=e,this.cateId=t.id,Object(r["e"])(t.id,1,this.keyword,0,8).then((function(t){t&&t.videos&&(a.MV=t.videos,a.count=t.count)}))},formatTime:function(t,e){return Object(o["a"])(t,e)},delMV:function(t,e){var a=this,n=confirm("确定要删除吗?");n&&Object(r["c"])(t.id).then((function(t){a.$delete(a.MV.videos,e)}))},pageChange:function(t){var e=this;Object(r["e"])(this.cateId,1,this.keyword,8*(t-1),8).then((function(t){t&&t.videos&&(e.MV=t.videos,e.count=t.count)}))},searchInp:Object(s["a"])((function(){var t=this;Object(r["e"])(this.cateId,1,this.keyword,0,8).then((function(e){e&&e.videos&&(t.MV=e.videos,t.count=e.count)}))}),1e3,!1),handleClose:function(t){var e=this;Object(r["g"])(1).then((function(t){e.mvCate=t,e.liClick(t[0],0)})),t()},editMV:function(t){this.mvItem=t,this.isShow=!0},checkoutMV:function(t){this.$router.push({path:"/Home/videoDetail",query:{id:t.id}})},defineEdit:function(){var t=this;this.$refs.mvEdit&&this.$refs.mvEdit.$refs.form.validate((function(e){if(e){var a=t.$refs.mvEdit.form,n=a.name,i=a.cate,o=a.desc;Object(r["k"])(t.mvItem.id,n,o,i).then((function(e){t.isShow=!1,Object(r["e"])(t.cateId,1,t.keyword,0,8).then((function(e){t.MV=e.videos,t.count=e.count}))}))}}))}}},M=y,_=(a("50b9"),Object(f["a"])(M,n,i,!1,null,"c5db4dd2",null));e["default"]=_.exports},edc2:function(t,e,a){}}]);
//# sourceMappingURL=chunk-78ed02b6.ef2ff7aa.js.map