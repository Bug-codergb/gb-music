(this["webpackJsonpgb-music-react"]=this["webpackJsonpgb-music-react"]||[]).push([[47],{106:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return h}));var r=n(174),a=n.n(r),o=n(175),i=n(499),u=n(115),s=n(108),c=n(45);function d(e){return{type:"changeUserMsg",userMsg:e}}function l(e){return{type:"changeLoginType",loginType:e}}function g(){return function(e){Object(s.f)().then((function(t){var n=t.love,r=t.follow;n||(t.love=[]),r||(t.follow=[]),window.localStorage.setItem("userDetail",JSON.stringify(t)),e({type:"changeUserDetail",userDetail:t})}))}}function f(e,t,n){return function(){var r=Object(o.a)(a.a.mark((function r(o){var f,h;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(u.a)(e,t);case 3:if(!(f=r.sent)){r.next=19;break}return h=f.token,r.next=8,Object(s.l)(h);case 8:return 1*r.sent.code===200&&(o(Object(c.a)("\u60a8\u7684VIP\u5df2\u7ecf\u8fc7\u671f\uff0c\u5f00\u901aVIP\u540e\u7545\u60f3",3500)),f.auth=0,delete f.vip),r.next=12,o(d(f));case 12:return r.next=14,o(l(1));case 14:return window.localStorage.setItem("userMsg",JSON.stringify(f)),window.localStorage.setItem("loginType","1"),r.next=18,o(g());case 18:n.history.push({pathname:"/Home"});case 19:r.next=25;break;case 21:r.prev=21,r.t0=r.catch(0),console.log(r.t0),i.b.warning({content:"\u7528\u6237\u540d\u6216\u8005\u5bc6\u7801\u9519\u8bef",style:{fontSize:"20px",marginTop:"5vh"}});case 25:case"end":return r.stop()}}),r,null,[[0,21]])})));return function(e){return r.apply(this,arguments)}}()}function h(){return function(e){window.localStorage.clear(),e(l(0)),e(d({token:"",userName:"",userId:"",avatarUrl:"",createTime:"",updateTime:"",manage:-1,auth:-1})),e({type:"changeUserDetail",userDetail:{userId:"",userName:"",avatarUrl:"",subscriber:[],thumb:[],follow:[{userId:""}],love:[{songId:""}]}})}}},108:function(e,t,n){"use strict";n.d(t,"k",(function(){return o})),n.d(t,"g",(function(){return i})),n.d(t,"a",(function(){return u})),n.d(t,"i",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"m",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return g})),n.d(t,"j",(function(){return f})),n.d(t,"l",(function(){return h})),n.d(t,"h",(function(){return m})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return b}));var r=n(97),a=n(22);function o(e){return Object(r.a)({url:"/user/favorite",method:"post",data:{id:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function i(e,t){return Object(r.a)({url:"/user/favorite",params:{offset:e,limit:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function u(e){return Object(r.a)({url:"/user/favorite/cancel",method:"post",data:{songId:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function s(e,t,n){return Object(r.a)({url:"/sub/user/".concat(e),params:{offset:t,limit:n},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function c(){return Object(r.a)({url:"/user/detail",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function d(e){return Object(r.a)({url:"/user/upload/avatar",method:"post",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token,"Content-Type":"multipart/form-data"},data:e})}function l(e){return Object(r.a)({url:"/user/other/detail",method:"post",data:{userId:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function g(e,t,n){return Object(r.a)({url:"/user/channel",method:"post",data:{userId:e,offset:t,limit:n},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function f(e,t,n){return Object(r.a)({url:"/sub/user/playlist",method:"post",params:{offset:t,limit:n},data:{userId:e}})}function h(e){return Object(r.a)({url:"/user/expire",method:"post",headers:{authorization:e}})}function m(){return Object(r.a)({url:"/user/data/moment",method:"post",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function p(e,t){return Object(r.a)({url:"/user/moment",method:"post",data:{offset:e,limit:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function b(e){return Object(r.a)({url:"/user/simple",params:{userId:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}},115:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var r=n(97);function a(e,t){return Object(r.a)({url:"/login",method:"post",data:{userName:e,password:t}})}function o(e,t){return Object(r.a)({url:"/register",method:"post",data:{userName:e,password:t}})}},143:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},239:function(e,t,n){"use strict";n.d(t,"h",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"i",(function(){return s})),n.d(t,"g",(function(){return c})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return g})),n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return h})),n.d(t,"j",(function(){return m}));var r=n(143),a=n(97),o=n(22);function i(e,t,n,i){return Object(a.a)({url:"/message/".concat(e),method:"post",data:Object(r.a)({content:t},n,i),headers:{authorization:o.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function u(){return Object(a.a)({url:"/message",headers:{authorization:o.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function s(e){return Object(a.a)({url:"/message/read",method:"post",data:{id:e},headers:{authorization:o.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function c(e,t){return Object(a.a)({url:"/message/detail/video",method:"post",data:{offset:e,limit:t},headers:{authorization:o.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function d(e,t){return Object(a.a)({url:"/message/detail/comment",method:"post",data:{offset:e,limit:t},headers:{authorization:o.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function l(e,t){return Object(a.a)({url:"/message/detail/album",method:"post",data:{offset:e,limit:t},headers:{authorization:o.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function g(e,t){return Object(a.a)({url:"/message/detail/playlist",method:"post",data:{offset:e,limit:t},headers:{authorization:o.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function f(e,t){return Object(a.a)({url:"/message/detail/channel",method:"post",data:{offset:e,limit:t},headers:{authorization:o.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function h(e){return Object(a.a)({url:"/message/delete",method:"post",data:{id:e},headers:{authorization:o.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function m(e){return Object(a.a)({url:"/message/read/single",method:"post",data:{id:e},headers:{authorization:o.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}},546:function(e,t,n){"use strict";n.r(t);var r,a=n(40),o=n(0),i=n(11),u=n(12).a.div(r||(r=Object(i.a)(["\n  .video-msg-list {\n    & > li {\n      padding: 15px 0;\n      display: flex;\n      align-items: flex-start;\n      justify-content: space-between;\n      border-bottom: 1px solid #e0e0e0;\n      .video-msg-content {\n        display: flex;\n        align-items: flex-start;\n      }\n      .left-content {\n        display: flex;\n        align-items: center;\n      }\n      .index {\n        color: #ccc;\n        font-size: 13px;\n        margin: 0 10px 0 0;\n      }\n      .is-read {\n        width: 7px;\n        height: 7px;\n        background-color: #ec4141;\n        border-radius: 50%;\n        margin: 0 10px 0 0;\n      }\n      .img-container {\n        width: 40px;\n        height: 40px;\n        position: relative;\n        border-radius: 50%;\n        overflow: hidden;\n        img {\n          width: 100%;\n          position: absolute;\n          left: 50%;\n          top: 50%;\n          transform: translate(-50%, -50%);\n        }\n      }\n      .right-content {\n        margin: 10px 0 0 20px;\n        .video-msg-info {\n          display: flex;\n          align-items: center;\n          .operator {\n            margin: 0 5px;\n          }\n          .user-name {\n            color: #0086b3;\n            cursor: pointer;\n          }\n          .video-name {\n            color: #0086b3;\n            cursor: pointer;\n          }\n        }\n        .video-cover {\n          margin: 20px 0 0 0;\n          width: 170px;\n          overflow: hidden;\n          cursor: pointer;\n          img {\n            width: 100%;\n          }\n        }\n      }\n      .delete-msg {\n        cursor: pointer;\n        i.iconfont {\n          font-size: 20px;\n          color: #9b9b9b;\n        }\n        &:hover {\n          i {\n            color: #000;\n          }\n        }\n      }\n    }\n  }\n  .empty {\n    padding: 150px 0;\n  }\n"]))),s=n(239),c=n(3),d=n(19),l=n(10),g=n(45),f=n(28),h=n(2),m=function(e){var t=Object(o.useState)(0),n=Object(a.a)(t,2),r=n[0],i=n[1],c=Object(o.useState)([]),m=Object(a.a)(c,2),p=m[0],b=m[1],j=Object(l.b)();Object(o.useEffect)((function(){Object(s.d)("0","15").then((function(e){i(e.count),b(e.message)}))}),[]);var O=function(t){e.history.push({pathname:"/Home/userDetail",state:{userId:t.userId}})};return Object(h.jsxs)(u,{children:[Object(h.jsx)("ul",{className:"video-msg-list",children:0!==p.length&&p.map((function(t,n){return Object(h.jsxs)("li",{children:[Object(h.jsxs)("div",{className:"video-msg-content",children:[Object(h.jsxs)("div",{className:"left-content",children:[Object(h.jsx)("div",{className:"index",children:(n+1).toString().padStart(2,"0")}),0===t.checkout&&Object(h.jsx)("div",{className:"is-read",children:" "}),Object(h.jsx)("div",{className:"img-container",onClick:function(e){return O(t.user)},children:Object(h.jsx)("img",{src:t.user.avatarUrl,alt:t.user.userName})})]}),Object(h.jsxs)("div",{className:"right-content",children:[Object(h.jsxs)("div",{className:"video-msg-info",children:[Object(h.jsx)("div",{className:"user-name",onClick:function(e){return O(t.user)},children:t.user.userName}),Object(h.jsx)("div",{className:"operator",children:t.content}),Object(h.jsx)("div",{className:"video-name",children:t.channel.name})]}),Object(h.jsx)("div",{className:"video-cover",onClick:function(n){return function(t){Object(s.j)(t.id).then((function(n){e.history.push({pathname:"/Home/channelDetail",state:{id:t.channel.id}})}))}(t)},children:Object(h.jsx)("img",{src:t.channel.coverUrl,alt:t.channel.name})})]})]}),Object(h.jsx)("div",{className:"delete-msg",onClick:function(e){return function(e){j(Object(f.a)(!0)).then((function(t){t&&Object(s.a)(e.id).then((function(e){j(Object(g.a)("\u5220\u9664\u6210\u529f",1500)),Object(s.d)("0","15").then((function(e){i(e.count),b(e.message)}))}))}))}(t)},children:Object(h.jsx)("i",{className:"iconfont icon-huishouzhan",children:" "})})]},t.id)}))}),0===r&&Object(h.jsx)("div",{className:"empty",children:Object(h.jsx)(d.a,{image:d.a.PRESENTED_IMAGE_SIMPLE,description:"\u6682\u65e0\u901a\u77e5"})})]})};t.default=Object(c.h)(Object(o.memo)(m))},97:function(e,t,n){"use strict";var r=n(173),a=n.n(r),o=n(26),i=n(22),u=n(106),s=n(9);t.a=function(e){var t=a.a.create({baseURL:o.a,timeout:15e3});return t.interceptors.request.use((function(e){return e}),(function(e){return console.log(e),e})),t.interceptors.response.use((function(e){return e.data}),(function(e){if(e.response){var t=e.response,n=t.status,r=t.data;if(1*n!==403||"\u8bf7\u767b\u5f55"!==r.message)throw e;i.a.dispatch(Object(u.d)()),i.a.dispatch(Object(u.b)({token:"",userName:"",userId:"",avatarUrl:"",createTime:"",updateTime:"",manage:-1,auth:-1})),Object(s.a)().push({pathname:"/Login"})}})),t.request(e)}}}]);
//# sourceMappingURL=47.af3a0c25.chunk.js.map